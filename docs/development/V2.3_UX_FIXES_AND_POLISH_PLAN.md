# v2.3 UX Fixes, Seed Data & Mobile Polish - Implementation Plan

**Status**: PLANNING
**Created**: 2026-02-15
**Target**: TheITApprentice LMS - UX bugs, missing data, mobile optimization
**Priority**: HIGH - Multiple user-facing issues affecting core functionality

---

## Overview

This plan addresses 8 major issue areas identified across the platform. Issues range from broken navigation links, missing seed data, pages not optimized for mobile, to stat display bugs on the typing game.

---

## Issue 1: Challenges Page Only Shows Daily Challenges

**URL**: `/challenges`
**Current State**: The route maps to `DailyChallengesPage` which only fetches daily challenges via `challengesApi.getTodaysChallenges()`. The `ChallengeDrawer` also only shows daily challenges.
**Problem**: Typing game challenges (e.g. "Type 50 WPM", "Complete 3 games") and other non-daily challenges are not displayed.

### Root Cause
- `/challenges` route only renders `DailyChallengesPage` - there's no unified challenges view
- The challenges API only returns today's daily challenges
- No typing challenge cards or links to typing-specific challenges exist on this page

### Fix Plan
1. **Extend DailyChallengesPage** to include a "Typing Challenges" section below daily challenges
   - Add a "Typing Challenges" card section with links to typing game modes
   - Show typing-specific challenges like WPM targets, accuracy goals, streak challenges
   - Pull from typing game challenge data if available in backend, or create static challenge cards linking to game modes
2. **Add challenge type tabs** at the top: "Daily" | "Typing" | "Quiz" | "All"
   - Daily tab = current daily challenges (default)
   - Typing tab = typing game challenges/goals
   - Quiz tab = quiz challenges
   - All = combined view
3. **Update ChallengeDrawer** to also show typing challenges alongside daily ones

### Files to Modify
- `frontend/src/pages/DailyChallengesPage.tsx` - Add tabs and typing challenge section
- `frontend/src/components/layout/ChallengeDrawer.tsx` - Add typing challenges

### Estimated Complexity: Medium

---

## Issue 2: Typing Skill Seed Data

**Current State**: `backend/app/plugins/skills/seed.py` already has a "Typing" skill defined (slug: `typing`, display_order: 10) in the DEFAULT_SKILLS list. The seed script exists and can be run with `python -m app.plugins.skills.seed`.
**Problem**: The seed may not have been run on the dev server.

### Fix Plan
1. **Run the existing seed script** on dev server: `python -m app.plugins.skills.seed`
2. **Verify** the typing skill is linked to game results via `award_skill_xp()` in the submit route (already wired up at `routes.py:192-217`)
3. **Verify** the skills plugin is enabled in settings (`PLUGINS_ENABLED["skills"]`)

### Files to Check/Modify
- `backend/app/plugins/skills/seed.py` - Already has typing skill, just needs running
- `backend/app/plugins/skills/models.py` - Verify model is up to date
- `backend/app/core/config.py` - Verify `PLUGINS_ENABLED["skills"] = True`

### Estimated Complexity: Low (just run seed + verify config)

---

## Issue 3: Courses Landing Page - Mobile Optimization

**URL**: `/courses`
**Current State**: `CoursesList.tsx` has a large hero section with "Explore Our Courses" heading, stats badges (5 Courses, Expert Instructors, Certificates), search bar, and filter tabs. From screenshot, the layout looks cramped on mobile with oversized elements.
**Problem**: Hero section too tall on mobile, cards don't optimize well, filter tabs wrapping poorly, search bar too large.

### Fix Plan
1. **Compact hero section for mobile**
   - Reduce padding: `py-16` -> `py-8 sm:py-16`
   - Smaller heading: `text-4xl` -> `text-2xl sm:text-4xl`
   - Reduce icon size on mobile
   - Stack stats badges horizontally with smaller text on mobile
2. **Optimize search/filter area**
   - Make search bar full-width on mobile with smaller padding
   - Filter tabs: horizontal scroll with `overflow-x-auto` instead of wrapping
   - Smaller filter pills on mobile
3. **Course cards mobile layout**
   - Full-width cards on mobile (already `grid-cols-1` on small, verify)
   - Reduce card padding on mobile
   - Ensure progress bars, tags, and XP badges are readable

### Files to Modify
- `frontend/src/plugins/courses/pages/public/CoursesList.tsx`

### Estimated Complexity: Medium

---

## Issue 4: Tutorials Page - Consistency & Mobile Optimization

**URL**: `/tutorials`
**Current State**: `TutorialsPage.tsx` has a gradient header ("Learn & Grow"), search bar, featured tutorials section, and a grid of tutorial cards. From screenshot, the purple gradient header is very tall and the layout isn't compact on mobile.
**Problem**: Header section too large on mobile, inconsistent styling compared to other pages, not mobile-optimized.

### Fix Plan
1. **Compact header for mobile**
   - Reduce padding: `py-16` -> `py-8 sm:py-16`
   - Smaller heading: `text-4xl md:text-5xl` -> `text-2xl sm:text-4xl md:text-5xl`
   - Smaller subtitle text on mobile
2. **Category filters**
   - Add horizontal scrolling tabs for categories on mobile
   - Match the filter UI pattern used on Courses page for consistency
3. **Tutorial cards**
   - Ensure consistent card design matching course cards (progress bar, XP badge, skill tags)
   - Full-width on mobile, responsive grid on larger screens
4. **Search bar**
   - Match the search UI from courses page for consistency
   - Full-width on mobile

### Files to Modify
- `frontend/src/plugins/tutorials/pages/TutorialsPage.tsx`
- `frontend/src/plugins/tutorials/components/TutorialCard.tsx` (if needed)

### Estimated Complexity: Medium

---

## Issue 5: Quiz Page - Mobile Optimization & Seed Data

**URL**: `/quizzes`
**Current State**: `QuizzesPage.tsx` has a gradient header, user stats bar, featured quizzes, and a sidebar filter layout. Backend has `seed_data.py` with quiz data ready to seed.
**Problem**: No quizzes seeded on dev server. Page layout not optimized for mobile (sidebar filter takes up too much space).

### Fix Plan

#### 5a. Seed Quiz Data
1. **Run quiz seed script**: `python -m app.plugins.quizzes.seed_data`
2. **Verify** quizzes appear in the API response
3. **Check** if the seed script creates all the quiz data or just definitions (verify questions are included)

#### 5b. Mobile Optimization
1. **Convert sidebar to top filter bar on mobile**
   - On mobile: filters collapse to horizontal scrollable chips or dropdown
   - On desktop: keep sidebar layout
   - Use `lg:flex-row` / `flex-col` responsive layout
2. **Compact header**
   - Same pattern as courses/tutorials: reduce padding and text sizes on mobile
3. **Stats bar**
   - Horizontal scroll or wrap better on mobile
4. **Quiz cards**
   - Full-width on mobile, ensure tags/badges don't overflow

### Files to Modify
- `frontend/src/plugins/quizzes/pages/QuizzesPage.tsx`
- `backend/app/plugins/quizzes/seed_data.py` - Run on dev server

### Estimated Complexity: Medium

---

## Issue 6: Settings Page Not Working

**URL**: `/settings`
**Current State**: There is NO `/settings` route in `routes.tsx`. Only `/admin/settings` exists (for admin site settings). The mobile sidebar and account section both link to `/settings` but it leads to a 404 or blank page.
**Problem**: No user settings/preferences page exists at all.

### Fix Plan
1. **Create `UserSettingsPage.tsx`** with the following sections:
   - **Profile Settings**: Edit display name, bio, avatar
   - **Notification Preferences**: Email notifications, push notifications, challenge reminders
   - **Theme Preference**: Light/Dark/System (persist to user profile)
   - **Privacy Settings**: Profile visibility, leaderboard opt-in/out
   - **Learning Preferences**: Default difficulty, daily challenge reminders
   - **Account Actions**: Change password, export data, delete account
2. **Add route** in `routes.tsx`: `/settings` -> `ProtectedRoute` -> `UserSettingsPage`
3. **Create backend endpoint** for user preferences if not already existing:
   - `GET /api/v1/users/me/preferences`
   - `PUT /api/v1/users/me/preferences`
4. **Wire up mobile sidebar** Settings button (already links to `/settings`, just needs the page)

### Files to Create
- `frontend/src/pages/user/UserSettingsPage.tsx`

### Files to Modify
- `frontend/src/routes/routes.tsx` - Add `/settings` route
- `backend/app/users/routes.py` - Add preferences endpoints (if needed)
- `backend/app/users/models.py` - Add preferences JSON field (if needed)

### Estimated Complexity: High

---

## Issue 7: Mobile Sidebar - Notification Bell & Settings Not Working

**Current State**: From screenshot, the mobile sidebar (`MobileDrawer.tsx`) shows a notification bell icon and settings gear icon at the top. The settings button navigates to `/settings` (which doesn't exist - Issue 6). The notification bell behavior is unclear.
**Problem**: Settings links to non-existent page. Notification bell may not be wired up.

### Fix Plan
1. **Settings button** - Will be fixed by Issue 6 (creating the settings page)
2. **Notification bell in mobile sidebar**:
   - Check if it opens a notifications dropdown/panel or navigates somewhere
   - Wire it up to show notification count badge (unread notifications)
   - On click: either open a notifications panel/drawer or navigate to a notifications page
   - Show challenge completion notifications, XP earned, level ups, etc.
3. **Verify both buttons work** after fixes

### Files to Modify
- `frontend/src/components/layout/MobileNav/MobileDrawer.tsx` - Fix notification bell handler
- `frontend/src/components/layout/MobileNav/sections/AccountSection.tsx` - Verify settings link

### Estimated Complexity: Low-Medium (depends on notification system state)

---

## Issue 8: Typing Game Landing Page - 0 WPM / 0 Streak & Leaderboard 0 WPM

**URL**: `/typing-practice`
**Current State**: `TypingGamePage.tsx` fetches stats via `typingGameApi.getMyStats()` and displays `stats.best_wpm`, `stats.current_streak_days`, etc. The leaderboard fetches via `typingGameApi.getLeaderboard('wpm', 3)` and shows top 3 players. Both show 0.
**Problem**: After completing games, stats show 0 WPM and 0 streak on the landing page and leaderboard.

### Root Cause Analysis
The backend `complete_game_session()` in `crud.py` correctly updates `UserTypingStats.best_wpm` and other fields. Possible issues:
1. **Frontend might be calling the v1 submit** which doesn't trigger v2 anti-cheat flow - check which submit the game components use
2. **Stats endpoint might return stale data** - the `/stats/me` endpoint calls `get_or_create_user_stats()` which returns current DB state
3. **The game components might not be calling submit at all** - check if QuickBrownFoxGame, InfiniteRushGame, etc. actually call the submit API
4. **Streak calculation might be broken** - `current_streak_days` may not be updated in the CRUD

### Investigation & Fix Plan
1. **Trace the full submit flow** for each game mode:
   - `QuickBrownFoxGame.tsx` -> what happens when game ends -> does it call `submitGame` or `submitGameV2`?
   - `InfiniteRushGame.tsx` -> same check
   - `GhostModeGame.tsx` -> same check
   - `WordListPracticeGame.tsx` -> same check
2. **Check submit response handling** - does the frontend properly handle the response and navigate back with `gameCompleted` state?
3. **Check streak update logic** in backend CRUD - is `current_streak_days` being updated on game completion?
4. **Check leaderboard query** - `get_leaderboard()` in `crud.py` queries `UserTypingStats` where `total_games_completed > 0` and orders by `best_wpm`. If stats aren't being written, entries won't appear.
5. **Add console logging** in frontend submit flow to trace what's happening
6. **Test manually**: Play a game, check Network tab for submit API call, verify response contains non-zero WPM

### Files to Investigate/Modify
- `frontend/src/plugins/typing-game/components/QuickBrownFoxGame.tsx` - Check submit flow
- `frontend/src/plugins/typing-game/components/InfiniteRushGame.tsx` - Check submit flow
- `frontend/src/plugins/typing-game/components/GhostModeGame.tsx` - Check submit flow
- `frontend/src/plugins/typing-game/components/WordListPracticeGame.tsx` - Check submit flow
- `frontend/src/plugins/typing-game/hooks/useTypingEngine.ts` - Check if submit is called here
- `backend/app/plugins/typing_game/crud.py` - Verify streak update logic
- `backend/app/plugins/typing_game/routes.py` - Verify submit endpoints work

### Estimated Complexity: Medium-High (requires debugging across frontend + backend)

---

## Implementation Priority Order

| Priority | Issue | Effort | Impact |
|----------|-------|--------|--------|
| 1 | **Issue 8**: Typing game 0 WPM bug | Medium-High | HIGH - Core feature broken |
| 2 | **Issue 2**: Seed typing skill | Low | HIGH - Required for XP system |
| 3 | **Issue 5a**: Seed quiz data | Low | HIGH - Empty page on dev |
| 4 | **Issue 6**: Settings page | High | HIGH - Broken navigation |
| 5 | **Issue 7**: Mobile sidebar buttons | Low-Medium | MEDIUM - Mobile UX |
| 6 | **Issue 1**: Challenges page typing challenges | Medium | MEDIUM - Feature gap |
| 7 | **Issue 3**: Courses mobile optimization | Medium | MEDIUM - Mobile UX |
| 8 | **Issue 4**: Tutorials mobile optimization | Medium | MEDIUM - Consistency |
| 9 | **Issue 5b**: Quiz page mobile optimization | Medium | MEDIUM - Mobile UX |

---

## Sprint Plan

### Sprint 1: Critical Fixes (Issues 8, 2, 5a)
**Goal**: Fix broken core functionality and seed missing data

- [ ] Debug and fix typing game 0 WPM / 0 streak bug
- [ ] Run skills seed script on dev server
- [ ] Verify skills plugin is enabled in config
- [ ] Run quiz seed script on dev server
- [ ] Verify quizzes appear on `/quizzes` page

### Sprint 2: Settings & Navigation (Issues 6, 7)
**Goal**: Create missing settings page and fix mobile sidebar

- [ ] Create `UserSettingsPage.tsx` with profile, notifications, theme, privacy sections
- [ ] Add backend user preferences endpoint (if needed)
- [ ] Add `/settings` route to `routes.tsx`
- [ ] Fix notification bell in mobile sidebar
- [ ] Test both buttons in mobile drawer work correctly

### Sprint 3: Challenges Enhancement (Issue 1)
**Goal**: Expand challenges page beyond daily-only

- [ ] Add tabs to DailyChallengesPage: Daily | Typing | Quiz | All
- [ ] Create typing challenge cards section
- [ ] Update ChallengeDrawer to show typing challenges
- [ ] Test challenge completion flow

### Sprint 4: Mobile Polish (Issues 3, 4, 5b)
**Goal**: Make all landing pages mobile-first and consistent

- [ ] Courses page mobile optimization (compact hero, scroll filters, responsive cards)
- [ ] Tutorials page mobile optimization (compact header, consistent filters)
- [ ] Quiz page mobile optimization (collapse sidebar, compact header)
- [ ] Cross-page consistency check (all landing pages should feel unified)
- [ ] Test on mobile viewport sizes (375px, 414px, 768px)

---

## Design Consistency Guidelines

All landing pages (Courses, Tutorials, Quizzes, Typing) should follow this pattern:
1. **Compact hero** on mobile: `py-6 sm:py-12 md:py-16`
2. **Heading sizes**: `text-2xl sm:text-3xl md:text-4xl`
3. **Search bar**: Full-width, consistent styling, `px-3 py-2.5` on mobile
4. **Filter chips**: Horizontal scroll on mobile with `overflow-x-auto flex-nowrap`
5. **Cards**: Full-width on mobile, `grid-cols-1 sm:grid-cols-2 lg:grid-cols-3`
6. **Stats badges**: Compact on mobile, wrapping allowed
7. **Gradient headers**: Shorter on mobile, consistent color schemes per section

---

## Testing Checklist

- [ ] Typing game: Play QBF, verify WPM shows on landing page after
- [ ] Typing game: Check leaderboard shows real entries
- [ ] Typing game: Check streak increments after daily play
- [ ] Skills: Verify typing skill exists in DB after seed
- [ ] Quizzes: Verify quiz list populates after seed
- [ ] Settings: Navigate from mobile sidebar -> settings page loads
- [ ] Settings: Change theme preference -> persists
- [ ] Notifications: Bell icon shows count, opens panel
- [ ] Challenges: See both daily and typing challenges
- [ ] Courses: Page renders well on 375px width
- [ ] Tutorials: Page renders well on 375px width
- [ ] Quizzes: Page renders well on 375px width
- [ ] All pages: Light/dark mode works correctly

---

**Status**: READY FOR IMPLEMENTATION
**Owner**: Andy Naisbitt
**Last Updated**: 2026-02-15
