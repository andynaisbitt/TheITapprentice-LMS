import{c as be,g as b,r as l,j as e,M as he,X as L,U as q,S as I,e as pe,n as ye,v as je,Y as ke,_ as ve}from"./index-smch1bU1.js";import{L as F}from"./loader-2-D9MIupjh.js";import{F as fe}from"./filter-8mvCWH_v.js";import{C as G,S as H}from"./square-DNo4tjry.js";import{P as Ne}from"./pen-square-C1GUdoLG.js";import{T as we}from"./trash-2-7shbvHm_.js";import{C as _e}from"./calendar-D0h1sdek.js";const Ce=be("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),p={createUser:async t=>(await b.post("/api/v1/admin/users",t)).data,getAllUsers:async t=>(await b.get("/api/v1/admin/users",{params:t})).data,getStats:async()=>(await b.get("/api/v1/admin/users/stats")).data,getUserById:async t=>(await b.get(`/api/v1/admin/users/${t}`)).data,updateUser:async(t,x)=>(await b.put(`/api/v1/admin/users/${t}`,x)).data,deleteUser:async t=>{await b.delete(`/api/v1/admin/users/${t}`)},bulkUpdate:async(t,x)=>(await b.post("/api/v1/admin/users/bulk-update",{user_ids:t,updates:x})).data,bulkDelete:async t=>(await b.post("/api/v1/admin/users/bulk-delete",{user_ids:t})).data},De=()=>{const[t,x]=l.useState([]),[m,O]=l.useState(null),[y,n]=l.useState(!0),[M,i]=l.useState(""),[B,c]=l.useState(""),[w,J]=l.useState(""),[_,Q]=l.useState("all"),[C,W]=l.useState("all"),[S,X]=l.useState("all"),[E,Z]=l.useState("created_at"),[T,Y]=l.useState("desc"),[f,$]=l.useState(1),[U,K]=l.useState(1),[ee,re]=l.useState(0),ae=20,[g,N]=l.useState(new Set),[j,R]=l.useState(null),[te,A]=l.useState(!1),[se,z]=l.useState(!1),[V,D]=l.useState(!1),[d,u]=l.useState({}),[a,o]=l.useState({email:"",username:"",first_name:"",last_name:"",password:"",role:"apprentice",is_active:!0,is_verified:!1,can_write_blog:!1,can_moderate:!1});l.useEffect(()=>{k(),v()},[w,_,C,S,E,T,f]);const k=async()=>{n(!0),i("");try{const r={page:f,page_size:ae,sort_by:E,sort_order:T};w&&(r.search=w),_!=="all"&&(r.role=_),C==="active"&&(r.is_active=!0),C==="inactive"&&(r.is_active=!1),S==="verified"&&(r.is_verified=!0),S==="unverified"&&(r.is_verified=!1);const s=await p.getAllUsers(r);x(s.users),K(s.total_pages),re(s.total)}catch(r){console.error("Failed to load users:",r),i(r.message||"Failed to load users")}finally{n(!1)}},v=async()=>{try{const r=await p.getStats();O(r)}catch(r){console.error("Failed to load stats:",r)}},le=r=>{const s=new Set(g);s.has(r)?s.delete(r):s.add(r),N(s)},de=()=>{g.size===t.length?N(new Set):N(new Set(t.map(r=>r.id)))},ie=r=>{R(r),u({role:r.role,is_active:r.is_active,is_verified:r.is_verified,is_admin:r.is_admin,can_write_blog:r.can_write_blog,can_moderate:r.can_moderate,subscription_status:r.subscription_status,subscription_plan:r.subscription_plan}),A(!0)},ne=async()=>{if(j){i(""),n(!0);try{await p.updateUser(j.id,d),c(`User ${j.username} updated successfully`),A(!1),R(null),k(),v(),setTimeout(()=>c(""),3e3)}catch(r){i(r.response?.data?.detail||"Failed to update user")}finally{n(!1)}}},oe=async()=>{i(""),n(!0);try{const r=await p.createUser(a);c(`User ${r.username} created successfully${a.password?"":" (random password generated)"}`),z(!1),o({email:"",username:"",first_name:"",last_name:"",password:"",role:"apprentice",is_active:!0,is_verified:!1,can_write_blog:!1,can_moderate:!1}),k(),v(),setTimeout(()=>c(""),5e3)}catch(r){i(r.response?.data?.detail||"Failed to create user")}finally{n(!1)}},ce=async r=>{if(confirm(`Are you sure you want to delete user "${r.username}"? This action cannot be undone.`)){i(""),n(!0);try{await p.deleteUser(r.id),c(`User ${r.username} deleted successfully`),k(),v(),setTimeout(()=>c(""),3e3)}catch(s){i(s.response?.data?.detail||"Failed to delete user")}finally{n(!1)}}},P=async r=>{const s=Array.from(g);if(s.length===0){alert("Please select users first");return}i(""),n(!0);try{const h=await p.bulkUpdate(s,r);c(h.message),N(new Set),D(!1),k(),v(),setTimeout(()=>c(""),3e3)}catch(h){i(h.response?.data?.detail||"Bulk update failed")}finally{n(!1)}},xe=async()=>{const r=Array.from(g);if(r.length===0){alert("Please select users first");return}if(confirm(`Are you sure you want to delete ${r.length} users? This action cannot be undone.`)){i(""),n(!0);try{const s=await p.bulkDelete(r);c(s.message),N(new Set),D(!1),k(),v(),setTimeout(()=>c(""),3e3)}catch(s){i(s.response?.data?.detail||"Bulk delete failed")}finally{n(!1)}}},ge=r=>new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),me=r=>new Date(r).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),ue=r=>{const s={admin:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400",author:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",tutor:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",mentor:"bg-teal-100 text-teal-700 dark:bg-teal-900/30 dark:text-teal-400",contributor:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400",supporter:"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400",apprentice:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"},h=r.toLowerCase();return s[h]||s.apprentice};return y&&!m?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-slate-900",children:e.jsx(F,{className:"animate-spin h-12 w-12 text-blue-600"})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-slate-900 p-6",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"User Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage user accounts, roles, and permissions"})]}),e.jsxs("button",{onClick:()=>z(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition font-medium",children:[e.jsx(he,{size:20}),"Create User"]})]}),B&&e.jsx("div",{className:"mb-6 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:e.jsx("p",{className:"text-green-600 dark:text-green-400",children:B})}),M&&e.jsxs("div",{className:"mb-6 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 flex items-center justify-between",children:[e.jsx("p",{className:"text-red-600 dark:text-red-400",children:M}),e.jsx("button",{onClick:()=>i(""),className:"text-red-600 hover:text-red-700",children:e.jsx(L,{size:18})})]}),m&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-6 border border-gray-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Users"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:m.total_users})]}),e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(q,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-6 border border-gray-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active Users"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:m.active_users})]}),e.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-lg",children:e.jsx(Ce,{className:"w-8 h-8 text-green-600 dark:text-green-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-6 border border-gray-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Admins"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:m.admin_count})]}),e.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:e.jsx(I,{className:"w-8 h-8 text-purple-600 dark:text-purple-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-6 border border-gray-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"New This Month"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:m.new_this_month})]}),e.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:e.jsx(pe,{className:"w-8 h-8 text-orange-600 dark:text-orange-400"})})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow border border-gray-200 dark:border-slate-700 p-4 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ye,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search users...",value:w,onChange:r=>J(r.target.value),className:"w-full pl-10 pr-4 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg text-gray-900 dark:text-gray-100 placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("select",{value:_,onChange:r=>Q(r.target.value),className:"px-4 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Roles"}),e.jsx("option",{value:"apprentice",children:"Apprentice"}),e.jsx("option",{value:"supporter",children:"Supporter"}),e.jsx("option",{value:"contributor",children:"Contributor"}),e.jsx("option",{value:"mentor",children:"Mentor"}),e.jsx("option",{value:"tutor",children:"Tutor"}),e.jsx("option",{value:"author",children:"Author"}),e.jsx("option",{value:"admin",children:"Admin"})]}),e.jsxs("select",{value:C,onChange:r=>W(r.target.value),className:"px-4 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]}),e.jsxs("select",{value:S,onChange:r=>X(r.target.value),className:"px-4 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Verification"}),e.jsx("option",{value:"verified",children:"Verified"}),e.jsx("option",{value:"unverified",children:"Unverified"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"text-gray-400",size:18}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",t.length," of ",ee," users"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("select",{value:`${E}_${T}`,onChange:r=>{const[s,h]=r.target.value.split("_");Z(s),Y(h)},className:"px-3 py-1.5 text-sm bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg text-gray-900 dark:text-gray-100",children:[e.jsx("option",{value:"created_at_desc",children:"Newest First"}),e.jsx("option",{value:"created_at_asc",children:"Oldest First"}),e.jsx("option",{value:"email_asc",children:"Email (A-Z)"}),e.jsx("option",{value:"email_desc",children:"Email (Z-A)"}),e.jsx("option",{value:"last_login_desc",children:"Recently Active"})]}),g.size>0&&e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>D(!V),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition text-sm font-medium",children:["Bulk Actions (",g.size,")",e.jsx(je,{size:16})]}),V&&e.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-slate-800 rounded-lg shadow-xl border border-gray-200 dark:border-slate-700 z-10",children:[e.jsx("button",{onClick:()=>P({is_active:!0}),className:"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-slate-700 text-gray-700 dark:text-gray-300 text-sm",children:"Activate Selected"}),e.jsx("button",{onClick:()=>P({is_active:!1}),className:"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-slate-700 text-gray-700 dark:text-gray-300 text-sm",children:"Deactivate Selected"}),e.jsx("button",{onClick:()=>P({is_verified:!0}),className:"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-slate-700 text-gray-700 dark:text-gray-300 text-sm",children:"Verify Selected"}),e.jsx("div",{className:"border-t border-gray-200 dark:border-slate-600"}),e.jsx("button",{onClick:xe,className:"w-full text-left px-4 py-2 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 text-sm",children:"Delete Selected"})]})]})]})]})]}),y?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(F,{className:"animate-spin h-8 w-8 text-blue-600"})}):t.length===0?e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow border border-gray-200 dark:border-slate-700 p-12 text-center",children:[e.jsx(q,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No users found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Try adjusting your filters"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow border border-gray-200 dark:border-slate-700 p-3",children:e.jsxs("button",{onClick:de,className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400",children:[g.size===t.length?e.jsx(G,{size:18,className:"text-blue-600"}):e.jsx(H,{size:18}),e.jsx("span",{children:g.size===t.length?"Deselect All":"Select All"})]})}),t.map(r=>e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow border border-gray-200 dark:border-slate-700 p-6 hover:shadow-lg transition",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("button",{onClick:()=>le(r.id),className:"mt-1 text-gray-400 hover:text-blue-600",children:g.has(r.id)?e.jsx(G,{size:22,className:"text-blue-600"}):e.jsx(H,{size:22})}),e.jsxs("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-white font-bold text-lg flex-shrink-0",children:[r.first_name[0],r.last_name[0]]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:[r.first_name," ",r.last_name,r.is_admin&&e.jsx(I,{className:"inline-block ml-2 w-4 h-4 text-purple-600"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(ke,{size:14}),e.jsx("span",{children:r.email}),e.jsx("span",{className:"text-gray-400",children:"•"}),e.jsxs("span",{children:["@",r.username]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ie(r),className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition",title:"Edit user",children:e.jsx(Ne,{size:18})}),e.jsx("button",{onClick:()=>ce(r),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition",title:"Delete user",children:e.jsx(we,{size:18})})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${ue(r.role)}`,children:r.role.charAt(0).toUpperCase()+r.role.slice(1)}),r.is_active?e.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",children:"Active"}):e.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400",children:"Inactive"}),r.is_verified&&e.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",children:"Verified"}),r.google_id&&e.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300",children:"Google"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-xs text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{children:[e.jsx(_e,{size:12,className:"inline mr-1"}),"Joined: ",ge(r.created_at)]}),r.last_login&&e.jsxs("div",{children:[e.jsx(ve,{size:12,className:"inline mr-1"}),"Last: ",me(r.last_login)]}),e.jsxs("div",{children:["Logins: ",r.login_count]}),e.jsxs("div",{children:["Level: ",r.level," (",r.total_points," pts)"]})]}),(r.can_write_blog||r.can_moderate)&&e.jsxs("div",{className:"mt-2 flex gap-2",children:[r.can_write_blog&&e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"✓ Can write blog"}),r.can_moderate&&e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"✓ Can moderate"})]})]})]})},r.id))]}),U>1&&e.jsxs("div",{className:"mt-6 flex justify-center gap-2",children:[e.jsx("button",{onClick:()=>$(r=>Math.max(1,r-1)),disabled:f===1,className:"px-4 py-2 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-slate-700 transition",children:"Previous"}),e.jsxs("span",{className:"px-4 py-2 text-gray-700 dark:text-gray-300",children:["Page ",f," of ",U]}),e.jsx("button",{onClick:()=>$(r=>Math.min(U,r+1)),disabled:f===U,className:"px-4 py-2 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-slate-700 transition",children:"Next"})]})]}),te&&j&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Edit User"}),e.jsx("button",{onClick:()=>A(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(L,{size:24})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700/50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Email"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:j.email}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2 mb-1",children:"Username"}),e.jsxs("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:["@",j.username]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Role"}),e.jsxs("select",{value:d.role||"",onChange:r=>u({...d,role:r.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-gray-100",children:[e.jsx("option",{value:"apprentice",children:"Apprentice (Free Learner)"}),e.jsx("option",{value:"supporter",children:"Supporter (Paid Subscriber)"}),e.jsx("option",{value:"contributor",children:"Contributor (Volunteer Helper)"}),e.jsx("option",{value:"mentor",children:"Mentor (Community Guide)"}),e.jsx("option",{value:"tutor",children:"Tutor (Course Creator)"}),e.jsx("option",{value:"author",children:"Author (Blog Writer)"}),e.jsx("option",{value:"admin",children:"Admin (Full Access)"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("label",{className:"flex items-center gap-3 p-4 border border-gray-300 dark:border-slate-600 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-slate-700",children:[e.jsx("input",{type:"checkbox",checked:d.is_active??!1,onChange:r=>u({...d,is_active:r.target.checked}),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Active"})]}),e.jsxs("label",{className:"flex items-center gap-3 p-4 border border-gray-300 dark:border-slate-600 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-slate-700",children:[e.jsx("input",{type:"checkbox",checked:d.is_verified??!1,onChange:r=>u({...d,is_verified:r.target.checked}),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Verified"})]}),e.jsxs("label",{className:"flex items-center gap-3 p-4 border border-gray-300 dark:border-slate-600 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-slate-700",children:[e.jsx("input",{type:"checkbox",checked:d.is_admin??!1,onChange:r=>u({...d,is_admin:r.target.checked}),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Admin"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Permissions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-3 p-3 border border-gray-300 dark:border-slate-600 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-slate-700",children:[e.jsx("input",{type:"checkbox",checked:d.can_write_blog??!1,onChange:r=>u({...d,can_write_blog:r.target.checked}),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Can write blog posts"})]}),e.jsxs("label",{className:"flex items-center gap-3 p-3 border border-gray-300 dark:border-slate-600 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-slate-700",children:[e.jsx("input",{type:"checkbox",checked:d.can_moderate??!1,onChange:r=>u({...d,can_moderate:r.target.checked}),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Can moderate content"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Subscription Status"}),e.jsxs("select",{value:d.subscription_status||"",onChange:r=>u({...d,subscription_status:r.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-gray-100",children:[e.jsx("option",{value:"FREE",children:"Free"}),e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"CANCELLED",children:"Cancelled"}),e.jsx("option",{value:"EXPIRED",children:"Expired"}),e.jsx("option",{value:"PAST_DUE",children:"Past Due"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-slate-600",children:[e.jsx("button",{type:"button",onClick:()=>A(!1),className:"px-6 py-2 border border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700 transition",children:"Cancel"}),e.jsxs("button",{type:"button",onClick:ne,disabled:y,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[y&&e.jsx(F,{size:16,className:"animate-spin"}),"Save Changes"]})]})]})]})})}),se&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Create New User"}),e.jsx("button",{onClick:()=>z(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(L,{size:24})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email *"}),e.jsx("input",{type:"email",value:a.email,onChange:r=>o({...a,email:r.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-gray-100",placeholder:"user@example.com",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Username *"}),e.jsx("input",{type:"text",value:a.username,onChange:r=>o({...a,username:r.target.value.toLowerCase()}),className:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-gray-100",placeholder:"username",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"First Name *"}),e.jsx("input",{type:"text",value:a.first_name,onChange:r=>o({...a,first_name:r.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-gray-100",placeholder:"John",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Last Name *"}),e.jsx("input",{type:"text",value:a.last_name,onChange:r=>o({...a,last_name:r.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-gray-100",placeholder:"Doe",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password (optional)"}),e.jsx("input",{type:"password",value:a.password,onChange:r=>o({...a,password:r.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-gray-100",placeholder:"Leave empty to auto-generate"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Leave empty to generate a secure random password"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Role"}),e.jsxs("select",{value:a.role,onChange:r=>o({...a,role:r.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-gray-100",children:[e.jsx("option",{value:"apprentice",children:"Apprentice (Free Learner)"}),e.jsx("option",{value:"supporter",children:"Supporter (Paid Subscriber)"}),e.jsx("option",{value:"contributor",children:"Contributor (Volunteer Helper)"}),e.jsx("option",{value:"mentor",children:"Mentor (Community Guide)"}),e.jsx("option",{value:"tutor",children:"Tutor (Course Creator)"}),e.jsx("option",{value:"author",children:"Author (Blog Writer)"}),e.jsx("option",{value:"admin",children:"Admin (Full Access)"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("label",{className:"flex items-center gap-3 p-4 border border-gray-300 dark:border-slate-600 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-slate-700",children:[e.jsx("input",{type:"checkbox",checked:a.is_active,onChange:r=>o({...a,is_active:r.target.checked}),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Active"})]}),e.jsxs("label",{className:"flex items-center gap-3 p-4 border border-gray-300 dark:border-slate-600 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-slate-700",children:[e.jsx("input",{type:"checkbox",checked:a.is_verified,onChange:r=>o({...a,is_verified:r.target.checked}),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Verified"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Permissions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-3 p-3 border border-gray-300 dark:border-slate-600 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-slate-700",children:[e.jsx("input",{type:"checkbox",checked:a.can_write_blog,onChange:r=>o({...a,can_write_blog:r.target.checked}),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Can write blog posts"})]}),e.jsxs("label",{className:"flex items-center gap-3 p-3 border border-gray-300 dark:border-slate-600 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-slate-700",children:[e.jsx("input",{type:"checkbox",checked:a.can_moderate,onChange:r=>o({...a,can_moderate:r.target.checked}),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Can moderate content"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-slate-600",children:[e.jsx("button",{type:"button",onClick:()=>z(!1),className:"px-6 py-2 border border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700 transition",children:"Cancel"}),e.jsxs("button",{type:"button",onClick:oe,disabled:y||!a.email||!a.username||!a.first_name||!a.last_name,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[y&&e.jsx(F,{size:16,className:"animate-spin"}),"Create User"]})]})]})]})})})]})};export{De as UserManagement,De as default};
