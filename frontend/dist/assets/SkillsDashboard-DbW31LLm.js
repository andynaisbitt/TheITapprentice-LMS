import{u as S,r as i,j as e,T as v,L as m,e as u,S as p,Z as j,C}from"./index-CH_EXTVi.js";import{s as L}from"./skillsApi-FeqZoWOe.js";import{S as N}from"./star-BISlQTdL.js";import{C as T}from"./cloud-Ckk35vZl.js";import{S as A}from"./server-BDnN3R7b.js";import{C as $}from"./code-BHlmB5O8.js";const P={foundation:{icon:e.jsx(p,{className:"w-4 h-4"}),label:"Foundation"},development:{icon:e.jsx($,{className:"w-4 h-4"}),label:"Development"},systems:{icon:e.jsx(A,{className:"w-4 h-4"}),label:"Systems"},cloud_security:{icon:e.jsx(T,{className:"w-4 h-4"}),label:"Cloud & Security"}},X=({skill:a})=>{const o=Math.min(100,a.xpProgressPercentage),s=a.currentLevel>=99;return e.jsxs(m,{to:`/skills/${a.skillSlug}`,className:"group relative bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-3 sm:p-4 hover:shadow-lg hover:border-blue-300 dark:hover:border-blue-600 transition-all duration-200",children:[e.jsx("div",{className:"absolute -top-2 -right-2 w-7 h-7 text-xs sm:w-8 sm:h-8 rounded-full flex items-center justify-center text-white sm:text-sm font-bold shadow-md",style:{backgroundColor:a.tierColor},children:a.currentLevel}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-2 sm:mb-3",children:[e.jsx("span",{className:"text-xl sm:text-2xl",children:a.skillIcon}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors truncate",children:a.skillName}),e.jsx("span",{className:"text-xs font-medium px-2 py-0.5 rounded-full",style:{backgroundColor:`${a.tierColor}20`,color:a.tierColor},children:a.tier})]})]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mb-1",children:[e.jsxs("span",{children:[a.currentXp.toLocaleString()," XP"]}),e.jsxs("span",{className:"hidden sm:inline",children:[a.xpToNextLevel.toLocaleString()," to next"]})]}),e.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${o}%`,backgroundColor:a.tierColor}})})]}),e.jsx("div",{className:"flex gap-1 mt-2",children:[10,30,50,75,99].map(r=>{const d=r===10&&a.level10Achieved||r===30&&a.level30Achieved||r===50&&a.level50Achieved||r===75&&a.level75Achieved||r===99&&a.level99Achieved;return e.jsx("div",{className:`w-5 h-5 text-[10px] sm:w-6 sm:h-6 rounded-full flex items-center justify-center sm:text-xs font-bold ${d?"bg-yellow-400 text-yellow-900":"bg-gray-200 dark:bg-gray-700 text-gray-400"}`,title:d?`Level ${r} achieved!`:`Reach level ${r}`,children:r},r)})}),e.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 -bottom-8 z-10 text-xs bg-gray-900 text-white px-2 py-1 rounded whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:s?"MAX LEVEL":`${a.xpToNextLevel.toLocaleString()} XP to next level`}),e.jsx(C,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-300 dark:text-gray-600 group-hover:text-blue-500 group-hover:translate-x-1 transition-all opacity-0 group-hover:opacity-100"})]})},g=({label:a,value:o,subValue:s,icon:r,color:d})=>e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:`${d}20`},children:e.jsx("span",{style:{color:d},children:r})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:o}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:a}),s&&e.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-500",children:s})]})]})}),R=()=>{const{user:a,isAuthenticated:o}=S(),[s,r]=i.useState(null),[d,h]=i.useState(!0),[y,f]=i.useState(null),[n,b]=i.useState("all");i.useEffect(()=>{(async()=>{if(!o){h(!1);return}try{h(!0);const l=await L.getMySkills();r(l)}catch(l){console.error("Failed to fetch skills:",l),f(l.response?.data?.detail||"Failed to load skills")}finally{h(!1)}})()},[o]);const x=i.useMemo(()=>s?.skills.reduce((t,l)=>{const c=l.skillCategory;return t[c]||(t[c]=[]),t[c].push(l),t},{})||{},[s]),w=i.useMemo(()=>Object.keys(x),[x]),k=i.useMemo(()=>n==="all"?s?.skills||[]:x[n]||[],[n,s,x]);return o?d?e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-48 mb-4"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[1,2,3,4].map(t=>e.jsx("div",{className:"h-24 bg-gray-200 dark:bg-gray-700 rounded-lg"},t))}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[1,2,3,4,5,6,7,8,9,10,11,12].map(t=>e.jsx("div",{className:"h-40 bg-gray-200 dark:bg-gray-700 rounded-lg"},t))})]})}):y?e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-12 text-center",children:e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6",children:[e.jsx("p",{className:"text-red-600 dark:text-red-400",children:y}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg",children:"Retry"})]})}):s?e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-1",children:"Skills Dashboard"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:["Track your IT skill progression across 12 disciplines",e.jsx("span",{className:"mx-2 text-gray-300 dark:text-gray-600",children:"|"}),e.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:["Avg Lvl ",s.averageLevel.toFixed(1)," ·"," ",s.skillsAt50Plus," Expert+ ·"," ",s.specializationPath]})]})]}),e.jsxs("div",{className:"mt-3 md:mt-0 flex items-center gap-2",children:[e.jsxs(m,{to:"/skills/history",className:"inline-flex items-center px-3 py-2 text-sm bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg font-medium transition-colors",children:[e.jsx(u,{className:"w-4 h-4 mr-1.5"}),"XP History"]}),e.jsxs(m,{to:"/skills/leaderboard",className:"inline-flex items-center px-3 py-2 text-sm bg-yellow-500 hover:bg-yellow-600 text-white rounded-lg font-medium transition-colors",children:[e.jsx(v,{className:"w-4 h-4 mr-1.5"}),"Leaderboard"]})]})]}),e.jsxs("div",{className:"md:hidden flex items-center justify-between bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 px-3 py-2.5 mb-6 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(p,{className:"w-3.5 h-3.5 text-blue-500"}),e.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:s.itLevel}),e.jsx("span",{className:"text-gray-400 text-xs",children:"IT Lvl"})]}),e.jsx("div",{className:"w-px h-4 bg-gray-200 dark:bg-gray-700"}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(u,{className:"w-3.5 h-3.5 text-emerald-500"}),e.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:s.totalLevel}),e.jsx("span",{className:"text-gray-400 text-xs",children:"Total"})]}),e.jsx("div",{className:"w-px h-4 bg-gray-200 dark:bg-gray-700"}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(j,{className:"w-3.5 h-3.5 text-amber-500"}),e.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:s.totalXp.toLocaleString()}),e.jsx("span",{className:"text-gray-400 text-xs",children:"XP"})]}),e.jsx("div",{className:"w-px h-4 bg-gray-200 dark:bg-gray-700"}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(N,{className:"w-3.5 h-3.5 text-purple-500"}),e.jsx("span",{className:"font-bold text-gray-900 dark:text-white truncate max-w-[60px]",children:s.specialization})]})]}),e.jsxs("div",{className:"hidden md:grid md:grid-cols-4 gap-4 mb-6",children:[e.jsx(g,{label:"IT Level",value:s.itLevel,subValue:`/ ${s.maxItLevel}`,icon:e.jsx(p,{className:"w-5 h-5"}),color:"#3B82F6"}),e.jsx(g,{label:"Total Level",value:s.totalLevel,subValue:`/ ${s.maxTotalLevel}`,icon:e.jsx(u,{className:"w-5 h-5"}),color:"#10B981"}),e.jsx(g,{label:"Total XP",value:s.totalXp.toLocaleString(),icon:e.jsx(j,{className:"w-5 h-5"}),color:"#F59E0B"}),e.jsx(g,{label:"Specialization",value:s.specialization,icon:e.jsx(N,{className:"w-5 h-5"}),color:"#8B5CF6"})]}),e.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2 mb-6 scrollbar-hide",children:[e.jsx("button",{onClick:()=>b("all"),className:`whitespace-nowrap px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${n==="all"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"All Skills"}),w.map(t=>{const l=P[t];return e.jsxs("button",{onClick:()=>b(t),className:`whitespace-nowrap inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${n===t?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[l?.icon,l?.label||t.replace("_"," & ").replace(/\b\w/g,c=>c.toUpperCase())]},t)})]}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 sm:gap-4",children:k.map(t=>e.jsx(X,{skill:t},t.skillSlug))})]}):null:e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-12 text-center",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8",children:[e.jsx(v,{className:"w-16 h-16 mx-auto text-yellow-500 mb-4"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:"Skill Tracking"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Track your progress across 12 IT skills. Complete tutorials, courses, quizzes, and typing games to earn XP and level up!"}),e.jsx(m,{to:"/login",className:"inline-flex items-center px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Sign in to track your skills"})]})})};export{R as SkillsDashboard,R as default};
