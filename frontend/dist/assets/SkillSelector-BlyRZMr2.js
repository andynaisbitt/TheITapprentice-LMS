import{r as n,g as j,j as t,a3 as v,X as N,w}from"./index-smch1bU1.js";import{L as S}from"./loader-2-D9MIupjh.js";const P=({selectedSlugs:a,onChange:c,label:m="Related Skills",helpText:o="Skills that will receive XP when this content is completed",maxSkills:l=5})=>{const[d,p]=n.useState([]),[h,y]=n.useState(!0),[x,i]=n.useState(!1);n.useEffect(()=>{b()},[]);const b=async()=>{try{const e=await j.get("/api/v1/skills/");p(e.data)}catch(e){console.error("Failed to load skills:",e)}finally{y(!1)}},g=e=>{!a.includes(e)&&a.length<l&&c([...a,e]),i(!1)},f=e=>{c(a.filter(s=>s!==e))},u=e=>d.find(s=>s.slug===e),r=d.filter(e=>!a.includes(e.slug)),k=e=>e==="technical"?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400":"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400";return h?t.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[t.jsx(S,{className:"w-4 h-4 animate-spin"}),"Loading skills..."]}):t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:t.jsxs("span",{className:"flex items-center gap-2",children:[t.jsx(v,{className:"w-4 h-4"}),m]})}),o&&t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:o}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.map(e=>{const s=u(e);return s?t.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium ${k(s.category)}`,children:[t.jsx("span",{children:s.icon}),s.name,t.jsx("button",{type:"button",onClick:()=>f(e),className:"ml-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full p-0.5",children:t.jsx(N,{className:"w-3 h-3"})})]},e):null}),a.length<l&&t.jsxs("div",{className:"relative",children:[t.jsxs("button",{type:"button",onClick:()=>i(!x),className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:[t.jsx(w,{className:"w-4 h-4"}),"Add Skill"]}),x&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>i(!1)}),t.jsx("div",{className:"absolute left-0 top-full mt-1 z-20 w-64 max-h-64 overflow-y-auto bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700",children:r.length>0?t.jsxs(t.Fragment,{children:[r.filter(e=>e.category==="technical").length>0&&t.jsxs("div",{children:[t.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase bg-gray-50 dark:bg-gray-700/50",children:"Technical Skills"}),r.filter(e=>e.category==="technical").map(e=>t.jsxs("button",{type:"button",onClick:()=>g(e.slug),className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-left hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[t.jsx("span",{children:e.icon}),t.jsx("span",{className:"text-gray-900 dark:text-white",children:e.name})]},e.slug))]}),r.filter(e=>e.category==="soft").length>0&&t.jsxs("div",{children:[t.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase bg-gray-50 dark:bg-gray-700/50",children:"Soft Skills"}),r.filter(e=>e.category==="soft").map(e=>t.jsxs("button",{type:"button",onClick:()=>g(e.slug),className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-left hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[t.jsx("span",{children:e.icon}),t.jsx("span",{className:"text-gray-900 dark:text-white",children:e.name})]},e.slug))]})]}):t.jsx("div",{className:"px-3 py-4 text-sm text-gray-500 text-center",children:"All skills selected"})})]})]})]}),a.length===0&&t.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400",children:"No skills selected - XP will be awarded to Problem Solving by default"}),a.length>=l&&t.jsxs("p",{className:"text-xs text-gray-500",children:["Maximum ",l," skills allowed"]})]})};export{P as S};
