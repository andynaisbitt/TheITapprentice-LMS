import{r as t,g as i,j as e,a3 as C,w as z,U as B,Z,e as K,i as _,n as V,X as q}from"./index-CJMQzWwg.js";import{L as u}from"./loader-2-DzYHjI--.js";import{R as G}from"./refresh-cw-CjDnXyeW.js";import{E as H}from"./eye-CSrMaUQX.js";import{E as J}from"./eye-off-NQb64N79.js";import{P as Q}from"./pen-CLQEmhrg.js";import{T as W}from"./trash-2-C9bL4NO9.js";import{S as Y}from"./save-CqRpohLS.js";const ee=["ðŸ–¥ï¸","ðŸ”’","ðŸ’»","âš™ï¸","â˜ï¸","ðŸ—„ï¸","ðŸ”„","ðŸŒ","ðŸ”§","ðŸ’¬","ðŸ§©","ðŸ“‹"],ne=()=>{const[L,b]=t.useState([]),[A,j]=t.useState(!0),[m,F]=t.useState(""),[y,T]=t.useState("all"),[h,E]=t.useState(!1),[c,I]=t.useState(null),[d,k]=t.useState(null),[D,v]=t.useState(!1),[P,n]=t.useState(!1),[o,x]=t.useState(null),[f,N]=t.useState(!1),[r,s]=t.useState({name:"",slug:"",description:"",icon:"ðŸ’»",category:"technical",display_order:1,is_active:!0});t.useEffect(()=>{g(),U()},[h]);const g=async()=>{j(!0);try{const a=await i.get(`/api/v1/admin/skills/?include_inactive=${h}`);b(a.data)}catch(a){console.error("Failed to load skills:",a),b([])}finally{j(!1)}},U=async()=>{try{const a=await i.get("/api/v1/admin/skills/analytics/overview");I(a.data)}catch(a){console.error("Failed to load system analytics:",a)}},$=async a=>{v(!0);try{const l=await i.get(`/api/v1/admin/skills/analytics/${a}`);k(l.data)}catch(l){console.error("Failed to load skill analytics:",l)}finally{v(!1)}},w=async()=>{if(confirm("This will seed/update the default 12 IT skills. Continue?"))try{const a=await i.post("/api/v1/admin/skills/seed");alert(a.data.message),g()}catch(a){console.error("Failed to seed skills:",a),alert("Failed to seed skills")}},X=a=>{x(a),s({name:a.name,slug:a.slug,description:a.description,icon:a.icon,category:a.category,display_order:a.display_order,is_active:a.is_active}),n(!0)},M=async a=>{if(confirm("Are you sure? This will deactivate the skill if users have progress, or delete it permanently."))try{await i.delete(`/api/v1/admin/skills/${a}`),g()}catch(l){console.error("Failed to delete skill:",l),alert("Failed to delete skill")}},O=async()=>{N(!0);try{o?await i.put(`/api/v1/admin/skills/${o.id}`,r):await i.post("/api/v1/admin/skills/",r),n(!1),x(null),p(),g()}catch(a){console.error("Failed to save skill:",a),alert(a.response?.data?.detail||"Failed to save skill")}finally{N(!1)}},p=()=>{s({name:"",slug:"",description:"",icon:"ðŸ’»",category:"technical",display_order:1,is_active:!0})},R=a=>a==="technical"?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400":"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400",S=L.filter(a=>{if(y!=="all"&&a.category!==y)return!1;if(m){const l=m.toLowerCase();if(!a.name.toLowerCase().includes(l)&&!a.slug.toLowerCase().includes(l)&&!a.description.toLowerCase().includes(l))return!1}return!0});return A?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(u,{className:"w-8 h-8 animate-spin text-primary"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(C,{className:"w-7 h-7 text-primary"}),"Skills Management"]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Manage IT skills, view analytics, and configure XP system"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:w,className:"inline-flex items-center gap-2 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx(G,{className:"w-4 h-4"}),"Seed Defaults"]}),e.jsxs("button",{onClick:()=>{x(null),p(),n(!0)},className:"inline-flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors",children:[e.jsx(z,{className:"w-4 h-4"}),"New Skill"]})]})]}),c&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(B,{className:"w-5 h-5 text-blue-500"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Users with Skills"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c.total_users_with_skills.toLocaleString()})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Z,{className:"w-5 h-5 text-yellow-500"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total XP Awarded"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c.total_xp_awarded.toLocaleString()})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(K,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Level Ups"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c.total_level_ups.toLocaleString()})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(_,{className:"w-5 h-5 text-purple-500"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Most Popular"})]}),e.jsx("div",{className:"text-lg font-bold text-gray-900 dark:text-white truncate",children:c.most_popular_skill||"N/A"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(V,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search skills...",value:m,onChange:a=>F(a.target.value),className:"w-full pl-10 pr-4 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),e.jsxs("select",{value:y,onChange:a=>T(a.target.value),className:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50",children:[e.jsx("option",{value:"all",children:"All Categories"}),e.jsx("option",{value:"technical",children:"Technical"}),e.jsx("option",{value:"soft",children:"Soft Skills"})]}),e.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:h,onChange:a=>E(a.target.checked),className:"w-4 h-4 rounded border-gray-300 text-primary focus:ring-primary"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Show Inactive"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Skill"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Order"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:S.map(a=>e.jsxs("tr",{className:`hover:bg-gray-50 dark:hover:bg-gray-700/50 ${a.is_active?"":"opacity-60"}`,children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:a.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:a.name}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:a.slug})]})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${R(a.category)}`,children:a.category})}),e.jsx("td",{className:"px-4 py-4 text-gray-900 dark:text-white",children:a.display_order}),e.jsx("td",{className:"px-4 py-4",children:a.is_active?e.jsxs("span",{className:"flex items-center gap-1 text-green-600 dark:text-green-400",children:[e.jsx(H,{className:"w-4 h-4"}),"Active"]}):e.jsxs("span",{className:"flex items-center gap-1 text-gray-400",children:[e.jsx(J,{className:"w-4 h-4"}),"Inactive"]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>$(a.slug),className:"p-2 text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"View Analytics",children:e.jsx(_,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>X(a),className:"p-2 text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Edit",children:e.jsx(Q,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>M(a.id),className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Delete",children:e.jsx(W,{className:"w-4 h-4"})})]})})]},a.id))})]}),S.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(C,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No skills found"}),e.jsx("button",{onClick:w,className:"mt-4 text-primary hover:underline",children:"Seed default skills"})]})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl w-full max-w-lg",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:[d.skill_name," Analytics"]}),e.jsx("button",{onClick:()=>k(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:e.jsx(q,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-6 space-y-4",children:D?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(u,{className:"w-8 h-8 animate-spin text-primary"})}):e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Users"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d.total_users.toLocaleString()})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total XP"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d.total_xp_awarded.toLocaleString()})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Avg Level"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d.avg_level.toFixed(1)})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Max Level"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d.max_level})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Level 99 Users"}),e.jsx("div",{className:"text-2xl font-bold text-cyan-500",children:d.users_at_level_99})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"XP (Last 7 Days)"}),e.jsxs("div",{className:"text-2xl font-bold text-green-500",children:["+",d.xp_last_7_days.toLocaleString()]})]})]})})]})}),P&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl w-full max-w-lg max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:o?"Edit Skill":"Create New Skill"})}),e.jsxs("div",{className:"p-6 overflow-y-auto flex-1 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name *"}),e.jsx("input",{type:"text",value:r.name,onChange:a=>s({...r,name:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"e.g., Networking"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Slug *"}),e.jsx("input",{type:"text",value:r.slug,onChange:a=>s({...r,slug:a.target.value.toLowerCase().replace(/\s+/g,"-")}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"e.g., networking"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),e.jsx("textarea",{value:r.description,onChange:a=>s({...r,description:a.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Brief description of this skill"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Icon"}),e.jsx("div",{className:"flex flex-wrap gap-2 p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:ee.map(a=>e.jsx("button",{type:"button",onClick:()=>s({...r,icon:a}),className:`w-10 h-10 rounded-lg text-xl flex items-center justify-center transition-colors ${r.icon===a?"bg-primary text-white":"hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:a},a))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category"}),e.jsxs("select",{value:r.category,onChange:a=>s({...r,category:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"technical",children:"Technical"}),e.jsx("option",{value:"soft",children:"Soft Skills"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Display Order"}),e.jsx("input",{type:"number",min:"1",max:"99",value:r.display_order,onChange:a=>s({...r,display_order:parseInt(a.target.value)||1}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer pb-2",children:[e.jsx("input",{type:"checkbox",checked:r.is_active,onChange:a=>s({...r,is_active:a.target.checked}),className:"w-4 h-4 rounded border-gray-300 text-primary focus:ring-primary"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Active"})]})})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{n(!1),x(null),p()},className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:O,disabled:f||!r.name||!r.slug,className:"inline-flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors disabled:opacity-50",children:[f?e.jsx(u,{className:"w-4 h-4 animate-spin"}):e.jsx(Y,{className:"w-4 h-4"}),o?"Save Changes":"Create Skill"]})]})]})})]})};export{ne as default};
