import{u as p,r as d,j as e,L as u,m as i,T as c,Z as f,b as j,h as w}from"./index-CJMQzWwg.js";import{t as v}from"./typingGameApi-DQemIh-W.js";import{A as k}from"./arrow-left-BnHh0bgQ.js";import{M as o}from"./medal-Cp2zRaTz.js";const P=()=>{const{user:l}=p(),[r,x]=d.useState("wpm"),[t,m]=d.useState(null),[g,n]=d.useState(!0);d.useEffect(()=>{(async()=>{n(!0);try{const s=await v.getLeaderboard(r,100);m(s)}catch(s){console.error("Failed to fetch leaderboard:",s)}finally{n(!1)}})()},[r]);const h=a=>{switch(a){case 1:return e.jsx(w,{className:"w-6 h-6 text-yellow-500"});case 2:return e.jsx(o,{className:"w-6 h-6 text-gray-400"});case 3:return e.jsx(o,{className:"w-6 h-6 text-orange-600"});default:return null}},b=a=>{switch(a){case 1:return"bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 border-yellow-200 dark:border-yellow-800";case 2:return"bg-gradient-to-r from-gray-50 to-slate-50 dark:from-gray-800/50 dark:to-slate-800/50 border-gray-200 dark:border-gray-700";case 3:return"bg-gradient-to-r from-orange-50 to-amber-50 dark:from-orange-900/20 dark:to-amber-900/20 border-orange-200 dark:border-orange-800";default:return"bg-white dark:bg-gray-800 border-gray-100 dark:border-gray-700"}},y=[{id:"wpm",label:"Best WPM",icon:f},{id:"accuracy",label:"Accuracy",icon:j},{id:"pvp",label:"PVP Rating",icon:c}];return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[e.jsxs(u,{to:"/games/typing",className:"inline-flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white mb-6",children:[e.jsx(k,{className:"w-4 h-4"}),"Back to Typing Games"]}),e.jsxs(i.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-yellow-500 to-orange-600 rounded-2xl mb-4 shadow-lg",children:e.jsx(c,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Leaderboard"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Top typists ranked by performance"})]}),e.jsx("div",{className:"flex gap-2 mb-6 bg-white dark:bg-gray-800 rounded-xl p-1 shadow",children:y.map(a=>e.jsxs("button",{onClick:()=>x(a.id),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-medium transition-all ${r===a.id?"bg-blue-500 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsx(a.icon,{className:"w-4 h-4"}),a.label]},a.id))}),t?.user_rank&&e.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded-xl p-4 mb-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold",children:["#",t.user_rank]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:"Your Rank"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Keep playing to climb higher!"})]})]})})}),e.jsx(i.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden",children:g?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"Loading leaderboard..."}):t&&t.entries.length>0?e.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:t.entries.map((a,s)=>e.jsxs(i.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:s*.05},className:`flex items-center justify-between p-4 border-l-4 ${b(a.rank)} ${l?.id===a.user_id?"ring-2 ring-blue-500 ring-inset":""}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 flex justify-center",children:h(a.rank)||e.jsx("span",{className:"text-xl font-bold text-gray-400",children:a.rank})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-white flex items-center gap-2",children:[a.display_name||a.username,l?.id===a.user_id&&e.jsx("span",{className:"text-xs bg-blue-500 text-white px-2 py-0.5 rounded",children:"You"})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[a.games_played," games played"]})]})]}),e.jsxs("div",{className:"text-right",children:[r==="wpm"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:[a.best_wpm," WPM"]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Avg: ",a.avg_wpm.toFixed(1)," WPM"]})]}),r==="accuracy"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:[a.avg_accuracy.toFixed(1),"%"]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Best: ",a.best_wpm," WPM"]})]}),r==="pvp"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xl font-bold text-purple-600 dark:text-purple-400",children:[a.best_wpm," Rating"]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[a.games_played," matches"]})]})]})]},a.user_id))}):e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No entries yet. Be the first to make the leaderboard!"})})]})})};export{P as TypingLeaderboardPage,P as default};
