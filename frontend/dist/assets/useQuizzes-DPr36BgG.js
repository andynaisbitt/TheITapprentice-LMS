import{r as e,s as o}from"./index-9AhYSV_Z.js";const l="/api/v1/quizzes";function y(t={}){const[a,u]=e.useState([]),[d,r]=e.useState(!0),[i,n]=e.useState(null),c=e.useCallback(async()=>{r(!0),n(null);try{const s=new URLSearchParams;t.category&&s.append("category",t.category),t.difficulty&&s.append("difficulty",t.difficulty),t.skip&&s.append("skip",t.skip.toString()),t.limit&&s.append("limit",t.limit.toString());const f=await o.get(`${l}/?${s.toString()}`);u(f.data)}catch(s){n(s.response?.data?.detail||"Failed to load quizzes")}finally{r(!1)}},[t.category,t.difficulty,t.skip,t.limit]);return e.useEffect(()=>{c()},[c]),{quizzes:a,loading:d,error:i,refetch:c}}function z(t=6){const[a,u]=e.useState([]),[d,r]=e.useState(!0);return e.useEffect(()=>{(async()=>{try{const n=await o.get(`${l}/featured?limit=${t}`);u(Array.isArray(n.data)?n.data:[])}catch(n){console.error("Failed to load featured quizzes:",n),u([])}finally{r(!1)}})()},[t]),{quizzes:a,loading:d}}function m(t){const[a,u]=e.useState(null),[d,r]=e.useState(!0),[i,n]=e.useState(null);return e.useEffect(()=>{if(!t){r(!1);return}(async()=>{r(!0),n(null);try{const s=await o.get(`${l}/${t}`);u(s.data)}catch(s){n(s.response?.data?.detail||"Failed to load quiz")}finally{r(!1)}})()},[t]),{quiz:a,loading:d,error:i}}function g(t,a=10){const[u,d]=e.useState(null),[r,i]=e.useState(!0);return e.useEffect(()=>{if(!t){i(!1);return}(async()=>{try{const c=await o.get(`${l}/${t}/leaderboard?limit=${a}`);d(c.data)}catch(c){console.error("Failed to load leaderboard:",c)}finally{i(!1)}})()},[t,a]),{leaderboard:u,loading:r}}function S(t){const[a,u]=e.useState([]),[d,r]=e.useState(!0),i=e.useCallback(async()=>{r(!0);try{const n=t?`?quiz_id=${t}`:"",c=await o.get(`${l}/attempts/me${n}`);u(c.data)}catch(n){console.error("Failed to load attempts:",n)}finally{r(!1)}},[t]);return e.useEffect(()=>{i()},[i]),{attempts:a,loading:d,refetch:i}}function $(){const[t,a]=e.useState(null),[u,d]=e.useState(!0);return e.useEffect(()=>{(async()=>{try{const i=await o.get(`${l}/stats/me`);a(i.data)}catch(i){console.error("Failed to load quiz stats:",i)}finally{d(!1)}})()},[]),{stats:t,loading:u}}async function h(t){return(await o.post(`${l}/${t}/start`)).data}async function Q(t,a){return(await o.post(`${l}/${t}/submit`,a)).data}function w(t={}){const[a,u]=e.useState([]),[d,r]=e.useState(!0),[i,n]=e.useState(null),c=e.useCallback(async()=>{r(!0),n(null);try{const s=new URLSearchParams;t.status&&s.append("status",t.status),t.search&&s.append("search",t.search),t.skip&&s.append("skip",t.skip.toString()),t.limit&&s.append("limit",(t.limit||50).toString());const f=await o.get(`${l}/admin/all?${s.toString()}`);u(f.data)}catch(s){n(s.response?.data?.detail||"Failed to load quizzes")}finally{r(!1)}},[t.status,t.search,t.skip,t.limit]);return e.useEffect(()=>{c()},[c]),{quizzes:a,loading:d,error:i,refetch:c}}function b(t){const[a,u]=e.useState(null),[d,r]=e.useState(!0),[i,n]=e.useState(null),c=e.useCallback(async()=>{if(!t){r(!1);return}r(!0),n(null);try{const s=await o.get(`${l}/admin/${t}`);u(s.data)}catch(s){n(s.response?.data?.detail||"Failed to load quiz")}finally{r(!1)}},[t]);return e.useEffect(()=>{c()},[c]),{quiz:a,loading:d,error:i,refetch:c}}async function E(t){return(await o.post(`${l}/admin`,t)).data}async function L(t,a){return(await o.put(`${l}/admin/${t}`,a)).data}async function k(t){await o.delete(`${l}/admin/${t}`)}async function A(t,a){return(await o.post(`${l}/admin/${t}/questions`,a)).data}async function F(t,a){return(await o.put(`${l}/admin/questions/${t}`,a)).data}async function q(t){await o.delete(`${l}/admin/questions/${t}`)}export{y as a,$ as b,m as c,g as d,S as e,Q as f,w as g,L as h,k as i,b as j,E as k,q as l,F as m,A as n,h as s,z as u};
