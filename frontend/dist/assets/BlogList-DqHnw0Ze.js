import{l as A,r as t,j as a,n as L,X as B,L as E}from"./index-smch1bU1.js";import{b as N}from"./blog.api-Cjbtta1h.js";import{F as z}from"./filter-8mvCWH_v.js";const T=()=>{const[l,m]=A(),[c,h]=t.useState([]),[u,w]=t.useState([]),[b,y]=t.useState(!0),[i,p]=t.useState(""),[f,C]=t.useState(0),[o,d]=t.useState(1),j=12,r=l.get("category"),g=l.get("tag");t.useEffect(()=>{P()},[]),t.useEffect(()=>{S()},[r,g,i,o]);const P=async()=>{try{const e=await N.getCategories();w(e)}catch(e){console.error("Failed to load categories:",e)}},S=async()=>{y(!0);try{const e=await N.getPosts({page:o,page_size:j,category:r||void 0,tag:g||void 0,search:i||void 0}),s=Array.isArray(e)?e:e.posts||[],$=Array.isArray(e)?e.length:e.total||0;h(s),C($)}catch(e){console.error("Failed to load posts:",e),h([])}finally{y(!1)}},k=e=>{e?l.set("category",e):l.delete("category"),l.delete("tag"),m(l),d(1)},_=e=>{p(e.target.value),d(1)},v=()=>{m({}),p(""),d(1)},F=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),n=Math.ceil(f/j),x=r||g||i;return a.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-slate-900",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[a.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"Blog Posts"}),a.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:r?`Browsing: ${u.find(e=>e.slug===r)?.name||r}`:"Explore all articles"})]})}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[a.jsx("aside",{className:"lg:w-64 flex-shrink-0",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 sticky top-4",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Search Posts"}),a.jsxs("div",{className:"relative",children:[a.jsx(L,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),a.jsx("input",{type:"text",value:i,onChange:_,placeholder:"Search...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2",children:[a.jsx(z,{size:16}),"Categories"]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("button",{onClick:()=>k(null),className:`w-full text-left px-3 py-2 rounded-lg transition ${r?"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700":"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 font-medium"}`,children:"All Posts"}),u.map(e=>a.jsxs("button",{onClick:()=>k(e.slug),className:`w-full text-left px-3 py-2 rounded-lg transition flex items-center gap-2 ${r===e.slug?"font-medium":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,style:r===e.slug?{backgroundColor:`${e.color}20`,color:e.color}:void 0,children:[e.icon&&a.jsx("span",{children:e.icon}),a.jsx("span",{className:"flex-1",children:e.name}),e.post_count!==void 0&&a.jsxs("span",{className:"text-xs opacity-60",children:["(",e.post_count,")"]})]},e.id))]})]}),x&&a.jsxs("button",{onClick:v,className:"w-full px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg transition flex items-center justify-center gap-2",children:[a.jsx(B,{size:16}),"Clear Filters"]})]})}),a.jsxs("main",{className:"flex-1",children:[a.jsx("div",{className:"mb-6",children:a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:b?"Loading...":`Showing ${c.length} of ${f} posts`})}),b?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,s)=>a.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-lg h-80 animate-pulse"},s))}):c.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:["No posts found ",x&&"matching your filters"]}),x&&a.jsx("button",{onClick:v,className:"mt-4 px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition",children:"Clear Filters"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(e=>a.jsxs(E,{to:`/blog/${e.slug}`,className:"group bg-white dark:bg-gray-800 rounded-lg shadow-md hover:shadow-xl transition-all overflow-hidden",children:[e.featured_image&&a.jsx("div",{className:"aspect-video bg-gray-200 dark:bg-gray-700 overflow-hidden",children:a.jsx("img",{src:e.featured_image,alt:e.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),a.jsxs("div",{className:"p-6",children:[e.categories&&e.categories.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:e.categories.slice(0,2).map(s=>a.jsxs("span",{className:"px-2 py-1 text-xs font-medium rounded",style:{backgroundColor:`${s.color||"#3B82F6"}20`,color:s.color||"#3B82F6"},children:[s.icon," ",s.name]},s.id))}),a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition line-clamp-2",children:e.title}),e.excerpt&&a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4 line-clamp-3",children:e.excerpt}),a.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[a.jsx("span",{children:e.published_at?F(e.published_at):"Draft"}),e.read_time_minutes&&a.jsxs("span",{children:[e.read_time_minutes," min read"]})]})]})]},e.id))}),n>1&&a.jsxs("div",{className:"mt-8 flex justify-center gap-2",children:[a.jsx("button",{onClick:()=>d(e=>Math.max(1,e-1)),disabled:o===1,className:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-700 transition",children:"Previous"}),a.jsxs("span",{className:"px-4 py-2 text-gray-700 dark:text-gray-300",children:["Page ",o," of ",n]}),a.jsx("button",{onClick:()=>d(e=>Math.min(n,e+1)),disabled:o===n,className:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-700 transition",children:"Next"})]})]})]})})]})};export{T as BlogList,T as default};
