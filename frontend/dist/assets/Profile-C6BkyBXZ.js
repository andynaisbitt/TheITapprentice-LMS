import{o as we,u as fe,r as a,j as e,q as y,s as ke,m as Q,a as j,K as N,T as _,Z as P,C as M,e as U,L as B,b as _e,a4 as Pe,a5 as Se,Y as Ce,J as Ae,$ as ee}from"./index-CJMQzWwg.js";import{p as G}from"./progressApi-GOHLfRF2.js";import{t as se}from"./typingGameApi-DQemIh-W.js";import{a as Te}from"./tutorialApi-C1iZ0bZF.js";import{S as Fe,X as Le,a as De,A as X}from"./SkillsWidget-CGJOIYud.js";import{L as $}from"./loader-2-DzYHjI--.js";import{C as q}from"./clock-Bq85wjS9.js";import{P as te}from"./pen-square-x1DJ4uPK.js";import{S as Ee}from"./save-CqRpohLS.js";import{L as ae}from"./lock-DtqQW1yz.js";import{E as W}from"./eye-off-NQb64N79.js";import{E as I}from"./eye-CSrMaUQX.js";import{F as Me}from"./flame-n_pYayva.js";import{S as Ue}from"./star-DaWJHMcR.js";import"./sparkles-d34NXF22.js";import"./calendar-BZYAzec2.js";import"./index-DCQZMRM7.js";import"./skillsApi-BPkyblyL.js";const ss=()=>{const{username:R}=we(),{user:t,updateUserProfile:re}=fe(),O=!R||R===t?.username,[c,S]=a.useState("overview"),[V,C]=a.useState(!1),[v,w]=a.useState(!1),[z,g]=a.useState(""),[Y,h]=a.useState(""),[x,p]=a.useState({first_name:t?.first_name||"",last_name:t?.last_name||"",bio:t?.bio||""}),[K,A]=a.useState(!1),[l,b]=a.useState({current_password:"",new_password:"",confirm_password:""}),[r,T]=a.useState({current:!1,new:!1,confirm:!1}),[Z,le]=a.useState(null),[f,de]=a.useState([]),[k,ie]=a.useState([]),[d,ne]=a.useState(null),[n,ce]=a.useState(null),[F,xe]=a.useState([]),[oe,J]=a.useState(!0),[L,me]=a.useState("all");a.useEffect(()=>{t&&(p({first_name:t.first_name,last_name:t.last_name,bio:t.bio||""}),ge())},[t]);const ge=async()=>{if(t){J(!0);try{const[s,i,ye,je,Ne,ve]=await Promise.all([G.getMyXPProgress().catch(()=>null),G.getMyAchievements().catch(()=>[]),G.getMyActivities(50).catch(()=>({activities:[],total:0,has_more:!1})),se.getMyStats().catch(()=>null),se.getMyPVPStats().catch(()=>null),Te().catch(()=>[])]);le(s),de(i),ie(ye.activities),ne(je),ce(Ne),xe(ve)}catch(s){console.error("Failed to load learning data:",s)}finally{J(!1)}}};if(!t)return null;const he=async s=>{s.preventDefault(),h(""),g(""),w(!0);try{await ee.updateProfile(x),re(x),g("Profile updated successfully!"),C(!1),setTimeout(()=>g(""),3e3)}catch(i){h(i.response?.data?.detail||"Failed to update profile")}finally{w(!1)}},pe=async s=>{if(s.preventDefault(),h(""),g(""),l.new_password!==l.confirm_password){h("New passwords do not match");return}if(l.new_password.length<8){h("Password must be at least 8 characters");return}w(!0);try{await ee.changePassword({current_password:l.current_password,new_password:l.new_password}),g("Password changed successfully!"),A(!1),b({current_password:"",new_password:"",confirm_password:""}),setTimeout(()=>g(""),3e3)}catch(i){h(i.response?.data?.detail||"Failed to change password")}finally{w(!1)}},be=s=>{const i={admin:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400",author:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",tutor:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",mentor:"bg-teal-100 text-teal-700 dark:bg-teal-900/30 dark:text-teal-400",contributor:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400",supporter:"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400",apprentice:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"};return i[s]||i.apprentice},u=L==="all"?f:f.filter(s=>s.category===L),o=u.filter(s=>s.is_unlocked),D=u.filter(s=>!s.is_unlocked),m=F.filter(s=>s.status==="completed"),E=F.filter(s=>s.status==="in_progress"),ue=[{id:"overview",label:"Overview",icon:e.jsx(Ae,{className:"w-4 h-4"})},{id:"achievements",label:"Achievements",icon:e.jsx(_,{className:"w-4 h-4"})},{id:"tutorials",label:"Tutorials",icon:e.jsx(j,{className:"w-4 h-4"})},{id:"games",label:"Game Stats",icon:e.jsx(N,{className:"w-4 h-4"})},{id:"activity",label:"Activity",icon:e.jsx(U,{className:"w-4 h-4"})},...O?[{id:"settings",label:"Settings",icon:e.jsx(te,{className:"w-4 h-4"})}]:[]],H=s=>{switch(s){case"tutorial_complete":return e.jsx(y,{className:"w-4 h-4 text-green-500"});case"tutorial_start":return e.jsx(j,{className:"w-4 h-4 text-blue-500"});case"typing_game":return e.jsx(N,{className:"w-4 h-4 text-purple-500"});case"achievement_unlock":return e.jsx(_,{className:"w-4 h-4 text-yellow-500"});case"level_up":return e.jsx(Ue,{className:"w-4 h-4 text-orange-500"});case"streak_milestone":return e.jsx(Me,{className:"w-4 h-4 text-red-500"});default:return e.jsx(P,{className:"w-4 h-4 text-gray-500"})}};return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-slate-900 py-8 px-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[z&&e.jsxs("div",{className:"mb-6 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 flex items-center gap-2",children:[e.jsx(y,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),e.jsx("p",{className:"text-green-600 dark:text-green-400",children:z})]}),Y&&e.jsxs("div",{className:"mb-6 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 flex items-center gap-2",children:[e.jsx(ke,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),e.jsx("p",{className:"text-red-600 dark:text-red-400",children:Y})]}),e.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold text-2xl shadow-lg",children:[t.first_name[0],t.last_name[0]]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[t.first_name," ",t.last_name]}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["@",t.username]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${be(t.role)}`,children:t.role.charAt(0).toUpperCase()+t.role.slice(1)}),e.jsx(Fe,{streak:t.current_streak||0,compact:!0})]})]})]}),e.jsx("div",{className:"flex-1",children:Z?e.jsx(Le,{progress:Z,showDetails:!0}):e.jsx("div",{className:"animate-pulse bg-gray-200 dark:bg-gray-700 rounded-lg h-16"})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:m.length}),e.jsx("div",{className:"text-xs text-gray-500",children:"Tutorials"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:d?.total_games_completed||0}),e.jsx("div",{className:"text-xs text-gray-500",children:"Games"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:f.filter(s=>s.is_unlocked).length}),e.jsx("div",{className:"text-xs text-gray-500",children:"Achievements"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:d?.best_wpm?.toFixed(0)||"-"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Best WPM"})]})]})]}),t.bio&&e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400 border-t border-gray-100 dark:border-gray-700 pt-4",children:t.bio})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg mb-6 overflow-hidden",children:[e.jsx("div",{className:"flex overflow-x-auto border-b border-gray-100 dark:border-gray-700",children:ue.map(s=>e.jsxs("button",{onClick:()=>S(s.id),className:`flex items-center gap-2 px-6 py-4 text-sm font-medium whitespace-nowrap transition ${c===s.id?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 bg-blue-50/50 dark:bg-blue-900/10":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-slate-700/50"}`,children:[s.icon,s.label]},s.id))}),e.jsx("div",{className:"p-6",children:oe&&c!=="settings"?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx($,{className:"w-8 h-8 animate-spin text-blue-600"})}):e.jsxs(e.Fragment,{children:[c==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-4 text-white",children:[e.jsx(j,{className:"w-6 h-6 mb-2 opacity-80"}),e.jsx("div",{className:"text-3xl font-bold",children:m.length}),e.jsx("div",{className:"text-sm opacity-80",children:"Tutorials Completed"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-4 text-white",children:[e.jsx(N,{className:"w-6 h-6 mb-2 opacity-80"}),e.jsx("div",{className:"text-3xl font-bold",children:d?.total_games_completed||0}),e.jsx("div",{className:"text-sm opacity-80",children:"Games Played"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-500 to-orange-500 rounded-xl p-4 text-white",children:[e.jsx(_,{className:"w-6 h-6 mb-2 opacity-80"}),e.jsx("div",{className:"text-3xl font-bold",children:f.filter(s=>s.is_unlocked).length}),e.jsx("div",{className:"text-sm opacity-80",children:"Achievements"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-teal-500 rounded-xl p-4 text-white",children:[e.jsx(P,{className:"w-6 h-6 mb-2 opacity-80"}),e.jsx("div",{className:"text-3xl font-bold",children:t.total_points||0}),e.jsx("div",{className:"text-sm opacity-80",children:"Total XP"})]})]}),e.jsx(De,{maxSkills:6,showLeaderboardLink:!0}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(_,{className:"w-5 h-5 text-yellow-500"}),"Recent Achievements"]}),e.jsxs("button",{onClick:()=>S("achievements"),className:"text-blue-600 dark:text-blue-400 text-sm flex items-center gap-1 hover:underline",children:["View All ",e.jsx(M,{className:"w-4 h-4"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 md:grid-cols-8 gap-3",children:[o.slice(0,8).map(s=>e.jsx(X,{achievement:s,size:"md",showProgress:!1},s.achievement_id)),o.length===0&&e.jsx("p",{className:"col-span-full text-gray-500 dark:text-gray-400 text-center py-4",children:"No achievements unlocked yet. Start learning to earn achievements!"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(U,{className:"w-5 h-5 text-green-500"}),"Recent Activity"]}),e.jsxs("button",{onClick:()=>S("activity"),className:"text-blue-600 dark:text-blue-400 text-sm flex items-center gap-1 hover:underline",children:["View All ",e.jsx(M,{className:"w-4 h-4"})]})]}),e.jsxs("div",{className:"space-y-3",children:[k.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-slate-700/50 rounded-lg",children:[H(s.activity_type),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:s.title}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(s.created_at).toLocaleDateString()})]}),s.xp_earned>0&&e.jsxs("span",{className:"text-sm text-green-600 dark:text-green-400 font-medium",children:["+",s.xp_earned," XP"]})]},s.id)),k.length===0&&e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"No recent activity"})]})]})]}),c==="achievements"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Filter:"}),["all","tutorials","typing","streak","special"].map(s=>e.jsx("button",{onClick:()=>me(s),className:`px-3 py-1 rounded-full text-sm transition ${L===s?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:s.charAt(0).toUpperCase()+s.slice(1)},s))]}),e.jsxs("div",{className:"flex items-center gap-6 p-4 bg-gray-50 dark:bg-slate-700/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:o.length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Unlocked"})]}),e.jsx("div",{className:"h-8 w-px bg-gray-300 dark:bg-gray-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:u.length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total"})]}),e.jsx("div",{className:"h-8 w-px bg-gray-300 dark:bg-gray-600"}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[u.length>0?Math.round(o.length/u.length*100):0,"%"]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Complete"})]})]}),o.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-3",children:["Unlocked (",o.length,")"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:o.map(s=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[e.jsx(X,{achievement:s,size:"md",showProgress:!1}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm truncate",children:s.name}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:s.description})]})]},s.achievement_id))})]}),D.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-3",children:["In Progress (",D.length,")"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:D.map(s=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 border border-gray-200 dark:border-gray-600 rounded-lg opacity-75",children:[e.jsx(X,{achievement:s,size:"md",showProgress:!0}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-700 dark:text-gray-300 text-sm truncate",children:s.name}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:s.description}),e.jsx("div",{className:"mt-1 h-1 bg-gray-200 dark:bg-gray-600 rounded-full",children:e.jsx("div",{className:"h-1 bg-blue-500 rounded-full",style:{width:`${s.progress_percent}%`}})})]})]},s.achievement_id))})]})]}),c==="tutorials"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-xl p-4 text-center",children:[e.jsx(y,{className:"w-8 h-8 text-green-500 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:m.length}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Completed"})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-4 text-center",children:[e.jsx(q,{className:"w-8 h-8 text-blue-500 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:E.length}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"In Progress"})]}),e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-xl p-4 text-center",children:[e.jsx(P,{className:"w-8 h-8 text-purple-500 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:m.length*100}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"XP Earned"})]})]}),E.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx(q,{className:"w-5 h-5 text-blue-500"}),"In Progress"]}),e.jsx("div",{className:"space-y-3",children:E.map(s=>e.jsxs(B,{to:`/tutorials/${s.tutorial_id}`,className:"flex items-center gap-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/30 transition",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:["Tutorial #",s.tutorial_id]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.completed_step_ids?.length||0," steps done • ",s.time_spent_minutes," mins spent"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"w-24",children:[e.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-600 rounded-full",children:e.jsx("div",{className:"h-2 bg-blue-500 rounded-full",style:{width:`${s.progress_percentage||0}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1 text-right",children:[s.progress_percentage||0,"%"]})]}),e.jsx(M,{className:"w-5 h-5 text-gray-400"})]})]},s.id))})]}),m.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx(y,{className:"w-5 h-5 text-green-500"}),"Completed (",m.length,")"]}),e.jsx("div",{className:"space-y-3",children:m.map(s=>e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsx(y,{className:"w-6 h-6 text-green-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:["Tutorial #",s.tutorial_id]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Completed on ",new Date(s.completed_at||"").toLocaleDateString(),s.time_spent_minutes&&` • ${s.time_spent_minutes} mins`]})]}),e.jsx("span",{className:"text-green-600 dark:text-green-400 font-medium",children:"+100 XP"})]},s.id))})]}),F.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(j,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No tutorials yet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Start learning to track your progress here"}),e.jsxs(B,{to:"/tutorials",className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:[e.jsx(j,{className:"w-4 h-4"}),"Browse Tutorials"]})]})]}),c==="games"&&e.jsx("div",{className:"space-y-6",children:d?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-4 text-white",children:[e.jsx(P,{className:"w-6 h-6 mb-2 opacity-80"}),e.jsx("div",{className:"text-3xl font-bold",children:d.best_wpm?.toFixed(0)||"-"}),e.jsx("div",{className:"text-sm opacity-80",children:"Best WPM"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-teal-500 rounded-xl p-4 text-white",children:[e.jsx(_e,{className:"w-6 h-6 mb-2 opacity-80"}),e.jsxs("div",{className:"text-3xl font-bold",children:[d.avg_accuracy?.toFixed(1)||"-","%"]}),e.jsx("div",{className:"text-sm opacity-80",children:"Avg Accuracy"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-4 text-white",children:[e.jsx(Pe,{className:"w-6 h-6 mb-2 opacity-80"}),e.jsx("div",{className:"text-3xl font-bold",children:d.total_games_completed}),e.jsx("div",{className:"text-sm opacity-80",children:"Games Played"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-red-500 rounded-xl p-4 text-white",children:[e.jsx(q,{className:"w-6 h-6 mb-2 opacity-80"}),e.jsx("div",{className:"text-3xl font-bold",children:d.avg_wpm?.toFixed(0)||"-"}),e.jsx("div",{className:"text-sm opacity-80",children:"Avg WPM"})]})]}),n&&(n.wins>0||n.losses>0)&&e.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700/50 rounded-xl p-6",children:[e.jsxs("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(Se,{className:"w-5 h-5 text-yellow-500"}),"PVP Statistics"]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:n.wins}),e.jsx("div",{className:"text-sm text-gray-500",children:"Wins"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:n.losses}),e.jsx("div",{className:"text-sm text-gray-500",children:"Losses"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[n.total_matches>0?(n.wins/n.total_matches*100).toFixed(1):0,"%"]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Win Rate"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:n.total_matches}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total Matches"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700/50 rounded-xl p-6",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4",children:"Detailed Statistics"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Best Accuracy"}),e.jsxs("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[d.best_accuracy?.toFixed(1)||0,"%"]})]}),e.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Total Words"}),e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:d.total_words_typed?.toLocaleString()||0})]}),e.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Time Played"}),e.jsxs("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[Math.round((d.total_time_seconds||0)/60)," mins"]})]})]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(N,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No game stats yet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Play the typing game to see your stats here"}),e.jsxs(B,{to:"/games/typing",className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition",children:[e.jsx(N,{className:"w-4 h-4"}),"Play Typing Game"]})]})}),c==="activity"&&e.jsx("div",{className:"space-y-4",children:k.length>0?k.map((s,i)=>e.jsxs(Q.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:i*.05},className:"flex items-start gap-4 p-4 bg-gray-50 dark:bg-slate-700/50 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-white dark:bg-slate-800 flex items-center justify-center",children:H(s.activity_type)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:s.title}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(s.created_at).toLocaleString()})]}),s.xp_earned>0&&e.jsxs("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 text-sm font-medium rounded",children:["+",s.xp_earned," XP"]})]},s.id)):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(U,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No activity yet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Your learning activity will appear here"})]})}),c==="settings"&&O&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Profile Information"}),!V&&e.jsxs("button",{onClick:()=>C(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition",children:[e.jsx(te,{className:"w-4 h-4"}),"Edit"]})]}),V?e.jsxs("form",{onSubmit:he,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"First Name"}),e.jsx("input",{type:"text",value:x.first_name,onChange:s=>p({...x,first_name:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-gray-100",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Last Name"}),e.jsx("input",{type:"text",value:x.last_name,onChange:s=>p({...x,last_name:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-gray-100",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bio (optional)"}),e.jsx("textarea",{value:x.bio,onChange:s=>p({...x,bio:s.target.value}),rows:4,className:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-gray-100",placeholder:"Tell us about yourself..."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{type:"submit",disabled:v,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition disabled:opacity-50",children:[v?e.jsx($,{className:"w-4 h-4 animate-spin"}):e.jsx(Ee,{className:"w-4 h-4"}),"Save Changes"]}),e.jsx("button",{type:"button",onClick:()=>{C(!1),p({first_name:t.first_name,last_name:t.last_name,bio:t.bio||""})},className:"px-6 py-2 border border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700 transition",children:"Cancel"})]})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-slate-700/50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"First Name"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:t.first_name})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-slate-700/50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Name"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:t.last_name})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-slate-700/50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Email"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"w-4 h-4 text-gray-400"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:t.email})]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-slate-700/50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Username"}),e.jsxs("p",{className:"text-gray-900 dark:text-white font-medium",children:["@",t.username]})]}),t.bio&&e.jsxs("div",{className:"md:col-span-2 p-4 bg-gray-50 dark:bg-slate-700/50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Bio"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:t.bio})]})]})]}),!t.google_id&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Password"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Update your password to keep your account secure"})]}),!K&&e.jsxs("button",{onClick:()=>A(!0),className:"flex items-center gap-2 px-4 py-2 border border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700 transition",children:[e.jsx(ae,{className:"w-4 h-4"}),"Change"]})]}),K&&e.jsxs("form",{onSubmit:pe,className:"space-y-4 bg-gray-50 dark:bg-slate-700/50 p-4 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:r.current?"text":"password",value:l.current_password,onChange:s=>b({...l,current_password:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-gray-100 pr-10",required:!0}),e.jsx("button",{type:"button",onClick:()=>T({...r,current:!r.current}),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:r.current?e.jsx(W,{className:"w-4 h-4"}):e.jsx(I,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:r.new?"text":"password",value:l.new_password,onChange:s=>b({...l,new_password:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-gray-100 pr-10",required:!0,minLength:8}),e.jsx("button",{type:"button",onClick:()=>T({...r,new:!r.new}),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:r.new?e.jsx(W,{className:"w-4 h-4"}):e.jsx(I,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:r.confirm?"text":"password",value:l.confirm_password,onChange:s=>b({...l,confirm_password:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-gray-100 pr-10",required:!0}),e.jsx("button",{type:"button",onClick:()=>T({...r,confirm:!r.confirm}),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:r.confirm?e.jsx(W,{className:"w-4 h-4"}):e.jsx(I,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{type:"submit",disabled:v,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition disabled:opacity-50",children:[v?e.jsx($,{className:"w-4 h-4 animate-spin"}):e.jsx(ae,{className:"w-4 h-4"}),"Update Password"]}),e.jsx("button",{type:"button",onClick:()=>{A(!1),b({current_password:"",new_password:"",confirm_password:""})},className:"px-6 py-2 border border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700 transition",children:"Cancel"})]})]})]}),t.google_id&&e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsx("p",{className:"text-blue-700 dark:text-blue-400 text-sm",children:"You're signed in with Google. Password management is handled through your Google account."})})]})]})})]})]})})};export{ss as Profile,ss as default};
