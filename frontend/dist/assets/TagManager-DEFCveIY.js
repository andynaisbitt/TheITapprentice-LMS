import{I as F,y as P,R as H,j as e,A as I,m as k,X as V,z as $,r as s}from"./index-CH_EXTVi.js";import{b as R}from"./blog.api-BZdToo1U.js";import{a as w}from"./admin-blog.api-CnIkxrlf.js";import{T as G}from"./trash-2-CEmDLHiu.js";const O={danger:{icon:G,iconBg:"bg-red-100 dark:bg-red-900/30",iconColor:"text-red-600 dark:text-red-400",confirmBg:"bg-red-600 hover:bg-red-700"},warning:{icon:P,iconBg:"bg-yellow-100 dark:bg-yellow-900/30",iconColor:"text-yellow-600 dark:text-yellow-400",confirmBg:"bg-yellow-600 hover:bg-yellow-700"},info:{icon:F,iconBg:"bg-blue-100 dark:bg-blue-900/30",iconColor:"text-blue-600 dark:text-blue-400",confirmBg:"bg-blue-600 hover:bg-blue-700"}},_=({isOpen:l,title:i,message:b,confirmLabel:y="Confirm",cancelLabel:x="Cancel",variant:m="danger",onConfirm:c,onCancel:n,loading:a=!1})=>{const o=O[m],h=o.icon;return H.useEffect(()=>{const d=p=>{p.key==="Escape"&&l&&!a&&n()};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[l,a,n]),e.jsx(I,{children:l&&e.jsxs(k.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx(k.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:a?void 0:n}),e.jsxs(k.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",duration:.3},className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-md w-full overflow-hidden",children:[e.jsx("button",{onClick:n,disabled:a,className:"absolute top-4 right-4 p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg transition disabled:opacity-50",children:e.jsx(V,{className:"w-5 h-5"})}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:`w-12 h-12 ${o.iconBg} rounded-full flex items-center justify-center mb-4`,children:e.jsx(h,{className:`w-6 h-6 ${o.iconColor}`})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:i}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:b}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:n,disabled:a,className:"flex-1 px-4 py-2.5 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 font-medium transition disabled:opacity-50",children:x}),e.jsx("button",{onClick:c,disabled:a,className:`flex-1 px-4 py-2.5 ${o.confirmBg} text-white rounded-lg font-medium transition disabled:opacity-50 flex items-center justify-center gap-2`,children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Processing..."]}):y})]})]})]})]})})},X=()=>{const{toast:l}=$(),[i,b]=s.useState([]),[y,x]=s.useState(!0),[m,c]=s.useState(""),[n,a]=s.useState(!1),[o,h]=s.useState(null),[d,p]=s.useState(""),[u,f]=s.useState({show:!1}),[L,N]=s.useState(!1),[r,g]=s.useState({name:"",color:"#6B7280"});s.useEffect(()=>{j()},[]);const j=async()=>{try{x(!0),c("");const t=await R.getTags();b(t)}catch(t){c(t.response?.data?.detail||"Failed to load tags")}finally{x(!1)}},C=()=>{h(null),g({name:"",color:"#6B7280"}),a(!0)},M=t=>{h(t),g({name:t.name,color:t.color||"#6B7280"}),a(!0)},E=async t=>{t.preventDefault(),c("");try{o?(await w.updateTag(o.id,r),l.success("Tag updated successfully")):(await w.createTag(r),l.success("Tag created successfully")),a(!1),j()}catch(v){const B=v.response?.data?.detail||"Failed to save tag";c(B),l.error(B)}},S=t=>{f({show:!0,tag:t})},D=async()=>{if(u.tag){N(!0);try{await w.deleteTag(u.tag.id),l.success("Tag deleted successfully"),j()}catch(t){const v=t.response?.data?.detail||"Failed to delete tag";l.error(v)}finally{N(!1),f({show:!1})}}},T=i.filter(t=>t.name.toLowerCase().includes(d.toLowerCase())),z=i.filter(t=>(t.post_count||0)>0).length,A=i.filter(t=>(t.post_count||0)===0).length,W=[{name:"Gray",value:"#6B7280"},{name:"Blue",value:"#3B82F6"},{name:"Purple",value:"#8B5CF6"},{name:"Green",value:"#10B981"},{name:"Red",value:"#EF4444"},{name:"Orange",value:"#F59E0B"},{name:"Cyan",value:"#06B6D4"},{name:"Pink",value:"#EC4899"}];return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-slate-900 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Tag Manager"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Organize your blog posts with tags"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Tags"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:i.length})]}),e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx("svg",{className:"w-8 h-8 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"With Posts"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:z})]}),e.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-lg",children:e.jsx("svg",{className:"w-8 h-8 text-green-600 dark:text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Empty Tags"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:A})]}),e.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:e.jsx("svg",{className:"w-8 h-8 text-orange-600 dark:text-orange-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})})]})})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"text",value:d,onChange:t=>p(t.target.value),placeholder:"Search tags...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-slate-700 text-gray-900 dark:text-gray-100"})]})}),e.jsxs("button",{onClick:C,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Tag"]})]})}),m&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 text-red-800 dark:text-red-200 px-4 py-3 rounded-lg mb-6",children:m}),y?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Loading tags..."})]}):T.length===0?e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-12 text-center",children:[e.jsx("svg",{className:"mx-auto w-16 h-16 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),e.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900 dark:text-gray-100",children:"No tags found"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:d?"Try a different search term":"Get started by creating your first tag"}),!d&&e.jsx("button",{onClick:C,className:"mt-6 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition",children:"Create Tag"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:T.map(t=>e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow hover:shadow-lg transition p-4 border-l-4",style:{borderLeftColor:t.color||"#6B7280"},children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-bold",style:{backgroundColor:t.color||"#6B7280"},children:t.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:t.name}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[t.post_count||0," posts"]})]})]})}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200 dark:border-slate-700",children:[e.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-gray-200 dark:border-slate-600",style:{backgroundColor:t.color||"#6B7280"},title:t.color}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>M(t),className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition",title:"Edit",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>S(t),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition",title:"Delete",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},t.id))}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-6",children:o?"Edit Tag":"Create Tag"}),e.jsxs("form",{onSubmit:E,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tag Name *"}),e.jsx("input",{type:"text",value:r.name,onChange:t=>g({...r,name:t.target.value}),required:!0,className:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-slate-700 text-gray-900 dark:text-gray-100",placeholder:"e.g., JavaScript"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color"}),e.jsx("div",{className:"flex gap-2 mb-3 flex-wrap",children:W.map(t=>e.jsx("button",{type:"button",onClick:()=>g({...r,color:t.value}),className:`w-8 h-8 rounded-lg border-2 transition ${r.color===t.value?"border-gray-900 dark:border-gray-100 scale-110 ring-2 ring-offset-2 ring-blue-500":"border-gray-300 dark:border-slate-600 hover:scale-105"}`,style:{backgroundColor:t.value},title:t.name},t.value))}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"color",value:r.color,onChange:t=>g({...r,color:t.target.value}),className:"w-12 h-10 rounded-lg border border-gray-300 dark:border-slate-600 cursor-pointer"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 font-mono",children:r.color})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Preview"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium text-white",style:{backgroundColor:r.color},children:r.name||"Tag Name"})})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-slate-700",children:[e.jsx("button",{type:"button",onClick:()=>a(!1),className:"px-6 py-2 border border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700 transition",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition",children:o?"Save Changes":"Create Tag"})]})]})]})})}),e.jsx(_,{isOpen:u.show,title:"Delete Tag?",message:`Are you sure you want to delete "${u.tag?.name}"? This action cannot be undone.`,confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",onConfirm:D,onCancel:()=>f({show:!1}),loading:L})]})})};export{X as TagManager,X as default};
