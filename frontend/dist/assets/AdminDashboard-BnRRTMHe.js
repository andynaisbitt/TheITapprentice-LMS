import{e as P,j as e,J as h,a as p,K as C,T as U,p as S,M as E,N as u,y as j,L as g,C as M,q as G,x as R,W,O as F,f as V,u as K,r as x,w as q,U as f,G as z}from"./index-9AhYSV_Z.js";import{a as B}from"./admin-stats.api-4dCXc__k.js";import{T as A}from"./trending-down-pSk1OlXL.js";import{M as H}from"./minus-B9xMXCLc.js";import{P as J}from"./pen-square-Dng3Ay1m.js";import{L as O}from"./loader-2-CpwtcwX3.js";import{D as Q}from"./database-DuAaKQP6.js";import{S as $}from"./server-CBx4wAhq.js";import{E as N}from"./eye-CaWTONik.js";import{A as X}from"./arrow-right-CM5_LDRA.js";const Y={blue:{bg:"bg-blue-500",light:"bg-blue-50 dark:bg-blue-900/20",text:"text-blue-600 dark:text-blue-400",border:"border-blue-500"},green:{bg:"bg-green-500",light:"bg-green-50 dark:bg-green-900/20",text:"text-green-600 dark:text-green-400",border:"border-green-500"},purple:{bg:"bg-purple-500",light:"bg-purple-50 dark:bg-purple-900/20",text:"text-purple-600 dark:text-purple-400",border:"border-purple-500"},orange:{bg:"bg-orange-500",light:"bg-orange-50 dark:bg-orange-900/20",text:"text-orange-600 dark:text-orange-400",border:"border-orange-500"},pink:{bg:"bg-pink-500",light:"bg-pink-50 dark:bg-pink-900/20",text:"text-pink-600 dark:text-pink-400",border:"border-pink-500"},cyan:{bg:"bg-cyan-500",light:"bg-cyan-50 dark:bg-cyan-900/20",text:"text-cyan-600 dark:text-cyan-400",border:"border-cyan-500"}},b=({title:r,value:i,icon:t,trend:s,color:a="blue",onClick:c})=>{const o=Y[a],d=s?s.value>0?P:s.value<0?A:H:null,m=s?s.value>0?"text-green-600 dark:text-green-400":s.value<0?"text-red-600 dark:text-red-400":"text-gray-500":"";return e.jsx("div",{onClick:c,className:`
        bg-white dark:bg-gray-800 rounded-xl shadow-sm
        border-l-4 ${o.border}
        p-5 transition-all duration-200
        ${c?"cursor-pointer hover:shadow-md hover:scale-[1.02]":""}
      `,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:r}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:typeof i=="number"?i.toLocaleString():i}),s&&e.jsxs("div",{className:`flex items-center gap-1 mt-2 text-sm ${m}`,children:[d&&e.jsx(d,{className:"w-4 h-4"}),e.jsxs("span",{className:"font-medium",children:[s.value>0?"+":"",s.value,"%"]}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:s.label})]})]}),e.jsx("div",{className:`p-3 rounded-xl ${o.light}`,children:e.jsx(t,{className:`w-6 h-6 ${o.text}`})})]})})},w={post_published:{icon:u,color:"bg-blue-500"},post_edited:{icon:J,color:"bg-blue-400"},user_registered:{icon:E,color:"bg-green-500"},user_verified:{icon:S,color:"bg-green-600"},tutorial_completed:{icon:p,color:"bg-purple-500"},achievement_unlocked:{icon:U,color:"bg-yellow-500"},game_played:{icon:C,color:"bg-pink-500"},login:{icon:h,color:"bg-gray-500"},course_enrolled:{icon:p,color:"bg-indigo-500"},unknown:{icon:h,color:"bg-gray-400"}},Z=r=>{const i=new Date(r),s=Math.floor((new Date().getTime()-i.getTime())/1e3);return s<60?"Just now":s<3600?`${Math.floor(s/60)}m ago`:s<86400?`${Math.floor(s/3600)}h ago`:s<604800?`${Math.floor(s/86400)}d ago`:i.toLocaleDateString("en-US",{month:"short",day:"numeric"})},ee=({activities:r,loading:i=!1,maxItems:t=8})=>{const s=r.slice(0,t);return i?e.jsx("div",{className:"space-y-4",children:[...Array(4)].map((a,c)=>e.jsxs("div",{className:"flex items-start gap-3 animate-pulse",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]})]},c))}):s.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(h,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No recent activity"})]}):e.jsx("div",{className:"space-y-4",children:s.map((a,c)=>{const o=w[a.type]||w.unknown,d=o.icon;return e.jsxs("div",{className:`
              flex items-start gap-3 p-3 rounded-lg
              hover:bg-gray-50 dark:hover:bg-gray-800/50
              transition-colors duration-200
              ${c!==s.length-1?"border-b border-gray-100 dark:border-gray-800":""}
            `,children:[e.jsx("div",{className:`p-2 rounded-full ${o.color} flex-shrink-0`,children:e.jsx(d,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:a.title}),a.description&&e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:a.description}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:Z(a.timestamp)})]}),a.user&&e.jsx("div",{className:"flex-shrink-0",children:a.user.avatar?e.jsx("img",{src:a.user.avatar,alt:a.user.name,className:"w-8 h-8 rounded-full"}):e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-primary to-primary-dark flex items-center justify-center text-white text-xs font-semibold",children:a.user.name[0].toUpperCase()})})]},a.id)})})},v={draft_posts:{icon:u,bgColor:"bg-yellow-50 dark:bg-yellow-900/20",iconColor:"text-yellow-600 dark:text-yellow-400"},pending_users:{icon:h,bgColor:"bg-blue-50 dark:bg-blue-900/20",iconColor:"text-blue-600 dark:text-blue-400"},unverified_users:{icon:h,bgColor:"bg-blue-50 dark:bg-blue-900/20",iconColor:"text-blue-600 dark:text-blue-400"},tutorial_dropoff:{icon:A,bgColor:"bg-orange-50 dark:bg-orange-900/20",iconColor:"text-orange-600 dark:text-orange-400"},system_warning:{icon:j,bgColor:"bg-red-50 dark:bg-red-900/20",iconColor:"text-red-600 dark:text-red-400"},unknown:{icon:j,bgColor:"bg-gray-50 dark:bg-gray-900/20",iconColor:"text-gray-600 dark:text-gray-400"}},se={low:"border-gray-200 dark:border-gray-700",medium:"border-yellow-300 dark:border-yellow-700",high:"border-red-300 dark:border-red-700"},te=({items:r,loading:i=!1})=>i?e.jsx("div",{className:"space-y-3",children:[...Array(3)].map((t,s)=>e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg animate-pulse",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-lg"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"}),e.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-3/4"})]})]},s))}):r.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium",children:"All caught up!"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:"No items need your attention right now"})]}):e.jsx("div",{className:"space-y-3",children:r.map(t=>{const s=v[t.type]||v.unknown,a=s.icon;return e.jsxs(g,{to:t.link,className:`
              flex items-center gap-4 p-4
              bg-white dark:bg-gray-800
              border ${se[t.priority]}
              rounded-lg
              hover:shadow-md transition-all duration-200
              group
            `,children:[e.jsx("div",{className:`p-2.5 rounded-lg ${s.bgColor}`,children:e.jsx(a,{className:`w-5 h-5 ${s.iconColor}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:t.title}),t.count!==void 0&&t.count>0&&e.jsx("span",{className:"px-2 py-0.5 text-xs font-bold rounded-full bg-primary/10 text-primary",children:t.count})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:t.description})]}),e.jsx(M,{className:"w-5 h-5 text-gray-400 group-hover:text-primary transition-colors"})]},t.id)})}),_={healthy:{icon:S,color:"text-green-500",bgColor:"bg-green-500",label:"Healthy"},warning:{icon:R,color:"text-yellow-500",bgColor:"bg-yellow-500",label:"Warning"},error:{icon:G,color:"text-red-500",bgColor:"bg-red-500",label:"Error"},loading:{icon:O,color:"text-gray-400",bgColor:"bg-gray-400",label:"Checking..."}},re={api:$,database:Q,plugins:F,network:W},ae=({items:r,loading:i=!1})=>{if(i)return e.jsx("div",{className:"space-y-3",children:[...Array(3)].map((o,d)=>e.jsxs("div",{className:"flex items-center gap-3 animate-pulse",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-300 dark:bg-gray-600 rounded-full"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-20"}),e.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-16 ml-auto"})]},d))});const t=r.some(o=>o.status==="error"),s=r.some(o=>o.status==="warning"),c=_[t?"error":s?"warning":"healthy"];return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 pb-3 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${c.bgColor} animate-pulse`}),e.jsxs("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:["System ",c.label]})]}),e.jsx("div",{className:"space-y-2",children:r.map(o=>{const d=_[o.status],m=d.icon,y=re[o.id.toLowerCase()]||$;return e.jsxs("div",{className:"flex items-center gap-3 py-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${d.bgColor}`}),e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx(y,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:o.name})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(m,{className:`w-4 h-4 ${d.color} ${o.status==="loading"?"animate-spin":""}`}),e.jsx("span",{className:`text-xs font-medium ${d.color}`,children:o.message||d.label})]})]},o.id)})})]})},oe=()=>{const r=new Date().getHours();return r<12?"Good morning":r<18?"Good afternoon":"Good evening"},le=()=>new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),pe=()=>{const r=V(),{user:i}=K(),[t,s]=x.useState({total_posts:0,total_categories:0,total_views:0,total_tags:0}),[a,c]=x.useState(!0),[o,d]=x.useState(null),[m,y]=x.useState([]),[T,D]=x.useState([]),[L,I]=x.useState([{id:"api",name:"API Server",status:"healthy"},{id:"database",name:"Database",status:"healthy"},{id:"plugins",name:"Plugins",status:"healthy",message:"Loading..."}]);x.useEffect(()=>{k()},[]);const k=async()=>{try{c(!0),d(null);const n=await B.getDashboard();s({total_posts:n.stats.total_posts,total_categories:n.stats.total_categories,total_views:n.stats.total_views,total_tags:n.stats.total_tags,draft_posts:n.stats.draft_posts,total_users:n.stats.total_users,total_tutorials:n.stats.total_tutorials,total_courses:n.stats.total_courses,active_users:n.stats.active_users,new_users_this_month:n.stats.new_users_this_month}),y(n.recent_activities.map(l=>({id:l.id,type:l.type,title:l.title,description:l.description,timestamp:l.timestamp,user:l.user_name?{name:l.user_name}:void 0}))),D(n.attention_items.map(l=>({id:l.id,type:l.type,title:l.title,count:l.count,description:l.description,link:l.link,priority:l.priority}))),I(n.system_status.map(l=>({id:l.id,name:l.name,status:l.status,message:l.message})))}catch(n){console.error("Error loading dashboard data:",n),d(n.message||"Failed to load dashboard data")}finally{c(!1)}};return o?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-red-600 dark:text-red-400",children:o}),e.jsx("button",{onClick:k,className:"mt-2 text-sm text-red-700 dark:text-red-300 hover:underline",children:"Try Again"})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[oe(),", ",i?.first_name||i?.username||"Admin","!"]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:le()})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs(g,{to:"/admin/blog",className:"inline-flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors font-medium",children:[e.jsx(q,{className:"w-4 h-4"}),"New Post"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(b,{title:"Total Posts",value:t.total_posts,icon:u,color:"blue",trend:{value:12,label:"this month"},onClick:()=>r("/admin/posts")}),e.jsx(b,{title:"Total Views",value:t.total_views>=1e3?`${(t.total_views/1e3).toFixed(1)}K`:t.total_views,icon:N,color:"green",trend:{value:8,label:"this week"}}),e.jsx(b,{title:"Users",value:t.total_users||0,icon:f,color:"purple",trend:{value:5,label:"this month"},onClick:()=>r("/admin/users")}),e.jsx(b,{title:"Tutorials",value:t.total_tutorials||0,icon:p,color:"orange",onClick:()=>r("/admin/tutorials")})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[e.jsxs("div",{onClick:()=>r("/admin/categories"),className:"bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm cursor-pointer hover:shadow-md transition-shadow",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.total_categories}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Categories"})]}),e.jsxs("div",{onClick:()=>r("/admin/tags"),className:"bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm cursor-pointer hover:shadow-md transition-shadow",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.total_tags}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Tags"})]}),e.jsxs("div",{onClick:()=>r("/admin/courses"),className:"bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm cursor-pointer hover:shadow-md transition-shadow",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.total_courses||0}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Courses"})]}),e.jsxs("div",{onClick:()=>r("/games/typing/leaderboard"),className:"bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm cursor-pointer hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"w-5 h-5 text-pink-500"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Typing Games"})]}),e.jsx("p",{className:"text-sm text-primary mt-1",children:"View Leaderboard"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Activity"}),e.jsxs(g,{to:"/admin/activity",className:"text-sm text-primary hover:underline flex items-center gap-1",children:["View All ",e.jsx(X,{className:"w-4 h-4"})]})]}),e.jsx(ee,{activities:m,loading:a})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Needs Attention"}),e.jsx(te,{items:T,loading:a})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"System Status"}),e.jsx(ae,{items:L,loading:a})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-6 gap-3",children:[e.jsxs(g,{to:"/admin/blog",className:"flex flex-col items-center gap-2 p-4 rounded-lg bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors",children:[e.jsx(u,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"New Post"})]}),e.jsxs(g,{to:"/admin/tutorials/new",className:"flex flex-col items-center gap-2 p-4 rounded-lg bg-purple-50 dark:bg-purple-900/20 hover:bg-purple-100 dark:hover:bg-purple-900/30 transition-colors",children:[e.jsx(p,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"New Tutorial"})]}),e.jsxs(g,{to:"/admin/courses/new",className:"flex flex-col items-center gap-2 p-4 rounded-lg bg-green-50 dark:bg-green-900/20 hover:bg-green-100 dark:hover:bg-green-900/30 transition-colors",children:[e.jsx(z,{className:"w-6 h-6 text-green-600 dark:text-green-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"New Course"})]}),e.jsxs(g,{to:"/admin/pages/new",className:"flex flex-col items-center gap-2 p-4 rounded-lg bg-orange-50 dark:bg-orange-900/20 hover:bg-orange-100 dark:hover:bg-orange-900/30 transition-colors",children:[e.jsx(u,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"New Page"})]}),e.jsxs(g,{to:"/admin/users",className:"flex flex-col items-center gap-2 p-4 rounded-lg bg-pink-50 dark:bg-pink-900/20 hover:bg-pink-100 dark:hover:bg-pink-900/30 transition-colors",children:[e.jsx(f,{className:"w-6 h-6 text-pink-600 dark:text-pink-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Users"})]}),e.jsxs("a",{href:"/",target:"_blank",rel:"noopener noreferrer",className:"flex flex-col items-center gap-2 p-4 rounded-lg bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[e.jsx(N,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"View Site"})]})]})]})]})};export{pe as AdminDashboard,pe as default};
