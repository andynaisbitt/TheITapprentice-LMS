import{u as w,r as l,j as e,L as o,m as r,T as L,U as S,e as P,g as X}from"./index-9AhYSV_Z.js";import{p as _}from"./progressApi-DMCQM6d7.js";import{A}from"./arrow-left-Ca1ZuQyN.js";import{S as g}from"./star-DAR9lLy9.js";import{F as E}from"./flame-0fKfX7LX.js";import{M as h}from"./medal-BWfmeHY2.js";const Y=()=>{const{user:s}=w(),[i,u]=l.useState([]),[y,c]=l.useState(!0),[d,b]=l.useState(null);l.useEffect(()=>{(async()=>{c(!0);try{const a=await _.getXPLeaderboard(100,0);if(u(a),s){const m=a.find(k=>k.user_id===s.id);m&&b(m.rank)}}catch(a){console.error("Failed to fetch leaderboard:",a)}finally{c(!1)}})()},[s]);const p=t=>{switch(t){case 1:return e.jsx(X,{className:"w-6 h-6 text-yellow-500"});case 2:return e.jsx(h,{className:"w-6 h-6 text-gray-400"});case 3:return e.jsx(h,{className:"w-6 h-6 text-orange-600"});default:return null}},f=t=>{switch(t){case 1:return"bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 border-yellow-200 dark:border-yellow-800";case 2:return"bg-gradient-to-r from-gray-50 to-slate-50 dark:from-gray-800/50 dark:to-slate-800/50 border-gray-200 dark:border-gray-700";case 3:return"bg-gradient-to-r from-orange-50 to-amber-50 dark:from-orange-900/20 dark:to-amber-900/20 border-orange-200 dark:border-orange-800";default:return"bg-white dark:bg-gray-800 border-gray-100 dark:border-gray-700"}},j=t=>t>=50?"text-purple-600 dark:text-purple-400":t>=30?"text-blue-600 dark:text-blue-400":t>=15?"text-green-600 dark:text-green-400":t>=5?"text-yellow-600 dark:text-yellow-400":"text-gray-600 dark:text-gray-400",x=t=>t>=1e6?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(1)}K`:t.toString(),n=i.length,N=n>0?Math.round(i.reduce((t,a)=>t+a.level,0)/n):0,v=i.reduce((t,a)=>t+a.total_xp,0);return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[e.jsxs(o,{to:"/dashboard",className:"inline-flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white mb-6",children:[e.jsx(A,{className:"w-4 h-4"}),"Back to Dashboard"]}),e.jsxs(r.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-2xl mb-4 shadow-lg",children:e.jsx(L,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"XP Leaderboard"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Top learners ranked by experience points"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow text-center",children:[e.jsx(S,{className:"w-6 h-6 text-blue-500 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:n}),e.jsx("div",{className:"text-sm text-gray-500",children:"Active Learners"})]}),e.jsxs(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow text-center",children:[e.jsx(P,{className:"w-6 h-6 text-green-500 mx-auto mb-2"}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["Lvl ",N]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Average Level"})]}),e.jsxs(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow text-center",children:[e.jsx(g,{className:"w-6 h-6 text-yellow-500 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:x(v)}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total XP Earned"})]})]}),d&&e.jsx(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded-xl p-4 mb-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold",children:["#",d]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:"Your Rank"}),e.jsx("div",{className:"text-sm text-gray-500",children:d<=10?"You're in the top 10!":d<=50?"You're in the top 50!":"Keep learning to climb higher!"})]})]})})}),e.jsx(r.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden",children:y?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-purple-500 border-t-transparent rounded-full mx-auto mb-4"}),"Loading leaderboard..."]}):i.length>0?e.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:i.map((t,a)=>e.jsxs(r.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:a*.03},className:`flex items-center justify-between p-4 border-l-4 ${f(t.rank)} ${s?.id===t.user_id?"ring-2 ring-blue-500 ring-inset":""}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 flex justify-center",children:p(t.rank)||e.jsx("span",{className:"text-xl font-bold text-gray-400",children:t.rank})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(o,{to:`/profile/${t.username}`,className:"hover:text-blue-600 dark:hover:text-blue-400 hover:underline",children:t.display_name||t.username}),s?.id===t.user_id&&e.jsx("span",{className:"text-xs bg-blue-500 text-white px-2 py-0.5 rounded",children:"You"})]}),e.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-2",children:[e.jsxs("span",{className:`font-medium ${j(t.level)}`,children:["Level ",t.level]}),t.streak>0&&e.jsxs("span",{className:"flex items-center gap-1 text-orange-500",children:[e.jsx(E,{className:"w-3 h-3"}),t.streak," day streak"]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-xl font-bold text-purple-600 dark:text-purple-400",children:[x(t.total_xp)," XP"]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total Experience"})]})]},t.user_id))}):e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No entries yet. Start learning to make the leaderboard!"})}),!s&&e.jsxs(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"mt-6 text-center",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Want to join the leaderboard?"}),e.jsxs(o,{to:"/register",className:"inline-flex items-center gap-2 px-6 py-3 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 transition-colors",children:[e.jsx(g,{className:"w-5 h-5"}),"Sign Up & Start Learning"]})]})]})})};export{Y as XPLeaderboardPage,Y as default};
