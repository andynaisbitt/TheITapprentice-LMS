import{f as N,p as w,u as S,r as d,R as L,j as e,L as m}from"./index-smch1bU1.js";import{G as C}from"./GoogleOAuthButton-CF4B7bH4.js";const D=()=>{const n=N(),l=w(),{login:y,isLoading:f,user:E}=S(),[t,x]=d.useState({email:"",password:""}),[u,i]=d.useState(""),[g,b]=d.useState(!1),[j,v]=d.useState(!1),h=l.state?.message,o=l.state?.email;L.useEffect(()=>{o&&x(r=>({...r,email:o}))},[o]);const p=r=>{const{name:a,value:s}=r.target;x(c=>({...c,[a]:s})),i("")},k=async r=>{r.preventDefault(),i(""),b(!0);try{const a=await y(t.email,t.password);l.state?.from?.pathname?n(l.state.from.pathname,{replace:!0}):a.user.role==="admin"||a.user.is_admin?n("/admin",{replace:!0}):n("/dashboard",{replace:!0})}catch(a){console.error("Login error:",a);const s=a.message||"Invalid email or password",c=s.toLowerCase().includes("verify")||s.toLowerCase().includes("verification")||s.toLowerCase().includes("not verified");v(c),i(s)}finally{b(!1)}};return f?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 dark:border-blue-400 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading..."})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center px-4 py-12",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Welcome Back"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Sign in to continue your learning journey"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8",children:[h&&e.jsx("div",{className:"mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:e.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:h})}),u&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:u}),j&&e.jsx(m,{to:"/verify-email",state:{email:t.email},className:"mt-2 inline-block text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"Click here to verify your email →"})]}),e.jsxs("form",{onSubmit:k,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",id:"email",name:"email",required:!0,autoComplete:"email",value:t.email,onChange:p,className:"w-full px-4 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",placeholder:"you@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),e.jsx("input",{type:"password",id:"password",name:"password",required:!0,autoComplete:"current-password",value:t.password,onChange:p,className:"w-full px-4 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",placeholder:"••••••••"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:"Remember me"})]}),e.jsx("div",{className:"text-sm",children:e.jsx(m,{to:"/forgot-password",className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium",children:"Forgot password?"})})]}),e.jsx("button",{type:"submit",disabled:g,className:"w-full px-6 py-3 bg-blue-600 dark:bg-blue-500 text-white rounded-lg hover:bg-blue-700 dark:hover:bg-blue-600 transition disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:g?"Signing in...":"Sign In"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Don't have an account?"," ",e.jsx(m,{to:"/register",className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium",children:"Sign up"})]})}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white dark:bg-gray-800 text-gray-500 dark:text-gray-400",children:"Or continue with"})})]}),e.jsx("div",{className:"mt-6",children:e.jsx(C,{mode:"login",onSuccess:()=>{},onError:r=>{i(r)}})})]})]}),e.jsxs("p",{className:"mt-6 text-center text-xs text-gray-500 dark:text-gray-400",children:["By signing in, you agree to our"," ",e.jsx("a",{href:"/terms",className:"text-blue-600 dark:text-blue-400 hover:underline",children:"Terms of Service"})," ","and"," ",e.jsx("a",{href:"/privacy",className:"text-blue-600 dark:text-blue-400 hover:underline",children:"Privacy Policy"})]})]})})};export{D as Login,D as default};
