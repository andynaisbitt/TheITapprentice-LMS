import{c as C,j as e,r as k,D as Q,v as T,X as O,w as P,R as J,o as K,f as Y,a as G,N as X}from"./index-smch1bU1.js";import{C as Z,a as M}from"./coursesApi-BKihutzQ.js";import{S as W}from"./SkillSelector-BlyRZMr2.js";import{L as U}from"./list-fQvj-NNP.js";import{C as ee}from"./code-t4YF0yhh.js";import{E as re}from"./eye-DJREYbmB.js";import{G as L}from"./grip-vertical-DpW5UWkH.js";import{C as I}from"./chevron-up-73WUkVcc.js";import{T as H}from"./trash-2-7shbvHm_.js";import{S as te}from"./save-DJUivnJu.js";import"./loader-2-D9MIupjh.js";const ae=C("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]),se=C("Heading1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]),ne=C("Heading2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]),le=C("Heading3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]),oe=C("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]),de=C("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),ie=C("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]),ce=C("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),ge=C("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]),xe=C("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]),ue=({onSelectBlock:r,className:s=""})=>e.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 ${s}`,children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3",children:"Add Content Block"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Z.map(t=>e.jsxs("button",{onClick:()=>r(t),className:`flex flex-col items-center justify-center p-3 rounded-lg border-2 border-dashed \r
                     border-gray-300 dark:border-gray-600 hover:border-blue-500 dark:hover:border-blue-400\r
                     hover:bg-blue-50 dark:hover:bg-blue-900/20 transition group`,children:[e.jsx("span",{className:"text-2xl mb-1 group-hover:scale-110 transition-transform",children:t.icon}),e.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 text-center",children:t.name})]},t.type))}),e.jsx("div",{className:"mt-4 text-xs text-gray-500 dark:text-gray-400 text-center",children:"Click a block to add it to your section"})]}),he=({value:r,onChange:s,placeholder:t="Enter your text here...",minHeight:o="200px",maxHeight:i="500px",showPreview:l=!1})=>{const[x,u]=k.useState(l),[b,h]=k.useState(""),c=k.useRef(null),w=()=>{if(c.current){const n=c.current.selectionStart,g=c.current.selectionEnd;h(r.substring(n,g))}},y=(n,g="",p="")=>{if(!c.current)return;const j=c.current.selectionStart,v=c.current.selectionEnd,D=r.substring(j,v)||p,E=r.substring(0,j)+n+D+g+r.substring(v);s(E),setTimeout(()=>{if(c.current){const _=j+n.length+D.length;c.current.focus(),c.current.setSelectionRange(_,_)}},0)},m={bold:()=>y("**","**","bold text"),italic:()=>y("*","*","italic text"),underline:()=>y("<u>","</u>","underlined text"),h1:()=>y("# ","","Heading 1"),h2:()=>y("## ","","Heading 2"),h3:()=>y("### ","","Heading 3"),link:()=>{const n=prompt("Enter URL:");n&&y("[",`](${n})`,"link text")},image:()=>{const n=prompt("Enter image URL:");n&&y("![",`](${n})`,"alt text")},code:()=>y("`","`","code"),codeBlock:()=>y("```\n","\n```","code block"),quote:()=>y("> ","","quote"),bulletList:()=>y("- ","","list item"),numberedList:()=>y("1. ","","list item")};k.useEffect(()=>{const n=g=>{if((g.ctrlKey||g.metaKey)&&!g.shiftKey)switch(g.key.toLowerCase()){case"b":g.preventDefault(),m.bold();break;case"i":g.preventDefault(),m.italic();break;case"k":g.preventDefault(),m.link();break}};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[r]);const S=n=>n.replace(/^### (.*$)/gim,'<h3 class="text-lg font-semibold mt-4 mb-2">$1</h3>').replace(/^## (.*$)/gim,'<h2 class="text-xl font-semibold mt-4 mb-2">$1</h2>').replace(/^# (.*$)/gim,'<h1 class="text-2xl font-bold mt-4 mb-2">$1</h1>').replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,'<code class="bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded text-sm font-mono">$1</code>').replace(/\[(.*?)\]\((.*?)\)/g,'<a href="$2" class="text-blue-600 hover:underline">$1</a>').replace(/!\[(.*?)\]\((.*?)\)/g,'<img src="$2" alt="$1" class="max-w-full h-auto rounded my-2" />').replace(/^> (.*$)/gim,'<blockquote class="border-l-4 border-gray-300 pl-4 italic my-2">$1</blockquote>').replace(/^- (.*$)/gim,'<li class="ml-4">$1</li>').replace(/^\d+\. (.*$)/gim,'<li class="ml-4">$1</li>').replace(/\n/g,"<br />");return e.jsxs("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden bg-white dark:bg-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-1 p-2 border-b border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-1 pr-2 border-r border-gray-300 dark:border-gray-600",children:[e.jsx("button",{onClick:m.bold,className:"p-1.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition",title:"Bold (Ctrl+B)",children:e.jsx(ae,{className:"w-4 h-4"})}),e.jsx("button",{onClick:m.italic,className:"p-1.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition",title:"Italic (Ctrl+I)",children:e.jsx(oe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:m.underline,className:"p-1.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition",title:"Underline",children:e.jsx(xe,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-1 pr-2 border-r border-gray-300 dark:border-gray-600",children:[e.jsx("button",{onClick:m.h1,className:"p-1.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition",title:"Heading 1",children:e.jsx(se,{className:"w-4 h-4"})}),e.jsx("button",{onClick:m.h2,className:"p-1.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition",title:"Heading 2",children:e.jsx(ne,{className:"w-4 h-4"})}),e.jsx("button",{onClick:m.h3,className:"p-1.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition",title:"Heading 3",children:e.jsx(le,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-1 pr-2 border-r border-gray-300 dark:border-gray-600",children:[e.jsx("button",{onClick:m.bulletList,className:"p-1.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition",title:"Bullet List",children:e.jsx(U,{className:"w-4 h-4"})}),e.jsx("button",{onClick:m.numberedList,className:"p-1.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition",title:"Numbered List",children:e.jsx(ie,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-1 pr-2 border-r border-gray-300 dark:border-gray-600",children:[e.jsx("button",{onClick:m.link,className:"p-1.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition",title:"Insert Link (Ctrl+K)",children:e.jsx(de,{className:"w-4 h-4"})}),e.jsx("button",{onClick:m.image,className:"p-1.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition",title:"Insert Image",children:e.jsx(Q,{className:"w-4 h-4"})}),e.jsx("button",{onClick:m.code,className:"p-1.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition",title:"Inline Code",children:e.jsx(ee,{className:"w-4 h-4"})}),e.jsx("button",{onClick:m.quote,className:"p-1.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition",title:"Quote",children:e.jsx(ge,{className:"w-4 h-4"})})]}),e.jsx("button",{onClick:()=>u(!x),className:`p-1.5 rounded transition ml-auto ${x?"bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400":"hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:"Toggle Preview",children:e.jsx(re,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex",children:[!x&&e.jsx("textarea",{ref:c,value:r,onChange:n=>s(n.target.value),onSelect:w,placeholder:t,style:{minHeight:o,maxHeight:i},className:`w-full p-4 font-mono text-sm resize-y focus:outline-none \r
                     bg-white dark:bg-gray-800 text-gray-900 dark:text-white`}),x&&e.jsx("div",{style:{minHeight:o,maxHeight:i},className:"w-full p-4 prose dark:prose-invert max-w-none overflow-y-auto",dangerouslySetInnerHTML:{__html:S(r)}})]}),e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-t border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-xs text-gray-600 dark:text-gray-400",children:[e.jsx("div",{children:"Markdown supported: **bold**, *italic*, `code`, [link](url), # heading"}),e.jsxs("div",{children:[r.length," characters"]})]})]})},be=({block:r,index:s,onUpdate:t,onDelete:o,onMoveUp:i,onMoveDown:l})=>{const[x,u]=k.useState(!0),b=()=>{switch(r.type){case"text":return e.jsx(me,{content:r.content,onUpdate:t});case"heading":return e.jsx(ye,{content:r.content,onUpdate:t});case"quiz":return e.jsx(pe,{content:r.content,onUpdate:t});case"video":return e.jsx(ke,{content:r.content,onUpdate:t});case"code":return e.jsx(ve,{content:r.content,onUpdate:t});case"image":return e.jsx(je,{content:r.content,onUpdate:t});case"callout":return e.jsx(fe,{content:r.content,onUpdate:t});case"timeline":return e.jsx(we,{content:r.content,onUpdate:t});case"interactive":return e.jsx(Ne,{content:r.content,onUpdate:t});case"divider":return e.jsx(Ce,{content:r.content,onUpdate:t});default:return e.jsx("div",{children:"Unknown block type"})}},h=()=>({text:"ðŸ“",heading:"ðŸ“Œ",quiz:"â“",video:"ðŸŽ¥",code:"ðŸ’»",image:"ðŸ–¼ï¸",callout:"ðŸ’¡",timeline:"ðŸ“…",interactive:"ðŸŽ®",divider:"âž–"})[r.type]||"ðŸ“¦";return e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 dark:bg-gray-700/50 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("button",{className:"cursor-move text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(L,{className:"w-4 h-4"})}),e.jsx("span",{className:"text-lg",children:h()}),e.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 capitalize flex-1",children:[r.type," Block"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[i&&e.jsx("button",{onClick:i,className:"p-1 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded",title:"Move up",children:e.jsx(I,{className:"w-4 h-4"})}),l&&e.jsx("button",{onClick:l,className:"p-1 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded",title:"Move down",children:e.jsx(T,{className:"w-4 h-4"})})]}),e.jsx("button",{onClick:()=>u(!x),className:"p-1 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:x?e.jsx(I,{className:"w-4 h-4"}):e.jsx(T,{className:"w-4 h-4"})}),e.jsx("button",{onClick:o,className:"p-1 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",children:e.jsx(H,{className:"w-4 h-4"})})]}),x&&e.jsx("div",{className:"p-4",children:b()})]})},me=({content:r,onUpdate:s})=>{const[t,o]=k.useState(r.format==="markdown");return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Format"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t,onChange:i=>{o(i.target.checked),s({content:{...r,format:i.target.checked?"markdown":"plain"}})},className:"rounded"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Use Rich Editor"})]})]}),t?e.jsx(he,{value:r.text,onChange:i=>s({content:{...r,text:i}}),placeholder:"Start typing your content...",minHeight:"300px",showPreview:!0}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Format"}),e.jsxs("select",{value:r.format||"plain",onChange:i=>s({content:{...r,format:i.target.value}}),className:`px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg \r
                       focus:outline-none focus:ring-2 focus:ring-blue-500 \r
                       bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,children:[e.jsx("option",{value:"plain",children:"Plain Text"}),e.jsx("option",{value:"markdown",children:"Markdown"}),e.jsx("option",{value:"html",children:"HTML"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Content"}),e.jsx("textarea",{value:r.text,onChange:i=>s({content:{...r,text:i.target.value}}),rows:8,className:`w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg \r
                       focus:outline-none focus:ring-2 focus:ring-blue-500 \r
                       bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm`,placeholder:"Enter your content here..."})]}),r.format==="markdown"&&e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Supports: **bold**, *italic*, `code`, [links](url), # headers, - lists"})]})]})},ye=({content:r,onUpdate:s})=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Heading Level"}),e.jsxs("select",{value:r.level,onChange:t=>s({content:{...r,level:parseInt(t.target.value)}}),className:`px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg \r
                 focus:outline-none focus:ring-2 focus:ring-blue-500 \r
                 bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,children:[e.jsx("option",{value:"1",children:"H1 - Main Title"}),e.jsx("option",{value:"2",children:"H2 - Section"}),e.jsx("option",{value:"3",children:"H3 - Subsection"}),e.jsx("option",{value:"4",children:"H4 - Small Heading"}),e.jsx("option",{value:"5",children:"H5 - Tiny Heading"}),e.jsx("option",{value:"6",children:"H6 - Micro Heading"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Heading Text"}),e.jsx("input",{type:"text",value:r.text,onChange:t=>s({content:{...r,text:t.target.value}}),className:`w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg \r
                 focus:outline-none focus:ring-2 focus:ring-blue-500 \r
                 bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,placeholder:"Enter heading text"})]}),e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Preview:"}),J.createElement(`h${r.level}`,{className:"text-gray-900 dark:text-white"},r.text||"Heading Preview")]})]}),pe=({content:r,onUpdate:s})=>{const[t,o]=k.useState(r.questions||[]),i=()=>{const u={id:`q-${Date.now()}`,type:"multiple_choice",question:"New question",options:["Option 1","Option 2","Option 3","Option 4"],correct_answer:"Option 1",explanation:"",points:10},b=[...t,u];o(b),s({content:{...r,questions:b}})},l=(u,b)=>{const h=t.map((c,w)=>w===u?{...c,...b}:c);o(h),s({content:{...r,questions:h}})},x=u=>{const b=t.filter((h,c)=>c!==u);o(b),s({content:{...r,questions:b}})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Passing Score (%)"}),e.jsx("input",{type:"number",value:r.passing_score||70,onChange:u=>s({content:{...r,passing_score:parseInt(u.target.value)}}),className:`w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded \r
                     focus:outline-none focus:ring-1 focus:ring-blue-500 \r
                     bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,min:"0",max:"100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Max Attempts"}),e.jsx("input",{type:"number",value:r.max_attempts||3,onChange:u=>s({content:{...r,max_attempts:parseInt(u.target.value)}}),className:`w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded \r
                     focus:outline-none focus:ring-1 focus:ring-blue-500 \r
                     bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,min:"1"})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.shuffle_questions||!1,onChange:u=>s({content:{...r,shuffle_questions:u.target.checked}}),className:"rounded"}),e.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:"Shuffle"})]})})]}),e.jsx("div",{className:"space-y-3",children:t.map((u,b)=>e.jsxs("div",{className:"border border-gray-300 dark:border-gray-600 rounded p-3 space-y-2",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Question ",b+1]}),e.jsx("input",{type:"text",value:u.question,onChange:h=>l(b,{question:h.target.value}),className:`w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded \r
                           focus:outline-none focus:ring-1 focus:ring-blue-500 \r
                           bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,placeholder:"Enter question"})]}),e.jsx("button",{onClick:()=>x(b),className:"p-1 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",children:e.jsx(O,{className:"w-4 h-4"})})]}),u.type==="multiple_choice"&&u.options&&e.jsx("div",{className:"space-y-1",children:u.options.map((h,c)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",checked:u.correct_answer===h,onChange:()=>l(b,{correct_answer:h}),className:"text-blue-600"}),e.jsx("input",{type:"text",value:h,onChange:w=>{const y=[...u.options];y[c]=w.target.value,l(b,{options:y})},className:`flex-1 px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded \r
                               focus:outline-none focus:ring-1 focus:ring-blue-500 \r
                               bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,placeholder:`Option ${c+1}`})]},c))}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Explanation (optional)"}),e.jsx("input",{type:"text",value:u.explanation||"",onChange:h=>l(b,{explanation:h.target.value}),className:`w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded \r
                         focus:outline-none focus:ring-1 focus:ring-blue-500 \r
                         bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,placeholder:"Explain the correct answer"})]})]},u.id))}),e.jsxs("button",{onClick:i,className:`w-full py-2 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded \r
                 hover:border-blue-500 dark:hover:border-blue-400 transition\r
                 text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400\r
                 flex items-center justify-center gap-2 text-sm`,children:[e.jsx(P,{className:"w-4 h-4"}),"Add Question"]})]})},ke=({content:r,onUpdate:s})=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Video Provider"}),e.jsxs("select",{value:r.provider,onChange:t=>s({content:{...r,provider:t.target.value}}),className:`px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg \r
                 focus:outline-none focus:ring-2 focus:ring-blue-500 \r
                 bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,children:[e.jsx("option",{value:"youtube",children:"YouTube"}),e.jsx("option",{value:"vimeo",children:"Vimeo"}),e.jsx("option",{value:"direct",children:"Direct URL"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Video URL"}),e.jsx("input",{type:"text",value:r.url,onChange:t=>s({content:{...r,url:t.target.value}}),className:`w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg \r
                 focus:outline-none focus:ring-2 focus:ring-blue-500 \r
                 bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,placeholder:"https://youtube.com/watch?v=..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Caption (optional)"}),e.jsx("input",{type:"text",value:r.caption||"",onChange:t=>s({content:{...r,caption:t.target.value}}),className:`w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg \r
                 focus:outline-none focus:ring-2 focus:ring-blue-500 \r
                 bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,placeholder:"Video description"})]})]}),ve=({content:r,onUpdate:s})=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Language"}),e.jsxs("select",{value:r.language,onChange:t=>s({content:{...r,language:t.target.value}}),className:`w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg \r
                   focus:outline-none focus:ring-2 focus:ring-blue-500 \r
                   bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,children:[e.jsx("option",{value:"javascript",children:"JavaScript"}),e.jsx("option",{value:"python",children:"Python"}),e.jsx("option",{value:"typescript",children:"TypeScript"}),e.jsx("option",{value:"java",children:"Java"}),e.jsx("option",{value:"csharp",children:"C#"}),e.jsx("option",{value:"cpp",children:"C++"}),e.jsx("option",{value:"html",children:"HTML"}),e.jsx("option",{value:"css",children:"CSS"}),e.jsx("option",{value:"sql",children:"SQL"}),e.jsx("option",{value:"bash",children:"Bash"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Filename (optional)"}),e.jsx("input",{type:"text",value:r.filename||"",onChange:t=>s({content:{...r,filename:t.target.value}}),className:`w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg \r
                   focus:outline-none focus:ring-2 focus:ring-blue-500 \r
                   bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,placeholder:"example.js"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Code"}),e.jsx("textarea",{value:r.code,onChange:t=>s({content:{...r,code:t.target.value}}),rows:10,className:`w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg \r
                 focus:outline-none focus:ring-2 focus:ring-blue-500 \r
                 bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm`,placeholder:"// Your code here"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.runnable||!1,onChange:t=>s({content:{...r,runnable:t.target.checked}}),className:"rounded"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Runnable"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.editable||!1,onChange:t=>s({content:{...r,editable:t.target.checked}}),className:"rounded"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Editable"})]})]})]}),je=({content:r,onUpdate:s})=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Image URL"}),e.jsx("input",{type:"text",value:r.url,onChange:t=>s({content:{...r,url:t.target.value}}),className:`w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg \r
                 focus:outline-none focus:ring-2 focus:ring-blue-500 \r
                 bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,placeholder:"https://example.com/image.jpg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Alt Text (for accessibility)"}),e.jsx("input",{type:"text",value:r.alt,onChange:t=>s({content:{...r,alt:t.target.value}}),className:`w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg \r
                 focus:outline-none focus:ring-2 focus:ring-blue-500 \r
                 bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,placeholder:"Describe the image"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Caption (optional)"}),e.jsx("input",{type:"text",value:r.caption||"",onChange:t=>s({content:{...r,caption:t.target.value}}),className:`w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg \r
                 focus:outline-none focus:ring-2 focus:ring-blue-500 \r
                 bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,placeholder:"Image caption"})]}),r.url&&e.jsxs("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Preview:"}),e.jsx("img",{src:r.url,alt:r.alt,className:"max-w-full h-auto rounded"})]})]}),fe=({content:r,onUpdate:s})=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Callout Type"}),e.jsxs("select",{value:r.type,onChange:t=>s({content:{...r,type:t.target.value}}),className:`w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg \r
                 focus:outline-none focus:ring-2 focus:ring-blue-500 \r
                 bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,children:[e.jsx("option",{value:"info",children:"â„¹ï¸ Info"}),e.jsx("option",{value:"warning",children:"âš ï¸ Warning"}),e.jsx("option",{value:"success",children:"âœ… Success"}),e.jsx("option",{value:"error",children:"âŒ Error"}),e.jsx("option",{value:"tip",children:"ðŸ’¡ Tip"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Title (optional)"}),e.jsx("input",{type:"text",value:r.title||"",onChange:t=>s({content:{...r,title:t.target.value}}),className:`w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg \r
                 focus:outline-none focus:ring-2 focus:ring-blue-500 \r
                 bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,placeholder:"Callout title"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Content"}),e.jsx("textarea",{value:r.content,onChange:t=>s({content:{...r,content:t.target.value}}),rows:4,className:`w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg \r
                 focus:outline-none focus:ring-2 focus:ring-blue-500 \r
                 bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,placeholder:"Callout content"})]})]}),we=({content:r,onUpdate:s})=>e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Timeline editor - Advanced feature coming soon"}),e.jsx("textarea",{value:JSON.stringify(r,null,2),onChange:t=>{try{const o=JSON.parse(t.target.value);s({content:o})}catch{}},rows:6,className:`w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg \r
               focus:outline-none focus:ring-2 focus:ring-blue-500 \r
               bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-xs`})]}),Ne=({content:r,onUpdate:s})=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Component Name"}),e.jsx("input",{type:"text",value:r.component_name,onChange:t=>s({content:{...r,component_name:t.target.value}}),className:`w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg \r
                 focus:outline-none focus:ring-2 focus:ring-blue-500 \r
                 bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,placeholder:"ComponentName"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Props (JSON)"}),e.jsx("textarea",{value:JSON.stringify(r.props||{},null,2),onChange:t=>{try{const o=JSON.parse(t.target.value);s({content:{...r,props:o}})}catch{}},rows:4,className:`w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg \r
                 focus:outline-none focus:ring-2 focus:ring-blue-500 \r
                 bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm`})]})]}),Ce=({content:r,onUpdate:s})=>e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Style"}),e.jsxs("select",{value:r.style||"solid",onChange:t=>s({content:{...r,style:t.target.value}}),className:`w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg \r
                   focus:outline-none focus:ring-2 focus:ring-blue-500 \r
                   bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,children:[e.jsx("option",{value:"solid",children:"Solid"}),e.jsx("option",{value:"dashed",children:"Dashed"}),e.jsx("option",{value:"dotted",children:"Dotted"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Spacing"}),e.jsxs("select",{value:r.spacing||"medium",onChange:t=>s({content:{...r,spacing:t.target.value}}),className:`w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg \r
                   focus:outline-none focus:ring-2 focus:ring-blue-500 \r
                   bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,children:[e.jsx("option",{value:"small",children:"Small"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"large",children:"Large"})]})]})]})}),z=k.createContext(void 0),Se=()=>{const r=k.useContext(z);if(!r)throw new Error("useDragDrop must be used within DragDropProvider");return r},De=({children:r})=>{const[s,t]=k.useState(null),[o,i]=k.useState(null),l=c=>{t(c)},x=()=>{t(null),i(null)},h={draggedItem:s,draggedOverItem:o,onDragStart:l,onDragEnd:x,onDragOver:c=>{c!==s&&i(c)},onDrop:(c,w)=>{s&&s!==c&&w(s,c),x()}};return e.jsx(z.Provider,{value:h,children:r})},Ee=({id:r,onReorder:s,children:t,className:o=""})=>{const{draggedItem:i,draggedOverItem:l,onDragStart:x,onDragEnd:u,onDragOver:b,onDrop:h}=Se(),c=n=>{n.dataTransfer.effectAllowed="move",x(r)},w=n=>{n.preventDefault(),n.dataTransfer.dropEffect="move",b(r)},y=n=>{n.preventDefault(),h(r,s)},m=i===r,S=l===r&&!m;return e.jsx("div",{draggable:!0,onDragStart:c,onDragEnd:u,onDragOver:w,onDrop:y,className:`
        ${o}
        ${m?"opacity-50 cursor-grabbing":"cursor-grab"}
        ${S?"border-t-4 border-blue-500":""}
        transition-all duration-200
      `,children:t})},Me=({section:r,onSave:s,onClose:t})=>{const[o,i]=k.useState({...r}),[l,x]=k.useState(r.content_blocks||[]),[u,b]=k.useState(!1),h=n=>{const g={id:`block-${Date.now()}`,type:n.type,content:n.defaultContent,order:l.length},p=[...l,g];x(p),i({...o,content_blocks:p}),b(!1)},c=(n,g)=>{const p=l.map((j,v)=>v===n?{...j,...g}:j);x(p),i({...o,content_blocks:p})},w=n=>{if(!confirm("Delete this block?"))return;const p=l.filter((j,v)=>v!==n).map((j,v)=>({...j,order:v}));x(p),i({...o,content_blocks:p})},y=(n,g)=>{if(g==="up"&&n===0||g==="down"&&n===l.length-1)return;const p=[...l],j=g==="up"?n-1:n+1;[p[n],p[j]]=[p[j],p[n]];const v=p.map((B,D)=>({...B,order:D}));x(v),i({...o,content_blocks:v})},m=(n,g)=>{const p=l.findIndex(E=>E.id===n),j=l.findIndex(E=>E.id===g);if(p===-1||j===-1)return;const v=[...l],[B]=v.splice(p,1);v.splice(j,0,B);const D=v.map((E,_)=>({...E,order:_}));x(D),i({...o,content_blocks:D})},S=()=>{s(o),t()};return e.jsx(De,{children:e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Edit Section Content"}),e.jsx("input",{type:"text",value:o.title,onChange:n=>i({...o,title:n.target.value}),className:`w-full max-w-2xl px-3 py-2 text-lg border border-gray-300 dark:border-gray-600 rounded-lg \r
                         focus:outline-none focus:ring-2 focus:ring-blue-500 \r
                         bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,placeholder:"Section title"})]}),e.jsx("button",{onClick:t,className:"ml-4 p-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:e.jsx(O,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Section Type"}),e.jsxs("select",{value:o.type,onChange:n=>i({...o,type:n.target.value}),className:`w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded \r
                           focus:outline-none focus:ring-1 focus:ring-blue-500 \r
                           bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,children:[e.jsx("option",{value:"theory",children:"Theory"}),e.jsx("option",{value:"practice",children:"Practice"}),e.jsx("option",{value:"quiz",children:"Quiz"}),e.jsx("option",{value:"challenge",children:"Challenge"}),e.jsx("option",{value:"video",children:"Video"}),e.jsx("option",{value:"exercise",children:"Exercise"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Time Estimate"}),e.jsx("input",{type:"text",value:o.time_estimate||"",onChange:n=>i({...o,time_estimate:n.target.value}),className:`w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded \r
                           focus:outline-none focus:ring-1 focus:ring-blue-500 \r
                           bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,placeholder:"e.g., 15 min"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Points"}),e.jsx("input",{type:"number",value:o.points,onChange:n=>i({...o,points:parseInt(n.target.value)}),className:`w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded \r
                           focus:outline-none focus:ring-1 focus:ring-blue-500 \r
                           bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,min:"0"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>b(!u),className:"w-full px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition",children:u?"Hide Blocks":"+ Add Block"})})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description (optional)"}),e.jsx("input",{type:"text",value:o.description||"",onChange:n=>i({...o,description:n.target.value}),className:`w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded \r
                         focus:outline-none focus:ring-1 focus:ring-blue-500 \r
                         bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,placeholder:"Brief description of this section"})]})]}),e.jsxs("div",{className:"flex-1 overflow-hidden flex",children:[e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:l.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ“„"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"No content blocks yet"}),e.jsx("button",{onClick:()=>b(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Add Your First Block"})]}):e.jsx("div",{className:"space-y-4",children:l.map((n,g)=>e.jsx(Ee,{id:n.id||`block-${g}`,onReorder:m,children:e.jsx(be,{block:n,index:g,onUpdate:p=>c(g,p),onDelete:()=>w(g),onMoveUp:g>0?()=>y(g,"up"):void 0,onMoveDown:g<l.length-1?()=>y(g,"down"):void 0})},n.id||g))})}),u&&e.jsx("div",{className:"w-80 border-l border-gray-200 dark:border-gray-700 overflow-y-auto p-4 bg-gray-50 dark:bg-gray-900",children:e.jsx(ue,{onSelectBlock:h})})]}),e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[l.length," content block",l.length!==1?"s":""," â€¢ Drag blocks to reorder"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition",children:"Cancel"}),e.jsxs("button",{onClick:S,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition flex items-center gap-2",children:[e.jsx(te,{className:"w-4 h-4"}),"Save Section"]})]})]})]})})})},Ae=()=>{const{id:r}=K(),s=Y(),t=!!r,[o,i]=k.useState("info"),[l,x]=k.useState({id:"",title:"",description:"",short_description:"",level:"beginner",skills:[],tags:[],requirements:[],objectives:[],is_premium:!1,price:0,related_skills:[]}),[u,b]=k.useState(null),[h,c]=k.useState([]),[w,y]=k.useState(new Set),[m,S]=k.useState(null),[n,g]=k.useState(!1),[p,j]=k.useState(!1);k.useEffect(()=>{t&&r&&v()},[r]);const v=async()=>{try{g(!0);const a=await M.getCourse(r);x({...a,related_skills:a.related_skills||[]}),b(a),c(a.modules||[])}catch(a){alert(`Failed to load course: ${a.message}`)}finally{g(!1)}},B=async()=>{if(!r)return;const a=`module-${Date.now()}`,f={id:a,title:`Module ${h.length+1}`,description:"",order_index:h.length,estimated_minutes:30};try{await M.addModule(r,f),await v(),y(d=>new Set([...d,a]))}catch(d){alert(`Failed to add module: ${d.message}`)}},D=async a=>{if(!(!r||!confirm("Delete this module and all its sections?")))try{await M.deleteModule(r,a),await v()}catch(f){alert(`Failed to delete module: ${f.message}`)}},E=async(a,f)=>{if(r)try{await M.updateModule(r,a,f),c(d=>d.map(N=>N.id===a?{...N,...f}:N))}catch(d){alert(`Failed to update module: ${d.message}`)}},_=async a=>{if(!r)return;const d=h.find($=>$.id===a)?.sections?.length||0,N={id:`section-${Date.now()}`,title:`Section ${d+1}`,description:"",type:"theory",content_blocks:[],order_index:d,points:10};try{await M.addSection(r,a,N),await v()}catch($){alert(`Failed to add section: ${$.message}`)}},A=async(a,f)=>{if(!(!r||!confirm("Delete this section?")))try{await M.deleteSection(r,a,f),await v()}catch(d){alert(`Failed to delete section: ${d.message}`)}},q=(a,f)=>{S({moduleId:a,section:f})},V=async a=>{if(!(!r||!m))try{await M.updateSection(r,m.moduleId,m.section.id,a),await v(),S(null)}catch(f){alert(`Failed to save section: ${f.message}`)}},R=a=>{y(f=>{const d=new Set(f);return d.has(a)?d.delete(a):d.add(a),d})},F=async()=>{try{j(!0),t?await M.updateCourse(r,l):await M.createCourse(l),s("/admin/courses")}catch(a){alert(`Failed to save course: ${a.message}`)}finally{j(!1)}};return n?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:t?"Edit Course":"Create New Course"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:t?"Update course details and manage content":"Create a new course with content blocks"})]}),t&&e.jsx("div",{className:"mb-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsx("button",{onClick:()=>i("info"),className:`py-4 px-1 border-b-2 font-medium text-sm ${o==="info"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Course Info"}),e.jsxs("button",{onClick:()=>i("modules"),className:`py-4 px-1 border-b-2 font-medium text-sm ${o==="modules"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Modules & Content (",h.length,")"]})]})}),t&&o==="modules"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Course Modules"}),e.jsxs("button",{onClick:B,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(P,{className:"w-4 h-4"}),"Add Module"]})]}),h.length===0?e.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg",children:[e.jsx(G,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"No modules yet"}),e.jsx("button",{onClick:B,className:"text-blue-600 hover:text-blue-700 font-medium",children:"+ Add your first module"})]}):e.jsx("div",{className:"space-y-4",children:h.sort((a,f)=>a.order_index-f.order_index).map((a,f)=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 dark:bg-gray-700 cursor-pointer",onClick:()=>R(a.id),children:[e.jsx(L,{className:"w-5 h-5 text-gray-400 cursor-grab"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"text",value:a.title,onChange:d=>E(a.id,{title:d.target.value}),onClick:d=>d.stopPropagation(),className:"font-medium text-gray-900 dark:text-white bg-transparent border-none focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2 -ml-2"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[a.sections?.length||0," sections â€¢ ",a.estimated_minutes||0," min"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:d=>{d.stopPropagation(),_(a.id)},className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded",title:"Add Section",children:e.jsx(P,{className:"w-4 h-4"})}),e.jsx("button",{onClick:d=>{d.stopPropagation(),D(a.id)},className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded",title:"Delete Module",children:e.jsx(H,{className:"w-4 h-4"})}),w.has(a.id)?e.jsx(I,{className:"w-5 h-5 text-gray-400"}):e.jsx(T,{className:"w-5 h-5 text-gray-400"})]})]}),w.has(a.id)&&e.jsx("div",{className:"p-4 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700",children:!a.sections||a.sections.length===0?e.jsxs("div",{className:"text-center py-6 text-gray-500 dark:text-gray-400",children:[e.jsx(X,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),e.jsx("p",{className:"text-sm",children:"No sections yet"}),e.jsx("button",{onClick:()=>_(a.id),className:"text-blue-600 text-sm hover:underline mt-2",children:"+ Add section"})]}):e.jsxs("div",{className:"space-y-2",children:[a.sections.sort((d,N)=>d.order_index-N.order_index).map(d=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 cursor-pointer transition-colors",onClick:()=>q(a.id,d),children:[e.jsx(L,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${d.type==="theory"?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400":d.type==="practice"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":d.type==="quiz"?"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400":"bg-gray-100 text-gray-700 dark:bg-gray-600 dark:text-gray-300"}`,children:d.type}),e.jsx("span",{className:"flex-1 text-sm text-gray-700 dark:text-gray-300",children:d.title}),e.jsxs("span",{className:"text-xs text-gray-500",children:[d.content_blocks?.length||0," blocks"]}),e.jsx("button",{onClick:N=>{N.stopPropagation(),q(a.id,d)},className:"p-1 text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded",title:"Edit Content",children:e.jsx(ce,{className:"w-4 h-4"})}),e.jsx("button",{onClick:N=>{N.stopPropagation(),A(a.id,d.id)},className:"p-1 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 rounded",title:"Delete Section",children:e.jsx(H,{className:"w-4 h-4"})})]},d.id)),e.jsx("button",{onClick:()=>_(a.id),className:"w-full py-2 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg text-gray-500 dark:text-gray-400 hover:border-blue-400 hover:text-blue-500 text-sm",children:"+ Add Section"})]})})]},a.id))}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-400",children:[e.jsx("strong",{children:"Tip:"})," Click on any section to open the content editor and add text, code, images, quizzes, and more."]})})]}),m&&e.jsx(Me,{section:m.section,onSave:V,onClose:()=>S(null)}),(!t||o==="info")&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 space-y-6",children:[!t&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Course ID"}),e.jsx("input",{type:"text",value:l.id,onChange:a=>x({...l,id:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"e.g., python-fundamentals"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Title"}),e.jsx("input",{type:"text",value:l.title,onChange:a=>x({...l,title:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{value:l.description,onChange:a=>x({...l,description:a.target.value}),rows:4,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Short Description"}),e.jsx("input",{type:"text",value:l.short_description,onChange:a=>x({...l,short_description:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Difficulty Level"}),e.jsxs("select",{value:l.level,onChange:a=>x({...l,level:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"beginner",children:"Beginner"}),e.jsx("option",{value:"intermediate",children:"Intermediate"}),e.jsx("option",{value:"advanced",children:"Advanced"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category"}),e.jsx("input",{type:"text",value:l.category||"",onChange:a=>x({...l,category:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"e.g., Programming"})]}),e.jsx("div",{children:e.jsx(W,{selectedSlugs:l.related_skills||[],onChange:a=>x({...l,related_skills:a}),helpText:"Skills that will receive XP when course modules are completed"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:l.is_premium,onChange:a=>x({...l,is_premium:a.target.checked}),className:"mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Premium Course"})]})}),l.is_premium&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Price (USD)"}),e.jsx("input",{type:"number",value:l.price,onChange:a=>x({...l,price:parseFloat(a.target.value)}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:()=>s("/admin/courses"),className:"px-6 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),e.jsx("button",{onClick:F,disabled:p,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:p?"Saving...":t?"Update Course":"Create Course"})]})]})]})})};export{Ae as default};
