import{r as l,j as e,T as q,Z as v,I as f,w as P}from"./index-9AhYSV_Z.js";import{L as j}from"./loader-2-CpwtcwX3.js";import{S as E}from"./save-V0joibv9.js";import{S as N}from"./star-DAR9lLy9.js";import{T as F}from"./trash-2-DRLNEOm3.js";const T=[{level:1,xp_required:0,title:"Novice",badge_color:"#9CA3AF"},{level:2,xp_required:100,title:"Beginner",badge_color:"#6B7280"},{level:3,xp_required:250,title:"Apprentice",badge_color:"#10B981"},{level:4,xp_required:500,title:"Student",badge_color:"#22C55E"},{level:5,xp_required:1e3,title:"Practitioner",badge_color:"#3B82F6"},{level:6,xp_required:2e3,title:"Adept",badge_color:"#6366F1"},{level:7,xp_required:3500,title:"Expert",badge_color:"#8B5CF6"},{level:8,xp_required:5500,title:"Master",badge_color:"#A855F7"},{level:9,xp_required:8e3,title:"Grandmaster",badge_color:"#EC4899"},{level:10,xp_required:12e3,title:"Legend",badge_color:"#F59E0B"},{level:11,xp_required:17e3,title:"Mythic",badge_color:"#EF4444"},{level:12,xp_required:23e3,title:"Divine",badge_color:"#DC2626"},{level:13,xp_required:3e4,title:"Celestial",badge_color:"#B91C1C"},{level:14,xp_required:38e3,title:"Transcendent",badge_color:"#991B1B"},{level:15,xp_required:47e3,title:"Immortal",badge_color:"#7F1D1D"}],c=100,A=[{id:"login_daily",action:"Daily Login",description:"First login of the day",base_xp:10,multiplier:1,category:"Activity"},{id:"tutorial_start",action:"Start Tutorial",description:"Begin a new tutorial",base_xp:5,multiplier:1,category:"Tutorials"},{id:"tutorial_step",action:"Complete Step",description:"Complete a tutorial step",base_xp:10,multiplier:1,category:"Tutorials"},{id:"tutorial_complete",action:"Complete Tutorial",description:"Finish an entire tutorial",base_xp:50,multiplier:1,category:"Tutorials"},{id:"course_enroll",action:"Enroll in Course",description:"Start a new course",base_xp:10,multiplier:1,category:"Courses"},{id:"lesson_complete",action:"Complete Lesson",description:"Finish a course lesson",base_xp:25,multiplier:1,category:"Courses"},{id:"course_complete",action:"Complete Course",description:"Finish an entire course",base_xp:200,multiplier:1,category:"Courses"},{id:"typing_game",action:"Typing Game",description:"Complete a typing game",base_xp:15,multiplier:1,category:"Games"},{id:"typing_wpm_bonus",action:"Speed Bonus",description:"Per WPM above 60",base_xp:1,multiplier:1,category:"Games"},{id:"pvp_win",action:"PVP Victory",description:"Win a PVP typing match",base_xp:50,multiplier:1,category:"Games"},{id:"streak_bonus",action:"Streak Bonus",description:"Per day of streak",base_xp:5,multiplier:1,category:"Streaks"}],U=()=>{const[i,o]=l.useState([]),[p,g]=l.useState([]),[_,m]=l.useState(!0),[u,y]=l.useState(!1),[n,h]=l.useState("levels"),[B,X]=l.useState(null),[D,R]=l.useState(null);l.useEffect(()=>{w()},[]);const w=async()=>{m(!0);try{o(T),g(A)}catch(t){console.error("Failed to load XP config:",t)}finally{m(!1)}},k=async()=>{y(!0);try{await new Promise(t=>setTimeout(t,1e3)),alert("Configuration saved successfully!")}catch(t){console.error("Failed to save config:",t)}finally{y(!1)}},x=(t,r,a)=>{o(i.map(s=>s.level===t?{...s,[r]:a}:s))},b=(t,r,a)=>{g(p.map(s=>s.id===t?{...s,[r]:a}:s))},C=()=>{const t=Math.max(...i.map(d=>d.level));if(t>=c){alert(`Maximum level is ${c}`);return}const r=i.find(d=>d.level===t),a=r?Math.round(r.xp_required*1.4):0,s={level:t+1,xp_required:a,title:`Level ${t+1}`,badge_color:"#6B7280"};o([...i,s].sort((d,S)=>d.level-S.level))},L=t=>{if(t===1){alert("Cannot delete level 1");return}if(i.length<=5){alert("Must have at least 5 levels");return}o(i.filter(r=>r.level!==t))};return _?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(j,{className:"w-8 h-8 animate-spin text-primary"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"XP & Levels"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Configure level thresholds and XP reward values"})]}),e.jsxs("button",{onClick:k,disabled:u,className:"inline-flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors disabled:opacity-50",children:[u?e.jsx(j,{className:"w-4 h-4 animate-spin"}):e.jsx(E,{className:"w-4 h-4"}),"Save Changes"]})]}),e.jsxs("div",{className:"flex gap-2 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("button",{onClick:()=>h("levels"),className:`px-4 py-2 font-medium border-b-2 transition-colors ${n==="levels"?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[e.jsx(q,{className:"w-4 h-4 inline mr-2"}),"Level Thresholds"]}),e.jsxs("button",{onClick:()=>h("rewards"),className:`px-4 py-2 font-medium border-b-2 transition-colors ${n==="rewards"?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[e.jsx(v,{className:"w-4 h-4 inline mr-2"}),"XP Rewards"]})]}),n==="levels"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden",children:[e.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300",children:[e.jsx(f,{className:"w-4 h-4"}),"Define how much XP is required for each level and what titles users earn."]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Level"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"XP Required"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Title"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Badge Color"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Preview"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:i.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"w-4 h-4 text-yellow-500"}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:t.level})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"number",value:t.xp_required,onChange:r=>x(t.level,"xp_required",parseInt(r.target.value)||0),className:"w-24 px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"text",value:t.title,onChange:r=>x(t.level,"title",r.target.value),className:"w-32 px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"color",value:t.badge_color,onChange:r=>x(t.level,"badge_color",r.target.value),className:"w-10 h-8 rounded cursor-pointer"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium text-white",style:{backgroundColor:t.badge_color},children:[e.jsx(N,{className:"w-3 h-3"}),"Lv.",t.level," ",t.title]})}),e.jsx("td",{className:"px-4 py-3",children:t.level>1&&e.jsx("button",{onClick:()=>L(t.level),className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"Delete level",children:e.jsx(F,{className:"w-4 h-4"})})})]},t.level))})]})}),e.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("button",{onClick:C,disabled:i.length>=c,className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-primary bg-primary/10 hover:bg-primary/20 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(P,{className:"w-4 h-4"}),"Add Level"]}),e.jsxs("span",{className:"ml-3 text-sm text-gray-500 dark:text-gray-400",children:[i.length," / ",c," levels configured"]})]})]}),n==="rewards"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden",children:[e.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300",children:[e.jsx(f,{className:"w-4 h-4"}),"Configure how much XP users earn for different actions."]})}),e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:Object.entries(p.reduce((t,r)=>(t[r.category]||(t[r.category]=[]),t[r.category].push(r),t),{})).map(([t,r])=>e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3",children:t}),e.jsx("div",{className:"space-y-3",children:r.map(a=>e.jsxs("div",{className:"flex items-center gap-4 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:a.action}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a.description})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(v,{className:"w-4 h-4 text-yellow-500"}),e.jsx("input",{type:"number",value:a.base_xp,onChange:s=>b(a.id,"base_xp",parseInt(s.target.value)||0),className:"w-16 px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-center"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"XP"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Ã—"}),e.jsx("input",{type:"number",step:"0.1",value:a.multiplier,onChange:s=>b(a.id,"multiplier",parseFloat(s.target.value)||1),className:"w-16 px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-center"})]}),e.jsxs("span",{className:"text-sm font-medium text-primary min-w-[60px] text-right",children:["= ",Math.round(a.base_xp*a.multiplier)," XP"]})]})]},a.id))})]},t))})]})]})};export{U as XPConfigAdmin,U as default};
