import{r as c,j as e,L as o}from"./index-smch1bU1.js";import{g as v,h as g,i as k}from"./useQuizzes-BbP-pkY_.js";const b={draft:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",published:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",archived:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"},f={easy:"text-green-600 dark:text-green-400",medium:"text-yellow-600 dark:text-yellow-400",hard:"text-orange-600 dark:text-orange-400",expert:"text-red-600 dark:text-red-400"},C=()=>{const[i,h]=c.useState(""),[n,u]=c.useState(""),{quizzes:a,loading:x,error:d,refetch:l}=v({status:i||void 0,search:n||void 0}),p=async t=>{if(confirm(`Are you sure you want to delete "${t.title}"?`))try{await k(t.id),l()}catch(r){alert(r.response?.data?.detail||"Failed to delete quiz")}},m=async(t,r)=>{try{await g(t.id,{status:r}),l()}catch(j){alert(j.response?.data?.detail||"Failed to update quiz status")}},y=async t=>{try{await g(t.id,{is_featured:!t.is_featured}),l()}catch(r){alert(r.response?.data?.detail||"Failed to update quiz")}},s={total:a.length,published:a.filter(t=>t.status==="published").length,draft:a.filter(t=>t.status==="draft").length,totalAttempts:a.reduce((t,r)=>t+r.total_attempts,0)};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Quiz Manager"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Create and manage quizzes"})]}),e.jsxs(o,{to:"/admin/quizzes/new",className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Quiz"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s.total}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Quizzes"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:s.published}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Published"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-600 dark:text-gray-400",children:s.draft}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Drafts"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:s.totalAttempts}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Attempts"})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-6",children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsx("input",{type:"text",placeholder:"Search quizzes...",value:n,onChange:t=>u(t.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})}),e.jsxs("select",{value:i,onChange:t=>h(t.target.value),className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"archived",children:"Archived"})]})]})}),x&&e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}),d&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 text-red-800 dark:text-red-200 mb-6",children:d}),!x&&!d&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Quiz"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Questions"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Stats"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500 dark:text-gray-400",children:"No quizzes found. Create your first quiz!"})}):a.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:t.title}),t.is_featured&&e.jsx("span",{className:"text-yellow-500",title:"Featured",children:"â˜…"})]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["ID: ",t.id]})]})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:t.category||"-"}),e.jsx("div",{className:`text-xs capitalize ${f[t.difficulty]}`,children:t.difficulty})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-white",children:[t.question_count," questions"]}),e.jsxs("div",{className:"text-gray-500 dark:text-gray-400",children:[t.xp_reward," XP"]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("select",{value:t.status,onChange:r=>m(t,r.target.value),className:`px-2 py-1 text-xs font-medium rounded ${b[t.status]} border-0 focus:ring-2 focus:ring-purple-500`,children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"archived",children:"Archived"})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"text-gray-900 dark:text-white",children:[t.total_attempts," attempts"]}),e.jsxs("div",{className:"text-gray-500 dark:text-gray-400",children:[t.pass_rate.toFixed(0),"% pass rate"]})]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>y(t),className:`p-2 rounded-lg ${t.is_featured?"text-yellow-600 bg-yellow-100 dark:bg-yellow-900/30":"text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,title:t.is_featured?"Remove from featured":"Add to featured",children:e.jsx("svg",{className:"w-5 h-5",fill:t.is_featured?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}),e.jsx(o,{to:`/admin/quizzes/${t.id}/edit`,className:"p-2 text-blue-600 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-lg",title:"Edit",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("a",{href:`/quizzes/${t.id}`,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-green-600 hover:bg-green-100 dark:hover:bg-green-900/30 rounded-lg",title:"Preview",children:e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),e.jsx("button",{onClick:()=>p(t),className:"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg",title:"Delete",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},t.id))})]})})]})};export{C as default};
