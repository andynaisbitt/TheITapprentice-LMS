import{r as a,j as e,L as n}from"./index-CJMQzWwg.js";import{a as x}from"./coursesApi-CYh3xVFp.js";const f=()=>{const[c,u]=a.useState([]),[o,g]=a.useState(!0),[r,h]=a.useState(null),[s,m]=a.useState(void 0),[d,p]=a.useState(void 0),l=async()=>{try{g(!0);const t=await x.getAllCourses({level:s,status:d,page:1,page_size:50});u(t.courses),h(null)}catch(t){h(t.message||"Failed to load courses")}finally{g(!1)}};a.useEffect(()=>{l()},[s,d]);const y=async t=>{try{await x.togglePublish(t,!0),l()}catch(i){alert(`Failed to publish course: ${i.message}`)}},b=async(t,i)=>{if(confirm(`Are you sure you want to delete "${i}"?`))try{await x.deleteCourse(t),l()}catch(j){alert(`Failed to delete course: ${j.message}`)}};return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Course Management"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Create, edit, and manage all courses"})]}),e.jsx(n,{to:"/admin/courses/new",className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium shadow-sm",children:"+ Create Course"})]}),e.jsxs("div",{className:"mt-6 flex gap-4",children:[e.jsxs("select",{value:d||"",onChange:t=>p(t.target.value||void 0),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"archived",children:"Archived"})]}),e.jsxs("select",{value:s||"",onChange:t=>m(t.target.value||void 0),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"All Levels"}),e.jsx("option",{value:"beginner",children:"Beginner"}),e.jsx("option",{value:"intermediate",children:"Intermediate"}),e.jsx("option",{value:"advanced",children:"Advanced"})]})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o&&e.jsx("div",{className:"text-center py-12",children:e.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}),r&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 text-red-700 dark:text-red-400",children:r}),!o&&!r&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Course"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Level"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Enrollments"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:c.map(t=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.title}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.short_description})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",children:t.level})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${t.status==="published"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":t.status==="draft"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}`,children:t.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:t.enrollment_count}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(n,{to:`/admin/courses/${t.id}/edit`,className:"text-blue-600 hover:text-blue-900 dark:text-blue-400",children:"Edit"}),t.status==="draft"&&e.jsx("button",{onClick:()=>y(t.id),className:"text-green-600 hover:text-green-900 dark:text-green-400",children:"Publish"}),e.jsx("button",{onClick:()=>b(t.id,t.title),className:"text-red-600 hover:text-red-900 dark:text-red-400",children:"Delete"})]})})]},t.id))})]}),c.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No courses found"}),e.jsx(n,{to:"/admin/courses/new",className:"mt-4 inline-block px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Create Your First Course"})]})]})]})]})};export{f as default};
