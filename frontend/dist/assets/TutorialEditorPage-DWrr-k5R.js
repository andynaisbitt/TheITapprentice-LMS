import{c as B,o as Z,f as W,r as o,j as e,w as K,a as U,H as F,Z as ee,v as ae,N as te,D as A}from"./index-smch1bU1.js";import{u as re}from"./useTutorials-7CNGNCMd.js";import{d as le,u as se,i as de}from"./tutorialApi-BGaAJxYc.js";import{S as ie}from"./SkillSelector-BlyRZMr2.js";import{P as oe}from"./play-BSd53f-4.js";import{L as ne}from"./lightbulb-BmlqlY_f.js";import{G as ce}from"./grip-vertical-DpW5UWkH.js";import{C as ge}from"./clock-DNSf5APC.js";import{C as ue}from"./chevron-up-73WUkVcc.js";import{C as me}from"./code-t4YF0yhh.js";import{T as xe}from"./terminal-epc2Aa-g.js";import{T as be}from"./trash-2-7shbvHm_.js";import"./loader-2-D9MIupjh.js";const pe=B("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]),ye=B("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),S=[{value:"theory",label:"Theory",icon:U,color:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400"},{value:"practice",label:"Practice",icon:pe,color:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400"},{value:"quiz",label:"Quiz",icon:F,color:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400"},{value:"demonstration",label:"Demo",icon:oe,color:"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400"},{value:"exercise",label:"Exercise",icon:ne,color:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400"}],he=[{value:"none",label:"No Media",icon:te},{value:"code",label:"Code",icon:me},{value:"image",label:"Image",icon:A},{value:"video",label:"Video",icon:ye},{value:"diagram",label:"Diagram",icon:A},{value:"terminal",label:"Terminal",icon:xe}],ve=[{value:"javascript",label:"JavaScript"},{value:"typescript",label:"TypeScript"},{value:"python",label:"Python"},{value:"java",label:"Java"},{value:"csharp",label:"C#"},{value:"cpp",label:"C++"},{value:"go",label:"Go"},{value:"rust",label:"Rust"},{value:"html",label:"HTML"},{value:"css",label:"CSS"},{value:"bash",label:"Bash/Shell"},{value:"sql",label:"SQL"},{value:"json",label:"JSON"},{value:"yaml",label:"YAML"},{value:"markdown",label:"Markdown"},{value:"powershell",label:"PowerShell"},{value:"dockerfile",label:"Dockerfile"}],Q={step_order:1,title:"",step_type:"theory",content:"",media_type:"none",media_content:"",media_language:"javascript",media_caption:"",code_example:"",code_language:"javascript",hints:[],quiz_question:null,expected_action:"",estimated_minutes:5,xp_reward:0},ke=({step:t,index:d,totalSteps:h,onUpdate:i,onRemove:v,onMoveUp:g,onMoveDown:k})=>{const[u,f]=o.useState(!0),[x,p]=o.useState(!!t.quiz_question),b=S.find(a=>a.value===t.step_type)||S[0],w=b.icon;return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:`flex items-center justify-between p-4 cursor-pointer ${b.color}`,onClick:()=>f(!u),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ce,{className:"w-4 h-4 opacity-50"}),e.jsx(w,{className:"w-5 h-5"}),e.jsxs("span",{className:"font-semibold",children:["Step ",d+1,": ",t.title||"(Untitled)"]}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-white/50 dark:bg-black/20",children:b.label})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs flex items-center gap-1",children:[e.jsx(ge,{className:"w-3 h-3"})," ",t.estimated_minutes,"m"]}),t.xp_reward>0&&e.jsxs("span",{className:"text-xs flex items-center gap-1",children:[e.jsx(ee,{className:"w-3 h-3"})," ",t.xp_reward," XP"]}),u?e.jsx(ue,{className:"w-4 h-4"}):e.jsx(ae,{className:"w-4 h-4"})]})]}),u&&e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Step Title *"}),e.jsx("input",{type:"text",value:t.title,onChange:a=>i(d,"title",a.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-blue-500",placeholder:"What is this step about?"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Step Type"}),e.jsx("select",{value:t.step_type,onChange:a=>i(d,"step_type",a.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-blue-500",children:S.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Content (Markdown supported)"}),e.jsx("textarea",{value:t.content,onChange:a=>i(d,"content",a.target.value),rows:6,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm font-mono focus:ring-2 focus:ring-blue-500",placeholder:`Explain the concept, provide instructions, or describe what the learner needs to do...\r
\r
Use Markdown:\r
- **bold** for emphasis\r
- \`code\` for inline code\r
- Lists with - or 1. 2. 3.\r
- [Links](url)`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Media Type"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:he.map(a=>{const m=a.icon;return e.jsxs("button",{type:"button",onClick:()=>i(d,"media_type",a.value),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${t.media_type===a.value?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[e.jsx(m,{className:"w-4 h-4"}),a.label]},a.value)})})]}),t.media_type==="code"&&e.jsxs("div",{className:"space-y-3 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Code Example"}),e.jsx("select",{value:t.media_language||t.code_language,onChange:a=>{i(d,"media_language",a.target.value),i(d,"code_language",a.target.value)},className:"px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:ve.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),e.jsx("textarea",{value:t.media_content||t.code_example,onChange:a=>{i(d,"media_content",a.target.value),i(d,"code_example",a.target.value)},rows:8,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-900 text-green-400 text-sm font-mono focus:ring-2 focus:ring-blue-500",placeholder:"// Enter your code here..."})]}),t.media_type==="image"&&e.jsxs("div",{className:"space-y-3 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Image"}),e.jsx("input",{type:"text",value:t.media_content,onChange:a=>i(d,"media_content",a.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",placeholder:"https://example.com/image.png"}),e.jsx("input",{type:"text",value:t.media_caption,onChange:a=>i(d,"media_caption",a.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",placeholder:"Image caption (optional)"}),t.media_content&&e.jsx("img",{src:t.media_content,alt:t.media_caption||"Preview",className:"max-w-md rounded-lg border border-gray-200 dark:border-gray-700",onError:a=>a.target.style.display="none"})]}),t.media_type==="video"&&e.jsxs("div",{className:"space-y-3 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Video URL"}),e.jsx("input",{type:"text",value:t.media_content,onChange:a=>i(d,"media_content",a.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",placeholder:"YouTube, Vimeo, or direct video URL"}),e.jsx("input",{type:"text",value:t.media_caption,onChange:a=>i(d,"media_caption",a.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",placeholder:"Video description (optional)"})]}),t.media_type==="terminal"&&e.jsxs("div",{className:"space-y-3 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Terminal Output"}),e.jsx("textarea",{value:t.media_content,onChange:a=>i(d,"media_content",a.target.value),rows:6,className:"w-full px-3 py-2 border border-gray-700 rounded-lg bg-black text-green-400 text-sm font-mono focus:ring-2 focus:ring-blue-500",placeholder:`$ command
output...`})]}),t.media_type==="diagram"&&e.jsxs("div",{className:"space-y-3 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Diagram URL"}),e.jsx("input",{type:"text",value:t.media_content,onChange:a=>i(d,"media_content",a.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",placeholder:"URL to diagram image (draw.io, Mermaid, etc.)"}),e.jsx("input",{type:"text",value:t.media_caption,onChange:a=>i(d,"media_caption",a.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",placeholder:"Diagram description"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Expected Action (What should the learner do?)"}),e.jsx("input",{type:"text",value:t.expected_action,onChange:a=>i(d,"expected_action",a.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",placeholder:"e.g., 'Run the command in your terminal' or 'Answer the quiz question'"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Hints (comma-separated, revealed progressively if learner is stuck)"}),e.jsx("input",{type:"text",value:t.hints.join(", "),onChange:a=>i(d,"hints",a.target.value.split(",").map(m=>m.trim()).filter(Boolean)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",placeholder:"First hint, Second hint, Third hint"})]}),e.jsxs("div",{children:[e.jsxs("button",{type:"button",onClick:()=>p(!x),className:"text-sm text-blue-600 dark:text-blue-400 hover:underline flex items-center gap-1",children:[e.jsx(F,{className:"w-4 h-4"}),x?"Hide Quiz Question":"Add Quiz Question (Optional)"]}),x&&e.jsxs("div",{className:"mt-3 p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg space-y-3",children:[e.jsx("input",{type:"text",value:t.quiz_question?.question||"",onChange:a=>i(d,"quiz_question",{...t.quiz_question,question:a.target.value,type:t.quiz_question?.type||"multiple_choice"}),className:"w-full px-3 py-2 border border-purple-300 dark:border-purple-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",placeholder:"Quiz question..."}),e.jsxs("select",{value:t.quiz_question?.type||"multiple_choice",onChange:a=>i(d,"quiz_question",{...t.quiz_question,type:a.target.value}),className:"px-3 py-2 border border-purple-300 dark:border-purple-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",children:[e.jsx("option",{value:"multiple_choice",children:"Multiple Choice"}),e.jsx("option",{value:"true_false",children:"True/False"}),e.jsx("option",{value:"short_answer",children:"Short Answer"})]}),e.jsx("input",{type:"text",value:t.quiz_question?.options?.join(", ")||"",onChange:a=>i(d,"quiz_question",{...t.quiz_question,options:a.target.value.split(",").map(m=>m.trim()).filter(Boolean)}),className:"w-full px-3 py-2 border border-purple-300 dark:border-purple-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",placeholder:"Options (comma-separated for multiple choice)"}),e.jsx("input",{type:"text",value:t.quiz_question?.correct_answer||"",onChange:a=>i(d,"quiz_question",{...t.quiz_question,correct_answer:a.target.value}),className:"w-full px-3 py-2 border border-purple-300 dark:border-purple-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",placeholder:"Correct answer"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Estimated Time (minutes)"}),e.jsx("input",{type:"number",min:"1",max:"60",value:t.estimated_minutes,onChange:a=>i(d,"estimated_minutes",parseInt(a.target.value)||5),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"XP Reward (0 = default 10 XP)"}),e.jsx("input",{type:"number",min:"0",max:"100",value:t.xp_reward,onChange:a=>i(d,"xp_reward",parseInt(a.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>g(d),disabled:d===0,className:"px-3 py-1 text-sm bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-30",children:"↑ Move Up"}),e.jsx("button",{type:"button",onClick:()=>k(d),disabled:d===h-1,className:"px-3 py-1 text-sm bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-30",children:"↓ Move Down"})]}),h>1&&e.jsxs("button",{type:"button",onClick:()=>v(d),className:"flex items-center gap-1 px-3 py-1 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",children:[e.jsx(be,{className:"w-4 h-4"}),"Remove Step"]})]})]})]})},Le=()=>{const{id:t}=Z(),d=W(),{categories:h}=re(),[i,v]=o.useState(!1),[g,k]=o.useState(!1),[u,f]=o.useState(""),[x,p]=o.useState(""),[b,w]=o.useState(""),[a,m]=o.useState("beginner"),[V,X]=o.useState(30),[C,T]=o.useState(null),[q,z]=o.useState(""),[_,P]=o.useState(50),[E,I]=o.useState([]),[fe,G]=o.useState(!1),[D,L]=o.useState(!1),[c,y]=o.useState([{...Q}]);o.useEffect(()=>{if(!t){const l=u.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"");p(l)}},[u,t]),o.useEffect(()=>{t&&t!=="new"&&O(parseInt(t))},[t]);const O=async l=>{try{v(!0);const s=await le(l.toString());f(s.title),p(s.slug),w(s.description||""),m(s.difficulty),X(s.estimated_time_minutes||30),T(s.category_id),z(s.thumbnail_url||""),P(s.xp_reward),I(s.related_skills||[]),G(s.is_published),L(s.is_featured),s.steps.length>0&&y(s.steps.map(r=>({step_order:r.step_order,title:r.title,step_type:r.step_type||"theory",content:r.content||"",media_type:r.media_type||"none",media_content:r.media_content||"",media_language:r.media_language||r.code_language||"javascript",media_caption:r.media_caption||"",code_example:r.code_example||"",code_language:r.code_language||"javascript",hints:r.hints||[],quiz_question:r.quiz_question||null,expected_action:r.expected_action||"",estimated_minutes:r.estimated_minutes||5,xp_reward:r.xp_reward||0})))}catch(s){alert(`Failed to load tutorial: ${s.message}`)}finally{v(!1)}},M=()=>{y([...c,{...Q,step_order:c.length+1}])},$=l=>{const s=c.filter((r,n)=>n!==l);s.forEach((r,n)=>{r.step_order=n+1}),y(s)},H=(l,s,r)=>{const n=[...c];n[l]={...n[l],[s]:r},y(n)},R=(l,s)=>{const r=[...c],n=s==="up"?l-1:l+1;n<0||n>=r.length||([r[l],r[n]]=[r[n],r[l]],r.forEach((Y,J)=>{Y.step_order=J+1}),y(r))},N=c.reduce((l,s)=>l+s.estimated_minutes,0),j=async(l=!1)=>{if(!u.trim()){alert("Please enter a title");return}if(!x.trim()){alert("Please enter a slug");return}if(c.length===0||!c[0].title.trim()){alert("Please add at least one step");return}const s={title:u.trim(),slug:x.trim(),description:b.trim()||null,difficulty:a,estimated_time_minutes:N||V,category_id:C,thumbnail_url:q.trim()||null,xp_reward:_,related_skills:E,is_published:l,is_featured:D,steps:c.map(r=>({step_order:r.step_order,title:r.title.trim(),step_type:r.step_type,content:r.content.trim()||null,content_blocks:[],media_type:r.media_type,media_content:r.media_content.trim()||null,media_language:r.media_language,media_caption:r.media_caption.trim()||null,code_example:r.code_example.trim()||null,code_language:r.code_language,hints:r.hints.filter(n=>n.trim()),quiz_question:r.quiz_question,expected_action:r.expected_action.trim()||null,estimated_minutes:r.estimated_minutes,xp_reward:r.xp_reward}))};try{if(k(!0),t&&t!=="new"){const{steps:r,...n}=s;await se(parseInt(t),n),alert("Tutorial updated successfully!")}else await de(s),alert("Tutorial created successfully!");d("/admin/tutorials")}catch(r){alert(`Failed to save tutorial: ${r.message}`)}finally{k(!1)}};return i?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t&&t!=="new"?"Edit Tutorial":"Create Tutorial"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Build interactive tutorials with multiple content types"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>j(!1),disabled:g,className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 font-medium disabled:opacity-50",children:g?"Saving...":"Save Draft"}),e.jsx("button",{onClick:()=>j(!0),disabled:g,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium disabled:opacity-50",children:g?"Publishing...":"Publish"})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Basic Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Title *"}),e.jsx("input",{type:"text",value:u,onChange:l=>f(l.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500",placeholder:"Getting Started with Docker"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Slug *"}),e.jsx("input",{type:"text",value:x,onChange:l=>p(l.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500",placeholder:"getting-started-with-docker"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),e.jsx("textarea",{value:b,onChange:l=>w(l.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500",placeholder:"A brief description of what learners will achieve..."})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Difficulty"}),e.jsxs("select",{value:a,onChange:l=>m(l.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"beginner",children:"Beginner"}),e.jsx("option",{value:"intermediate",children:"Intermediate"}),e.jsx("option",{value:"advanced",children:"Advanced"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category"}),e.jsxs("select",{value:C||"",onChange:l=>T(l.target.value?parseInt(l.target.value):null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"None"}),h.map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"XP Reward"}),e.jsx("input",{type:"number",value:_,onChange:l=>P(parseInt(l.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Est. Time"}),e.jsxs("div",{className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-700 dark:text-gray-300",children:[N," min"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Thumbnail URL"}),e.jsx("input",{type:"text",value:q,onChange:l=>z(l.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500",placeholder:"https://..."})]}),e.jsx("div",{children:e.jsx(ie,{selectedSlugs:E,onChange:I,helpText:"Skills that will receive XP when this tutorial is completed"})})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Tutorial Steps (",c.length,")"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Add steps with different content types: theory, practice, quizzes, and more"})]}),e.jsxs("button",{onClick:M,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm font-medium",children:[e.jsx(K,{className:"w-4 h-4"}),"Add Step"]})]}),e.jsx("div",{className:"space-y-4",children:c.map((l,s)=>e.jsx(ke,{step:l,index:s,totalSteps:c.length,onUpdate:H,onRemove:$,onMoveUp:()=>R(s,"up"),onMoveDown:()=>R(s,"down")},s))}),e.jsx("button",{onClick:M,className:"w-full mt-4 py-3 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg text-gray-500 dark:text-gray-400 hover:border-blue-500 hover:text-blue-500 transition-colors",children:"+ Add Another Step"})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 sticky top-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Publish Settings"}),e.jsx("div",{className:"space-y-4 mb-6",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:D,onChange:l=>L(l.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Featured Tutorial"})]})}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Summary"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Total Steps:"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:c.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Est. Time:"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[N," min"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Total XP:"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[_+c.reduce((l,s)=>l+(s.xp_reward||10),0)," XP"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Step Types:"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:[...new Set(c.map(l=>l.step_type))].length})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>j(!1),disabled:g,className:"w-full px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 font-medium disabled:opacity-50",children:g?"Saving...":"Save Draft"}),e.jsx("button",{onClick:()=>j(!0),disabled:g,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium disabled:opacity-50",children:g?"Publishing...":"Publish Tutorial"}),e.jsx("button",{onClick:()=>d("/admin/tutorials"),className:"w-full px-4 py-2 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 font-medium",children:"Cancel"})]})]})})]})})]})};export{Le as default};
