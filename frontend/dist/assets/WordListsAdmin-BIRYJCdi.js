import{r as l,j as e,w as E,n as L,K as f}from"./index-smch1bU1.js";import{L as F}from"./loader-2-D9MIupjh.js";import{S as D}from"./star-BX-qMkwk.js";import{L as A}from"./lock-BePiEsY1.js";import{P as T}from"./pen-LvGhHwn3.js";import{E as I}from"./eye-DJREYbmB.js";import{T as W}from"./trash-2-7shbvHm_.js";const $=["general","programming","technology","science","business","gaming","creative"],K=()=>{const[c,o]=l.useState([]),[b,p]=l.useState(!0),[m,k]=l.useState(""),[u,v]=l.useState("all"),[w,g]=l.useState(!1),[n,x]=l.useState(null),[t,i]=l.useState({id:"",name:"",description:"",difficulty:"medium",theme:"general",words:"",unlock_level:1,is_featured:!1,is_active:!0});l.useEffect(()=>{j()},[]);const j=async()=>{p(!0);try{const r=await fetch("/api/v1/games/typing/admin/word-lists",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!r.ok)throw new Error("Failed to fetch word lists");const s=(await r.json()).map(a=>({id:a.id,name:a.name,description:a.description||"",difficulty:a.difficulty||"medium",theme:a.theme||"general",words:a.words||[],unlock_level:a.unlock_level||1,is_featured:a.is_featured||!1,is_active:a.is_active??!0,times_played:a.times_played||0,created_at:a.created_at||new Date().toISOString()}));o(s)}catch(r){console.error("Failed to load word lists:",r),o([])}finally{p(!1)}},N=r=>{x(r),i({id:r.id,name:r.name,description:r.description,difficulty:r.difficulty,theme:r.theme,words:r.words.join(`
`),unlock_level:r.unlock_level,is_featured:r.is_featured,is_active:r.is_active}),g(!0)},_=async r=>{if(confirm("Are you sure you want to delete this word list?"))try{if(!(await fetch(`/api/v1/games/typing/admin/word-lists/${r}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)throw new Error("Failed to delete word list");o(c.filter(s=>s.id!==r))}catch(d){console.error("Failed to delete word list:",d),alert("Failed to delete word list")}},S=async()=>{const r=t.words.split(`
`).map(s=>s.trim()).filter(Boolean),d={id:t.id||t.name.toLowerCase().replace(/\s+/g,"-"),name:t.name,description:t.description,difficulty:t.difficulty,theme:t.theme,words:r,unlock_level:t.unlock_level,is_featured:t.is_featured,is_active:t.is_active};try{if(n){const s=await fetch(`/api/v1/games/typing/admin/word-lists/${n.id}`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify(d)});if(!s.ok)throw new Error("Failed to update word list");const a=await s.json();o(c.map(y=>y.id===n.id?{...y,...a,words:a.words||r}:y))}else{const s=await fetch("/api/v1/games/typing/admin/word-lists",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify(d)});if(!s.ok)throw new Error("Failed to create word list");const a=await s.json();o([...c,{...a,words:a.words||r,times_played:0,created_at:a.created_at||new Date().toISOString()}])}g(!1),x(null),i({id:"",name:"",description:"",difficulty:"medium",theme:"general",words:"",unlock_level:1,is_featured:!1,is_active:!0})}catch(s){console.error("Failed to save word list:",s),alert("Failed to save word list")}},C=r=>{switch(r){case"easy":return"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400";case"medium":return"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400";case"hard":return"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400";case"expert":return"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400";default:return"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-400"}},h=c.filter(r=>{if(u!=="all"&&r.difficulty!==u)return!1;if(m){const d=m.toLowerCase();if(!r.name.toLowerCase().includes(d)&&!r.description.toLowerCase().includes(d)&&!r.theme.toLowerCase().includes(d))return!1}return!0});return b?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(F,{className:"w-8 h-8 animate-spin text-primary"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Word Lists"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Manage word lists for typing games"})]}),e.jsxs("button",{onClick:()=>{x(null),i({id:"",name:"",description:"",difficulty:"medium",theme:"general",words:"",unlock_level:1,is_featured:!1,is_active:!0}),g(!0)},className:"inline-flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors",children:[e.jsx(E,{className:"w-4 h-4"}),"New Word List"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(L,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search word lists...",value:m,onChange:r=>k(r.target.value),className:"w-full pl-10 pr-4 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),e.jsxs("select",{value:u,onChange:r=>v(r.target.value),className:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50",children:[e.jsx("option",{value:"all",children:"All Difficulties"}),e.jsx("option",{value:"easy",children:"Easy"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"hard",children:"Hard"}),e.jsx("option",{value:"expert",children:"Expert"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map(r=>e.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-xl shadow-sm p-5 border ${r.is_active?"border-gray-200 dark:border-gray-700":"border-gray-200 dark:border-gray-700 opacity-60"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{className:"w-5 h-5 text-primary"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:r.name})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[r.is_featured&&e.jsx(D,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"}),!r.is_active&&e.jsx("span",{className:"text-xs text-gray-400",children:"Inactive"})]})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3 line-clamp-2",children:r.description}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${C(r.difficulty)}`,children:r.difficulty}),e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300",children:r.theme}),r.unlock_level>1&&e.jsxs("span",{className:"flex items-center gap-1 px-2 py-0.5 text-xs font-medium rounded-full bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400",children:[e.jsx(A,{className:"w-3 h-3"}),"Lv.",r.unlock_level]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400 mb-4",children:[e.jsxs("span",{children:[r.words.length," words"]}),e.jsxs("span",{children:[r.times_played.toLocaleString()," plays"]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mb-1",children:"Sample words:"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 truncate",children:[r.words.slice(0,5).join(", "),"..."]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("button",{onClick:()=>N(r),className:"flex-1 flex items-center justify-center gap-1 px-3 py-2 text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:[e.jsx(T,{className:"w-4 h-4"}),"Edit"]}),e.jsxs("button",{className:"flex-1 flex items-center justify-center gap-1 px-3 py-2 text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:[e.jsx(I,{className:"w-4 h-4"}),"Preview"]}),e.jsx("button",{onClick:()=>_(r.id),className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:e.jsx(W,{className:"w-4 h-4"})})]})]},r.id))}),h.length===0&&e.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-xl",children:[e.jsx(f,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No word lists found"})]}),w&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:n?"Edit Word List":"Create New Word List"})}),e.jsxs("div",{className:"p-6 overflow-y-auto flex-1 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name *"}),e.jsx("input",{type:"text",value:t.name,onChange:r=>i({...t,name:r.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"e.g., JavaScript Keywords"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"ID"}),e.jsx("input",{type:"text",value:t.id,onChange:r=>i({...t,id:r.target.value}),placeholder:"Auto-generated if empty",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),e.jsx("input",{type:"text",value:t.description,onChange:r=>i({...t,description:r.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Brief description of this word list"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Difficulty"}),e.jsxs("select",{value:t.difficulty,onChange:r=>i({...t,difficulty:r.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"easy",children:"Easy"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"hard",children:"Hard"}),e.jsx("option",{value:"expert",children:"Expert"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Theme"}),e.jsx("select",{value:t.theme,onChange:r=>i({...t,theme:r.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:$.map(r=>e.jsx("option",{value:r,children:r.charAt(0).toUpperCase()+r.slice(1)},r))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Unlock Level"}),e.jsx("input",{type:"number",min:"1",max:"10",value:t.unlock_level,onChange:r=>i({...t,unlock_level:parseInt(r.target.value)||1}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Words (one per line)"}),e.jsx("textarea",{value:t.words,onChange:r=>i({...t,words:r.target.value}),rows:8,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm",placeholder:"Enter words or phrases, one per line..."}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[t.words.split(`
`).filter(Boolean).length," words entered"]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.is_featured,onChange:r=>i({...t,is_featured:r.target.checked}),className:"w-4 h-4 rounded border-gray-300 text-primary focus:ring-primary"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Featured"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.is_active,onChange:r=>i({...t,is_active:r.target.checked}),className:"w-4 h-4 rounded border-gray-300 text-primary focus:ring-primary"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Active"})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{g(!1),x(null)},className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{onClick:S,disabled:!t.name||!t.words.trim(),className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors disabled:opacity-50",children:n?"Save Changes":"Create Word List"})]})]})})]})};export{K as WordListsAdmin,K as default};
