import{o as me,f as ue,r as u,j as e,m as F,a5 as k,q as T,a as V,X as be,a9 as he,C as pe}from"./index-smch1bU1.js";import{c as O}from"./coursesApi-BKihutzQ.js";import{M as H}from"./medal-C-gRj-JI.js";import{C as ye}from"./chevron-left-B-a8n3qW.js";const fe=()=>({showXPGain:(p,b)=>{}}),ke=()=>({showAchievementUnlock:p=>{}}),_e=()=>{const{courseId:p}=me(),b=ue(),{showXPGain:J}=fe(),{showAchievementUnlock:K}=ke(),[h,Z]=u.useState(null),[g,j]=u.useState(null),[i,N]=u.useState(null),[f,P]=u.useState(new Set),[q,U]=u.useState({}),[ee,Y]=u.useState(!0),[B,G]=u.useState(null),[L,R]=u.useState(!0),[re,A]=u.useState(!1),[x,te]=u.useState(null),[C,X]=u.useState(!1);u.useEffect(()=>{(async()=>{if(p)try{Y(!0),G(null);const a=await O.getCourse(p);Z(a);try{const o=await O.getProgress(p);o.is_complete&&(X(!0),console.log("[CoursePlayer] Course already complete - will not show completion modal"));const s=new Set,l={};if(o.module_progress&&Object.entries(o.module_progress).forEach(([d,n])=>{const m=n.completed_sections||[];l[d]=m,m.forEach(y=>s.add(y))}),P(s),U(l),o.current_module&&a.modules){const d=a.modules.find(n=>n.id===o.current_module);if(d&&d.sections&&d.sections.length>0){const n=d.sections.sort((y,M)=>y.order_index-M.order_index),m=n.find(y=>!s.has(y.id));j(d),N(m||n[0]);return}}}catch{console.log("No existing progress, starting fresh")}const t=a.modules?.sort((o,s)=>o.order_index-s.order_index)||[];if(t.length>0){const o=t[0],s=o.sections?.sort((l,d)=>l.order_index-d.order_index)||[];s.length>0&&(j(o),N(s[0]))}}catch(a){console.error("Error loading course:",a),G(a.response?.data?.detail||"Failed to load course")}finally{Y(!1)}})()},[p]);const _=(r,a)=>{if(f.has(a.id)){j(r),N(a),window.scrollTo(0,0);return}if(i?.id===a.id)return;const t=h?.modules?.sort((l,d)=>l.order_index-d.order_index)||[];r.sections?.sort((l,d)=>l.order_index-d.order_index);let o=!1,s=!1;for(const l of t){const d=l.sections?.sort((n,m)=>n.order_index-m.order_index)||[];for(const n of d)if(!f.has(n.id)){o=!0,n.id===a.id&&(s=!0);break}if(o)break}if(!s){alert("Please complete the previous sections in order before accessing this one.");return}j(r),N(a),window.scrollTo(0,0)},se=async()=>{if(!(!i||!g||!p)){if(f.has(i.id)){console.log("Section already marked complete");return}try{P(s=>new Set(s).add(i.id));const r=q[g.id]||[],a=r.includes(i.id)?r:[...r,i.id];console.log("Updating progress:",{courseId:p,moduleId:g.id,sectionId:i.id,updatedSections:a});const t=await O.updateProgress(p,g.id,{completed_sections:a,time_spent:0});console.log("Progress update result:",t),U(s=>({...s,[g.id]:t.completed_sections||a}));const o=t;t.course_complete&&o.xp_gains&&o.xp_gains.length>0&&(J(o.total_xp_gained||0,"Course completed"),o.xp_gains.forEach(s=>{s.achievements_unlocked&&s.achievements_unlocked.length>0&&s.achievements_unlocked.forEach(l=>{K(l)})})),(t.module_completed||t.course_complete)&&!C?(console.log("[CoursePlayer] Showing completion modal",{module_completed:t.module_completed,course_complete:t.course_complete,was_already_complete:C,certificate:o.certificate,certificate_id:o.certificate_id}),te(t),A(!0)):C&&console.log("[CoursePlayer] Skipping completion modal - course already complete")}catch(r){console.error("Error marking section complete:",r),alert("Failed to save progress. Please try again."),P(a=>{const t=new Set(a);return t.delete(i.id),t})}}},I=()=>{if(!h||!g||!i)return null;const r=h.modules?.sort((s,l)=>s.order_index-l.order_index)||[],a=r.findIndex(s=>s.id===g.id),t=g.sections?.sort((s,l)=>s.order_index-l.order_index)||[],o=t.findIndex(s=>s.id===i.id);if(o<t.length-1)return{module:g,section:t[o+1]};if(a<r.length-1){const s=r[a+1],l=s.sections?.sort((d,n)=>d.order_index-n.order_index)||[];if(l.length>0)return{module:s,section:l[0]}}return null},ae=()=>{if(!h||!g||!i)return null;const r=h.modules?.sort((s,l)=>s.order_index-l.order_index)||[],a=r.findIndex(s=>s.id===g.id),t=g.sections?.sort((s,l)=>s.order_index-l.order_index)||[],o=t.findIndex(s=>s.id===i.id);if(o>0)return{module:g,section:t[o-1]};if(a>0){const s=r[a-1],l=s.sections?.sort((d,n)=>d.order_index-n.order_index)||[];if(l.length>0)return{module:s,section:l[l.length-1]}}return null},oe=()=>{const r=I();if(!r){f.has(i.id)?(alert("Course Complete! Check your dashboard for your certificate and achievements."),setTimeout(()=>b("/dashboard"),1e3)):alert("Please mark this section as complete to finish the course.");return}if(!f.has(i.id)){alert("Please mark the current section as complete before moving to the next one.");return}_(r.module,r.section)},le=(r,a)=>{const t=r.id||`block-${a}`;switch(r.type){case"heading":const o=r.content,s=`h${o.level||2}`;return e.jsx(s,{className:"text-gray-900 dark:text-white font-bold mb-4",children:o.text},t);case"text":const l=r.content;return e.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed whitespace-pre-wrap",children:l.text||l},t);case"code":const d=r.content;return e.jsx("pre",{className:"bg-gray-900 dark:bg-gray-950 rounded-lg p-4 overflow-x-auto",children:e.jsx("code",{className:"text-green-400 text-sm font-mono",children:d.code||d.text})},t);case"image":const n=r.content;return e.jsx("img",{src:n.url,alt:n.alt||"Content image",className:"rounded-lg max-w-full h-auto"},t);case"video":const m=r.content;return e.jsx("div",{className:"aspect-video bg-gray-100 dark:bg-gray-900 rounded-lg overflow-hidden",children:e.jsx("iframe",{src:m.url,title:m.title||"Video content",className:"w-full h-full",allowFullScreen:!0})},t);case"callout":const y=r.content,M={info:"bg-blue-50 dark:bg-blue-500/10 border-blue-500 text-blue-700 dark:text-blue-300",warning:"bg-yellow-50 dark:bg-yellow-500/10 border-yellow-500 text-yellow-700 dark:text-yellow-300",danger:"bg-red-50 dark:bg-red-500/10 border-red-500 text-red-700 dark:text-red-300",success:"bg-green-50 dark:bg-green-500/10 border-green-500 text-green-700 dark:text-green-300",tip:"bg-purple-50 dark:bg-purple-500/10 border-purple-500 text-purple-700 dark:text-purple-300"},de=M[y.style]||M.info;return e.jsxs("div",{className:`border-l-4 p-4 rounded ${de}`,children:[y.title&&e.jsx("p",{className:"font-semibold mb-1",children:y.title}),e.jsx("p",{children:y.text})]},t);case"divider":const ie=r.content,W={solid:"border-gray-300 dark:border-gray-600",dashed:"border-gray-300 dark:border-gray-600 border-dashed",thick:"border-gray-400 dark:border-gray-500 border-2"},ne=W[ie?.style]||W.solid;return e.jsx("hr",{className:`my-8 border-t ${ne}`},t);case"timeline":const ce=r.content?.items||[];return e.jsxs("div",{className:"relative pl-8 space-y-6 my-6",children:[e.jsx("div",{className:"absolute left-3 top-2 bottom-2 w-0.5 bg-gradient-to-b from-blue-500 to-purple-500"}),ce.map((c,w)=>e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-5 w-4 h-4 bg-blue-500 rounded-full border-2 border-white dark:border-gray-800"}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[e.jsx("span",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400",children:c.year}),e.jsx("h4",{className:"text-lg font-bold text-gray-900 dark:text-white mt-1",children:c.event}),c.description&&e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2 text-sm",children:c.description})]})]},w))]},t);case"quiz":const $=r.content,Q=$?.questions||[];return e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 my-6",children:[$.title&&e.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ“"}),$.title]}),e.jsx("div",{className:"space-y-6",children:Q.map((c,w)=>e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[e.jsxs("p",{className:"font-medium text-gray-900 dark:text-white mb-3",children:[e.jsxs("span",{className:"text-blue-600 dark:text-blue-400 mr-2",children:["Q",w+1,"."]}),c.question]}),(c.type==="multiple_choice"||c.type==="multiple_select"||c.type==="true_false")&&c.options&&e.jsx("div",{className:"space-y-2 ml-6",children:c.options.map((xe,ge)=>e.jsxs("label",{className:"flex items-center gap-3 p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer",children:[e.jsx("input",{type:c.type==="multiple_select"?"checkbox":"radio",name:`quiz-${t}-q${w}`,className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:xe})]},ge))}),(c.type==="short_answer"||c.type==="fill_blank")&&e.jsx("div",{className:"ml-6",children:e.jsx("input",{type:"text",placeholder:"Type your answer...",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})}),c.type==="code_challenge"&&e.jsx("div",{className:"ml-6",children:e.jsx("textarea",{rows:4,placeholder:c.code_template||"// Write your code here...",className:"w-full p-3 font-mono text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-900 text-green-400"})}),c.points&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 ml-6",children:[c.points," point",c.points!==1?"s":""]})]},c.id||w))}),Q.length>0&&e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Check Answers"})})]},t);case"interactive":const z=r.content;return e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 rounded-xl p-6 border border-purple-200 dark:border-purple-700 my-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("span",{className:"text-2xl",children:"ðŸŽ®"}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Interactive Component"})]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:["Component: ",e.jsx("code",{className:"bg-gray-200 dark:bg-gray-700 px-2 py-0.5 rounded",children:z?.component||"Unknown"})]}),z?.props&&Object.keys(z.props).length>0&&e.jsx("pre",{className:"mt-2 text-xs bg-gray-100 dark:bg-gray-800 p-2 rounded overflow-x-auto",children:JSON.stringify(z.props,null,2)}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs mt-2 italic",children:"Custom interactive components require specific implementation."})]},t);default:return e.jsxs("div",{className:"text-gray-500 dark:text-gray-400 italic",children:["Unsupported content type: ",r.type]},t)}};if(ee)return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading course..."})]})});if(B)return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-6",children:e.jsxs("div",{className:"bg-red-50 dark:bg-red-500/10 border border-red-200 dark:border-red-500 rounded-lg p-6 max-w-md",children:[e.jsx("p",{className:"text-red-600 dark:text-red-400 text-center",children:B}),e.jsx("button",{onClick:()=>b("/courses"),className:"mt-4 w-full px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-900 dark:text-white rounded-lg transition-colors",children:"Back to Courses"})]})});if(C&&h)return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-6",children:e.jsxs(F.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:"bg-white dark:bg-gray-800 rounded-2xl p-8 max-w-2xl w-full border border-gray-200 dark:border-gray-700 shadow-lg",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(k,{size:80,className:"mx-auto mb-4 text-yellow-500"}),e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-3",children:"Course Completed!"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-lg",children:["You've already completed ",e.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-semibold",children:h.title})]})]}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsxs("div",{className:"bg-gray-100 dark:bg-gray-700/50 rounded-lg p-4 flex items-center gap-4",children:[e.jsx(T,{size:40,className:"text-green-500 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 dark:text-white font-semibold",children:"Course Progress"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"100% Complete - All modules finished"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-600/20 dark:to-purple-600/20 border-2 border-blue-300 dark:border-blue-500 rounded-lg p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 rounded-full p-2",children:e.jsx(k,{size:24,className:"text-white"})}),e.jsx("p",{className:"text-gray-900 dark:text-white font-bold text-lg",children:"Certificate Available"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:"Your certificate of completion is ready to view and share"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>b("/certifications"),className:"w-full px-6 py-4 bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white rounded-lg font-semibold transition-colors shadow-lg flex items-center justify-center gap-2 text-lg",children:[e.jsx(k,{size:22}),"View My Certificate"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>{X(!1);const r=h.modules?.sort((a,t)=>a.order_index-t.order_index)||[];if(r.length>0){const a=r[0],t=a.sections?.sort((o,s)=>o.order_index-s.order_index)||[];t.length>0&&(j(a),N(t[0]))}},className:"px-4 py-3 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-900 dark:text-white rounded-lg font-semibold transition-colors flex items-center justify-center gap-2",children:[e.jsx(V,{size:18}),"Review Course"]}),e.jsx("button",{onClick:()=>b("/dashboard"),className:"px-4 py-3 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-900 dark:text-white rounded-lg font-semibold transition-colors",children:"Go to Dashboard"})]}),e.jsx("button",{onClick:()=>b("/courses"),className:"w-full px-4 py-3 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-lg transition-colors",children:"Browse More Courses"})]})]})});if(!h||!g||!i)return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[e.jsx(V,{size:64,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-xl",children:"Course content not available"}),e.jsx("button",{onClick:()=>b("/courses"),className:"mt-4 px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-900 dark:text-white rounded-lg transition-colors",children:"Back to Courses"})]})});const v=I(),S=ae(),E=f.has(i.id),D=!v;return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex",children:[re&&x&&e.jsx("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsx(F.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white dark:bg-gray-800 rounded-2xl p-8 max-w-md w-full border border-gray-200 dark:border-gray-700 shadow-xl",children:e.jsx("div",{className:"text-center",children:x.course_complete?e.jsxs(e.Fragment,{children:[e.jsx(k,{size:64,className:"mx-auto mb-4 text-yellow-500 animate-bounce"}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-3",children:"Course Complete!"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Congratulations! You've completed the entire course!"}),e.jsxs("div",{className:"space-y-3 mb-6",children:[x.certificate?e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-600/20 dark:to-purple-600/20 border-2 border-blue-300 dark:border-blue-500 rounded-xl p-5",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 rounded-full p-2.5",children:e.jsx(k,{size:24,className:"text-white"})}),e.jsxs("div",{className:"text-left flex-1",children:[e.jsx("p",{className:"text-gray-900 dark:text-white font-bold text-lg mb-1",children:x.certificate.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:x.certificate.description})]})]}),x.certificate?.verification_code&&e.jsxs("div",{className:"bg-gray-100 dark:bg-black/40 rounded-lg p-3 mb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs",children:"Verification Code"}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(x.certificate.verification_code),alert("Verification code copied!")},className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 text-xs",children:"Copy"})]}),e.jsx("p",{className:"text-blue-600 dark:text-blue-300 font-mono text-sm font-semibold tracking-wide break-all",children:x.certificate.verification_code})]}),!x.certificate&&x.certificate_id&&e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-500/20 border border-blue-200 dark:border-blue-500 rounded-lg p-3 mb-3 text-center",children:[e.jsxs("p",{className:"text-blue-700 dark:text-blue-300 text-sm",children:["Certificate ID: ",x.certificate_id]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs mt-1",children:"View full details in your certificates page"})]}),x.certificate.skills_acquired&&x.certificate.skills_acquired.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:x.certificate.skills_acquired.map((r,a)=>e.jsx("span",{className:"bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300 text-xs px-2.5 py-1 rounded-full font-medium",children:r},a))})]}):x.certificate_id?e.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-500/20 border-2 border-yellow-300 dark:border-yellow-500 rounded-xl p-5 text-center",children:[e.jsx(k,{size:48,className:"mx-auto mb-3 text-yellow-500"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-bold mb-2",children:"Certificate Earned!"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-3",children:"Your certificate has been generated and saved"}),e.jsxs("p",{className:"text-yellow-600 dark:text-yellow-400 text-xs font-mono bg-yellow-100 dark:bg-black/40 rounded p-2 mb-3",children:["ID: ",x.certificate_id]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs",children:"View full details in your Certificates page"})]}):e.jsx("div",{className:"bg-blue-50 dark:bg-blue-500/20 border border-blue-200 dark:border-blue-400 rounded-xl p-4 text-center",children:e.jsx("p",{className:"text-blue-700 dark:text-blue-300 text-sm",children:"Certificate will be available in your profile shortly"})}),x.achievement_awarded&&e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-500/20 dark:to-pink-500/20 border border-purple-200 dark:border-purple-500 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-purple-500 rounded-full p-2",children:e.jsx(H,{size:20,className:"text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-purple-700 dark:text-purple-300 font-semibold",children:"Achievement Unlocked!"}),e.jsx("p",{className:"text-purple-600 dark:text-purple-200 text-sm",children:"Check your achievements"})]})]})})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("button",{onClick:()=>b("/dashboard"),className:"w-full px-4 py-3 bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white rounded-lg font-semibold transition-colors shadow-lg",children:"Go to Dashboard"}),e.jsxs("div",{className:"flex gap-3",children:[x.certificate&&e.jsxs("button",{onClick:()=>b("/certifications"),className:"flex-1 px-4 py-3 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-900 dark:text-white rounded-lg font-semibold transition-colors flex items-center justify-center gap-2",children:[e.jsx(k,{size:18}),"View Certificates"]}),e.jsx("button",{onClick:()=>A(!1),className:"flex-1 px-4 py-3 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-900 dark:text-white rounded-lg font-semibold transition-colors",children:"Review Course"})]})]})]}):x.module_completed?e.jsxs(e.Fragment,{children:[e.jsx(H,{size:64,className:"mx-auto mb-4 text-green-500"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Module Complete!"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Great job! You've finished this module."}),e.jsx("button",{onClick:()=>{A(!1),v&&_(v.module,v.section)},className:"w-full px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-semibold transition-colors",children:v?"Continue to Next Module":"Close"})]}):null})})}),e.jsx("aside",{className:`${L?"w-80":"w-0"} bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transition-all duration-300 overflow-hidden flex-shrink-0`,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white truncate",children:h.title}),e.jsx("button",{onClick:()=>R(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-white lg:hidden",children:e.jsx(be,{size:20})})]}),e.jsx("div",{className:"space-y-4",children:h.modules?.sort((r,a)=>r.order_index-a.order_index).map((r,a)=>e.jsxs("div",{className:"bg-gray-100 dark:bg-gray-700/30 rounded-lg p-3",children:[e.jsxs("div",{className:"text-gray-900 dark:text-white font-semibold mb-2",children:["Module ",a+1,": ",r.title]}),e.jsx("div",{className:"space-y-1",children:r.sections?.sort((t,o)=>t.order_index-o.order_index).map((t,o)=>{const s=i?.id===t.id,l=f.has(t.id),d=I(),n=d?.module.id===r.id&&d?.section.id===t.id,m=l||s||n;return e.jsxs("button",{onClick:()=>m&&_(r,t),disabled:!m,className:`w-full text-left px-3 py-2 rounded text-sm transition-colors flex items-center gap-2 ${s?"bg-blue-500 text-white":m?"text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-200 dark:hover:bg-gray-700/50":"text-gray-400 dark:text-gray-600 cursor-not-allowed"}`,children:[l?e.jsx(T,{size:14,className:"text-green-500 flex-shrink-0"}):e.jsx("span",{className:`w-3.5 h-3.5 rounded-full border flex-shrink-0 ${m?"border-gray-400":"border-gray-300 dark:border-gray-700"}`}),e.jsx("span",{className:"truncate",children:t.title})]},t.id)})})]},r.id))}),e.jsx("button",{onClick:()=>b(`/courses/${p}`),className:"w-full mt-6 px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-900 dark:text-white rounded-lg font-semibold transition-colors",children:"Exit Course"})]})}),e.jsx("main",{className:"flex-1 overflow-y-auto",children:e.jsxs("div",{className:"max-w-4xl mx-auto p-6 lg:p-12",children:[!L&&e.jsxs("button",{onClick:()=>R(!0),className:"mb-6 lg:hidden flex items-center gap-2 px-4 py-2 bg-white dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-900 dark:text-white rounded-lg transition-colors border border-gray-200 dark:border-gray-700",children:[e.jsx(he,{size:20}),"Course Menu"]}),i.content_blocks&&i.content_blocks.length>0?e.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800/50 rounded-2xl p-8 lg:p-12 border border-gray-200 dark:border-gray-700 shadow-sm",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-6",children:i.title}),e.jsx("div",{className:"space-y-6",children:i.content_blocks?.sort((r,a)=>r.order-a.order).map((r,a)=>le(r,a))}),!E&&e.jsxs("button",{onClick:se,className:"mt-8 px-6 py-3 bg-green-500 hover:bg-green-600 text-white rounded-lg font-semibold transition-colors flex items-center gap-2",children:[e.jsx(T,{size:18}),"Mark as Complete"]}),D&&E&&e.jsxs("div",{className:"mt-8 p-6 bg-green-50 dark:bg-green-500/10 border border-green-200 dark:border-green-500 rounded-lg",children:[e.jsx("h3",{className:"text-green-700 dark:text-green-400 font-semibold mb-2",children:"Course Complete!"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"You've completed all sections. Check your dashboard for your certificate!"}),e.jsx("button",{onClick:()=>b("/dashboard"),className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg font-semibold transition-colors",children:"Go to Dashboard"})]})]},i.id):e.jsxs("div",{className:"bg-white dark:bg-gray-800/50 rounded-2xl p-8 border border-gray-200 dark:border-gray-700 text-center text-gray-500 dark:text-gray-400",children:[e.jsx(V,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No content available"})]}),e.jsxs("div",{className:"flex justify-between mt-8",children:[e.jsxs("button",{onClick:()=>S&&_(S.module,S.section),disabled:!S,className:"px-6 py-3 bg-white dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-900 dark:text-white rounded-lg font-semibold transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed border border-gray-200 dark:border-gray-700",children:[e.jsx(ye,{size:18}),"Previous"]}),e.jsxs("button",{onClick:oe,disabled:!E&&!D,className:"px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-semibold transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[D?"Finish Course":"Next",e.jsx(pe,{size:18})]})]})]})})]})};export{_e as default};
